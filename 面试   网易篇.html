<html>
<head>
  <title>面试  : 网易篇</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="31970C85-5593-49C8-8F85-8B41AD72C64F"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="970"/>
<h1>面试  : 网易篇</h1>

<div><span><div><span style="font-size: 18px; font-weight: bold;">前言：先自己尝试去回答，回答不了再看参考答案，你才能学的更多！</span></div><div><span style="font-size: 18px; font-weight: bold;"><br/></span></div><div><span style="font-weight: bold;">网易一面iOS：</span></div><div><span style="font-weight: bold;">1.你一般学习iOS是如何学习的？</span></div><div><span style="font-weight: bold;">2.app内存你是如何分析的？</span></div><div><span style="font-weight: bold;">3.用过 TableView 吗，平时怎么解决 TableView 滑动卡顿问题的？</span></div><div><span style="font-weight: bold;">4.网络模型了解么？有哪几种？说说你的看法？</span></div><div><span style="font-weight: bold;">5.block本质是什么？</span></div><div><span style="font-weight: bold;">6.KVC机制是如何通过key找到value。</span></div><div><span style="font-weight: bold;">7.说说你最熟悉的第三方，知晓其原理么？</span></div><div><br/></div><hr/><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div><span style="font-weight: bold;">1.你是如何学习iOS的？勿喷，我的哥！</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 15px; color: rgb(0, 176, 80); font-family: Calibri; font-weight: bold;"> </span><span style="font-size: 15px; color: rgb(0, 176, 80); font-weight: bold;">在职的开发人员比较好的五种学习方法</span><span style="font-weight: bold;"> </span><span style="font-size: 15px; color: rgb(0, 176, 80); font-family: Calibri; font-weight: bold;">:</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 15px; color: rgb(0, 176, 80); font-family: Calibri; font-weight: bold;">1</span><span style="font-size: 15px; color: rgb(0, 176, 80);">、</span><span style="font-size: 15px; color: rgb(0, 176, 80);">做有难度的项目</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 15px;">如果你做的是一个界面粗糙,逻辑简单,交互乏味的app, 那么相应的,从中获取的东西肯定是不多的.所以,当你的技术进步缓慢的时候,很可能就是缺乏挑战的时候.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><div><span style="font-size: 15px; color: rgb(0, 176, 80); font-family: Calibri; font-weight: bold;">2</span><span style="font-size: 15px; color: rgb(0, 176, 80);">、</span><span style="font-size: 15px; color: rgb(0, 176, 80);">尽量少抱大腿</span><span style="font-size: 15px; color: rgb(0, 176, 80); font-family: Calibri; font-weight: bold;">,</span><span style="font-size: 15px; color: rgb(0, 176, 80);">或者干脆别抱大腿</span></div></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 15px;">以前比较笨加了很多开发群,有问题积极提问.后来就感觉这样很蠢.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 15px; font-family: Calibri;">1</span><span style="-en-paragraph: true; font-size: 15px;">、要么回答者寥寥,顶多给你提个方向.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 15px;">2、要么就算是技术很好的人,在不了解你代码的情况下也不大可能直接告诉你正确答案.</span><span style="-en-paragraph: true; font-size: 15px;">所以,凡事靠自己</span> <span style="-en-paragraph: true; font-size: 15px;">,是个很好地习惯</span> <span style="-en-paragraph: true; font-size: 15px;">.</span> <span style="-en-paragraph: true; font-size: 15px;">少麻烦别人</span> <span style="-en-paragraph: true; font-size: 15px;">,还能促使自己进步.何乐而不为呢</span><span style="-en-paragraph: true; font-size: 15px;">?</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><div><span style="font-size: 15px; color: rgb(0, 176, 80); font-family: Calibri; font-weight: bold;">3</span><span style="font-size: 15px; color: rgb(0, 176, 80);">、</span><span style="font-size: 15px; color: rgb(0, 176, 80);">多读源码</span></div></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 15px;">大家对读源码有个错误的认知,觉得不读懂每句话就不叫读源码. 其实不是这样的,你完全可以用读网络小说的态度来读源码,觉得这段写的看不懂,你看的不爽,直接略过.用五柳先生的话就是,不求甚解. 这样反复看反复看,而且随着平时代码量的增加,有些以前看不懂的地方也会慢慢豁然开朗,当然,该查的地方还是要查,也不能略过略过的把所有代码都略过了. 但是读源码也不能盲目的看,最好是看和最近的工作相关的.比如,你最近在搞一些与网络联系比较紧的项目,那肯定要找AFNetworking这种经典的来看.如果最近在搞图像处理,那肯定要找GPUImage或者CoreImage方面的源码来看. 因为这样和项目结合比较紧,你看的代码和你写的代码很容易结合在一起,事半功倍.</span></div><div><span style="direction: ltr; font-size: 11pt; color: rgb(0, 176, 80); font-family: Calibri; font-weight: bold;">4</span><span style="direction: ltr; font-size: 11pt; color: rgb(0, 176, 80);">、</span><span style="direction: ltr; font-size: 11pt; color: rgb(0, 176, 80);">多读国外的</span><span style="direction: ltr; font-size: 11pt; color: rgb(0, 176, 80); font-family: Calibri; font-weight: bold;">iOS</span><span style="direction: ltr; font-size: 11pt; color: rgb(0, 176, 80);">开发网站和</span><span style="direction: ltr; font-size: 11pt; color: rgb(0, 176, 80); font-family: Calibri; font-weight: bold;">blog</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; font-size: 15px;">翻墙软件肯定是要有的.你要知道,第一手的开发资料永远都是英文的,而且以英语为母语的开发者学起新技术来有天然的优势.要把看Raywenderlich和nshipster还有objc.io当做生活习惯来看.而且现在的国人开发环境真的比早年的程序员幸福太多了.swift刚出没到一个月就有团队全部翻译完了那本官方指南.所以,现在学不好编程是没有任何借口的. 而且,说自己英语不好而拒绝看英文文档的人,我感觉完全是态度有问题.这种文档类的资料,基本没有俚语或者日常用语,高中的那些英文基础都够用了,随时备一本词典,随看随查,是完全没有问题的.</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><div><span style="font-size: 15px; color: rgb(0, 176, 80); font-family: Calibri; font-weight: bold;">5</span><span style="font-size: 15px; color: rgb(0, 176, 80);">、</span><span style="font-size: 15px; color: rgb(0, 176, 80);">要孜孜不倦的学习</span></div></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; direction: ltr; font-size: 11pt;">有句话叫技多不压身，我从来没有听过谁因为学习而贫困潦倒，书山有路勤为径，学海无涯苦作舟！</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph: true; direction: ltr; font-size: 11pt;">信心</span><span style="direction: ltr; font-size: 11pt; font-family: Calibri;"> </span> <span style="direction: ltr; font-size: 11pt; font-family: Calibri;">+</span> <span style="-en-paragraph: true; direction: ltr; font-size: 11pt;">坚定！</span></div><div><br/></div><div><span style="font-size: 14px; font-weight: bold;">2.app内存你是如何分析的？</span></div><h2 style="padding: 0px; font-size: 21px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-align: left;"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">Xcode下查看app内存使用情况有2中方法：</span></h2><ol><li><span style="-en-paragraph: true; font-size: 12px;">Navigator导航栏中的Debug navigator中的Memory</span></li><li><span style="-en-paragraph: true; font-size: 12px;">Instruments</span></li></ol><h2 style="padding: 0px; font-size: 21px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">一．Debug navigator中的Memory</span></h2><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">此方法是查看内存最简单直接有效的方法，真机调试时，通过Debug navigator中Memory查看app内存，入口如图</span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><img src="面试   网易篇_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" width="546"/><br/></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><br/></div></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">根据这个值查看app内存占用，这个内存是当前app占用的</span><span style="text-indent: 0px; font-size: 20px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 102, 0); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">总内存，是堆栈内存、虚拟内存（OpenGL占用的显存算在虚拟内存中里面）的总和</span><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div><h2 style="padding: 0px; font-size: 21px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">二．Instruments</span></h2><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">启动Instruments的方法是，Product-&gt;Profile，经过漫长的编译时间后，出现Instruments界面，下图</span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><img src="面试   网易篇_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Instruments中，可以分析内存的工具有Activity Monitor，Allocations，Leaks。</span></div><h3 style="padding: 0px; font-size: 16px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">（1）Leaks</span></h3><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Leaks检测内存泄露的工具，很有用。Leaks运行中，看到下面这个红叉叉就表示有内存泄露了</span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><img src="面试   网易篇_files/Image [2].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><h3 style="padding: 0px; font-size: 16px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">（2）Allocations</span></h3><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Allocations是检测堆栈内存的，下面的VM tracker检测虚拟内存。Allocations运行起来如下图</span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><img src="面试   网易篇_files/Image [3].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><br style="padding: 0px;"/></div><div><br/></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Allocations永远比Debug navigator Memory中显示的内存要小，就是因为Allocations中没有统计虚拟内存。</span><span style="font-size: 20px; background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">iOS把OpenGL占用的显存算作虚拟内存的一部</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">分，下图参考自</span></div></div><h1 style="padding: 0px; font-size: 28px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">When is a Leak not a Leak? Using Heapshot Analysis to Find Undesirable Memory Growth</span></h1><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><img src="面试   网易篇_files/Image [4].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">部</span><span style="text-indent: 0px; font-size: 20px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">分malloc出来的内存也算在虚拟</span><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">内存中，下图参考自</span><span style="text-indent: 0px; font-size: 15px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">A look at how malloc works on the Mac</span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><img src="面试   网易篇_files/Image [5].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><h3 style="padding: 0px; font-size: 16px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">（3）Activity monitor</span></h3><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Activity monitor看手机整体内存情况的，这里的显示app内存值和Debug navigator中的Memory显示的值是一样的</span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><img src="面试   网易篇_files/Image [6].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><h2 style="padding: 0px; font-size: 21px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">其他：</span></h2><h2 style="padding: 0px; font-size: 21px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">1. app最多能占用多少内存不闪退</span></h2><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 20px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">占用机器内存的一半左右就会闪退，和系统版本、后台程序数有关</span><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><img src="面试   网易篇_files/Image [7].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">不同渠道对内存有不同的要求，例如如下某渠道</span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><img src="面试   网易篇_files/Image [8].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><h2 style="padding: 0px; font-size: 21px; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">2. iOS app为什么内存没有泄露，内存却降不下来</span></h2><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">eg: 创建大概20个哥布林spine动画，此时内存占用46M，然后释放掉，内存占用竟然还是46M，以为是spine有内存泄露，Leaks检测没有发现内存泄露。反复加载释放20个哥布林，内存都没有超过48M，但是为毛内存没有下降，而是维持在46M左右？</span></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><img src="面试   网易篇_files/Image [9].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">因为（1）</span><span style="font-size: 20px; background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">图片加入了TextureCache，占用了部分内存</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">（2）</span><span style="font-size: 20px; background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">malloc出来的一部分内存算到了VM（虚拟内存）中，为了下次malloc速度更快，这部分内存虽然调用了free，但iOS系统依然没有将其回收</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。这就是上面说的部分malloc出来的内存也算在虚拟内存中。</span></div><div><br/></div></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><br/></div></div><div style="padding: 0px; text-indent: 0px; font-size: 13.92px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">3.用过 TableView 吗，平时怎么解决 TableView 滑动卡顿问题的？</span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">1.最常用的就是cell的重用， 注册重用标识符</span></div><ul><li><span style="font-family: Arial, Helvetica, sans-serif;">如果不重用cell时，每当一个cell显示到屏幕上时，就会重新创建一个新的cell</span></li><li><span style="font-family: Arial, Helvetica, sans-serif;">如果有很多数据的时候，就会堆积很多cell。如果重用cell，为cell创建一个ID</span></li><li><span style="font-family: Arial, Helvetica, sans-serif;">每当需要显示cell 的时候，都会先去缓冲池中寻找可循环利用的cell，如果没有再重新创建cell</span></li></ul><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">2.避免cell的重新布局</span></div><ul><li><span style="font-family: Arial, Helvetica, sans-serif;">cell的布局填充等操作 比较耗时，一般创建时就布局好</span></li><li><span style="font-family: Arial, Helvetica, sans-serif;">如可以将cell单独放到一个自定义类，初始化时就布局好</span></li></ul><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">3.提前计算并缓存cell的属性及内容</span></div><ul><li><span style="font-family: Arial, Helvetica, sans-serif;">当我们创建cell的数据源方法时，编译器并不是先创建cell 再定cell的高度</span></li><li><span style="font-family: Arial, Helvetica, sans-serif;">而是先根据内容一次确定每一个cell的高度，高度确定后，再创建要显示的cell，滚动时，每当cell进入凭虚都会计算高度，提前估算高度告诉编译器，编译器知道高度后，紧接着就会创建cell，这时再调用高度的具体计算方法，这样可以方式浪费时间去计算显示以外的cell</span></li></ul><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">4.减少cell中控件的数量</span></div><ul><li><span style="font-family: Arial, Helvetica, sans-serif;">尽量使cell得布局大致相同，不同风格的cell可以使用不用的重用标识符，初始化时添加控件，</span></li><li><span style="font-family: Arial, Helvetica, sans-serif;">不适用的可以先隐藏</span></li></ul><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">5.不要使用ClearColor，无背景色，透明度也不要设置为0</span></div><ul><li><span style="font-family: Arial, Helvetica, sans-serif;">渲染耗时比较长</span></li></ul><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">6.使用局部更新</span></div><ul><li><span style="font-family: Arial, Helvetica, sans-serif;">如果只是更新某组的话，使用reloadSection进行局部更新</span></li></ul><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">7.加载网络数据，下载图片，使用异步加载，并缓存</span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">8.少使用addView 给cell动态添加view</span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">9.按需加载cell，cell滚动很快时，只加载范围内的cell</span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">10.不要实现无用的代理方法，tableView只遵守两个协议</span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">11.缓存行高：</span><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px;">estimatedHeightForRow不能和HeightForRow里面的layoutIfNeed同时存在，这两者同时存在才会出现“窜动”的bug。所以我的建议是：只要是固定行高就写预估行高来减少行高调用次数提升性能。如果是动态行高就不要写预估方法了，用一个行高的缓存字典来减少代码的调用次数即可</span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px;"> </span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px;">有了上面的问题，我们在优化tableView的时候就能好解决一个卡顿的问题了。</span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px;">在iOS应用中，UITableView应该是使用率最高的视图之一了。iPod、时钟、日历、备忘录、Mail、天气、照片、电话、短信、 Safari、App Store、iTunes、Game Center…几乎所有自带的应用中都能看到它的身影，可见它的重要性。</span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px;">然而在使用第三方应用时，却经常遇到性能上的问题，普遍表现在滚动时比较卡，特别是table cell中包含图片的情况时。</span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px;"> </span><span style="color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px;">实际上只要针对性地优化一下，这种问题就不会有了。有兴趣的可以看看 LazyTableImages这个官方的例子程序，虽然也要从网上下载图片并显示，但滚动时丝毫不卡。</span></div><div style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px;"> </span><span style="color: rgb(63, 63, 63); font-family: Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 30px; font-weight: bold;">4.网络模型了解么？有哪几种？说说你的看法？</span></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">  1、OSI的来源</span></div><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">        OSI（Open System Interconnect），即开放式系统互联。 一般都叫OSI参考模型，是ISO（国际标准化组织）组织在1985年研究的网络互连模型。</span><span style="color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">   </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">   </span></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">ISO为了更好的使网络应用更为普及，推出了OSI参考模型。其含义就是推荐所有公司使用这个规范来控制网络。这样所有公司都有相同的规范，就能互联了。</span></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">2、OSI七层模型的划分</span></div><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">       OSI</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">定义了网络互连的七层框架（物理层、数据链路层、网络层、传输层、会话层、表示层、应用层</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">），即ISO开放互连系统参考模型</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">。如下图。</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">  </span></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;"> </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">每一层实现各自的功能和协议，并完成与相邻层的接口通信。</span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">OSI的服务定义详细说明了各层所提供的服务。某一层的服务就是该层及其下各层的一种能力，它通过接口</span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">提供给更高一层。各层所提供的服务与这些服务是怎么实现的无关。</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">    </span><img src="面试   网易篇_files/Image [10].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"> 3、各层功能定义</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">        这里我们只对OSI各层进行功能上的大概阐述，不详细深究，因为每一层实际都是一个复杂的层。后面我也会根据个人方向展开部分层的深入学习。这里我们就大概了解一下。我们从最顶层——应用层 开始介绍。</span><span style="color: rgb(255, 0, 0); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">整个过程以公司A和公司B的一次商业报价单发送为例子进行讲解。</span></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">&lt;1&gt;</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    应用层</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">OSI参考模型中最靠近用户的一层，是为计算机用户提供应用接口，也为用户直接提供各种网络服务。我们常见应用层的网络服务协议有：HTTP，HTTPS，FTP，POP3、SMTP等。</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">   </span></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><span style="border-width: 0px; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); color: rgb(255, 0, 0); font-family: Simsun; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">实际公司A的老板就是我们所述的用户，而他要发送的商业报价单，就是应用层提供的一种网络服务，当然，老板也可以选择其他服务，比如说，发一份商业合同，发一份询价单，等等。</span></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><br/></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">&lt;2&gt;</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    表示层</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">        表示层提供各种用于应用层数据的编码和转换功能,确保一个系统的应用层发送的数据能被另一个系统的应用层识别。</span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">如果必要，该层可提供一种标准表示形式，用于将计算机内部的多种数据</span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">格式转换成通信</span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">中采用的标准表示形式。数据压缩和加密也是表示层可提供的转换功能之一。</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">   </span></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><span style="border-width: 0px; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); color: rgb(255, 0, 0); font-family: Simsun; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">由于公司A和公司B是不同国家的公司，他们之间的商定统一用英语作为交流的语言，所以此时表示层（公司的文秘），就是将应用层的传递信息转翻译成英语。同时为了防止别的公司看到，公司A的人也会对这份报价单做一些加密的处理。这就是表示的作用，将应用层的数据转换翻译等。</span></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">&lt;3&gt;</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    会话层</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">会话层就是</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">负责建立、管理和终止表示层实体之间的通信会话。该层的通信由不同设备中的应用程序之间的服务请求和响应组成。</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">      </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">  </span><span style="color: rgb(255, 0, 0); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;"> </span></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><span style="border-width: 0px; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); color: rgb(255, 0, 0); font-family: Simsun; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">会话层的同事拿到表示层的同事转换后资料，（会话层的同事类似公司的外联部），会话层的同事那里可能会掌握本公司与其他好多公司的联系方式，这里公司就是实际传递过程中的实体。他们要管理本公司与外界好多公司的联系会话。当接收到表示层的数据后，会话层将会建立并记录本次会话，他首先要找到公司B的地址信息，然后将整份资料放进信封，并写上地址和联系方式。准备将资料寄出。等到确定公司B接收到此份报价单后，此次会话就算结束了，外联部的同事就会终止此次会话。</span></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">&lt;4&gt;</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">   传输层</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    传输层建立了主机端到端</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">的链接，</span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">传输层的作用是为上层协议提供端到端的可靠和透明的数据传输服务，包括处理差错控制和流量控制等问题。该层向高层屏蔽了下层数据通信的细节，使高层用户看到的只是在两个传输实体间的一条主机到主机的、可由用户控制和设定的、可靠的数据通路</span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">。我们通常说的，TCP UDP就是在这一层。端口号既是这里的“端”。</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">   </span><span style="color: rgb(255, 0, 0); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;"> 传输层就相当于公司中的负责快递邮件收发的人，公司自己的投递员，他们负责将上一层的要寄出的资料投递到快递公司或邮局。</span></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">&lt;5&gt;</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">   网络层</span></div><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">       </span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">本层通过IP寻址</span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">来建立两个节点之间的连接，为源端的运输层</span><span style="text-indent: 28px; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">送来的分组，选择合适的路由和交换节点，正确无误地按照地址传送给目的端的运输层。就是通常说的IP层。这一层就是我们经常说的IP协议层。IP协议是Internet的基础。</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">  </span><span style="color: rgb(255, 0, 0); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">  网络层就相当于快递公司庞大的快递网络，全国不同的集散中心，比如说，从深圳发往北京的顺丰快递（陆运为例啊，空运好像直接就飞到北京了），首先要到顺丰的深圳集散中心，从深圳集散中心再送到武汉集散中心，从武汉集散中心再寄到北京顺义集散中心。这个每个集散中心，就相当于网络中的一个IP节点。</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">&lt;6&gt;</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">   数据链路层</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;"> </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">   </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 15px; color: rgb(51, 51, 51); font-family: Simsun; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">  </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">  </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">将比特组合成字节,再将字节组合成帧,使用链路层地址 (以太网使用MAC地址)来访问介质,并进行差错检测。</span></div></div><div style="font-size: 13px; text-indent: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; text-indent: 0px; line-height: 1.6; font-family: 宋体;">     </span><span style="font-size: 13px; text-indent: 0px; line-height: 19.5px;">数据链路层又分为2个子层：逻辑链路控制子层（LLC）和媒体访问控制子层（MAC）。</span></div><div style="font-size: 13px; text-indent: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; text-indent: 0px; line-height: 19.5px;">        MAC子层处理CSMA/CD算法、数据出错校验、成帧等；LLC子层定义了一些字段使上次协议能共享数据链路层。 在实际使用中，LLC子层并非必需的。</span></div><div style="font-size: 13px; text-indent: 0px; margin-top: 1em; margin-bottom: 1em;"><div><span style="font-size: 13px; line-height: 19.5px;">    </span><span style="font-size: 13px; line-height: 1.6;">    这个没找到合适的例子</span></div></div><div style="font-size: 13px; text-indent: 0px; margin-top: 1em; margin-bottom: 1em;"><div><span style="font-size: 13px; line-height: 1.6;">&lt;7&gt;</span><span style="font-size: 13px; line-height: 1.6;">  物理层</span><span style="font-size: 13px; line-height: 1.6;">    </span><span style="font-size: 13px; line-height: 19.5px;"> </span></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; font-size: 14px; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); margin-top: 1em; margin-bottom: 1em;"><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">    实际最终信号的传输是通过物理层实现的。通过物理介质传</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">输比特流。规定了电平、速度和电缆针脚。</span><span style="text-indent: 28px; font-size: 15px; color: rgb(51, 51, 51); font-family: Simsun; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">常用设备有（各种物理设备）集线器、中继器、调制解调器、网线、双绞线、同轴电缆。这些都是物理层的传输介质。</span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">    </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">     </span><span style="color: rgb(255, 0, 0); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">快递寄送过程中的交通工具，就相当于我们的物理层，例如汽车，火车，飞机，船。</span></div><div><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">4、通信特点：对等通信</span><span style="font-size: 15px; color: rgb(51, 51, 51); font-family: Simsun; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.6;">      </span><span style="color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">对等通信，为了使数据分组从源传送到目的地，源端OSI模型的每一层都必须与目的端的对等层进行通信，这种通信方式称为对等层通信。在每一层通信过程中，使用本层自己协议进行通信。</span><img src="面试   网易篇_files/Image [11].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: Simsun; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">5. block本质是什么？</span></div></div><div style="border-width: 0px; padding: 0px; list-style: none outside none; text-indent: 2em; color: rgb(51, 51, 51); font-family: Simsun; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-align: start; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249);-en-paragraph:true;margin-top:1em;margin-bottom:1em;"></div><h1 style="box-sizing: border-box; font-size: 26px;"><span style="box-sizing: border-box; font-size: 14px;">底层实现</span></h1><div style="box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; color: rgb(47, 47, 47);">block是一个指针结构体，在终端下通过clang -rewrite-objc 指令看看C++代码。</span></div><div style="box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; color: rgb(47, 47, 47);">创建一个OS X 工程，写一个最简单的block</span></div><div style="box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;"><div><img src="面试   网易篇_files/Image [12].jpg" type="image/jpeg" data-filename="Image.jpg"/><span style="color: rgb(47, 47, 47);">利用终端编译生成C++代码：</span></div><div><br/></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; color: rgb(47, 47, 47);">clang -rewrite-objc main.m</span></div></div><div><br/></div><div>几个重要的结构体和函数简介：</div><ul><li>__block_impl：这是一个结构体，也是C面向对象的体现，可以理解为block的基类;</li><li>__main_block_impl_0: 可以理解为block变量;</li><li>__main_block_func_0: 可以理解为匿名函数；</li><li>__main_block_desc_0:block的描述, Block_size;</li><li>__main_block_desc_0:block的描述, Block_size;</li></ul><div><span style="font-size: 13px; color: rgb(39, 42, 216); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">1</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">、</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">__block_impl</span></div><div><br/></div><div><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">struct</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> __block_impl {</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">void</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> *isa;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">int</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> Flags;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">int</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> Reserved;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">void</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> *FuncPtr;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">};</span></div><div><br/></div><div><span style="font-size: 13px; color: rgb(39, 42, 216); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">2</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">、</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">__main_block_impl_0</span></div><div><br/></div><div><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">struct</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> __main_block_impl_0 {</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">struct</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> __block_impl impl;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">struct</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> __main_block_desc_0* Desc;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    __main_block_impl_0(</span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">void</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> *fp,</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">                        </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">struct</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> __main_block_desc_0 *desc, </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">int</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> flags=</span><span style="font-size: 13px; color: rgb(39, 42, 216); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">0</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">) {</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">        impl.isa = &amp;_NSConcreteStackBlock;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">        impl.Flags = flags;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">        impl.FuncPtr = fp;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">        Desc = desc;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    }</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">};</span></div><div><br/></div><div><span style="font-size: 13px; color: rgb(39, 42, 216); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">3</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">、</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">__main_block_func_0</span></div><div><br/></div><div><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">static</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">void</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> __main_block_func_0</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">(</span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">struct</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> __main_block_impl_0 *__cself) {</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    NSLog((NSString *)</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">          &amp;__NSConstantStringImpl__var_folders_gc_</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">          </span><span style="font-size: 13px; color: rgb(39, 42, 216); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">5</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">fkhcz0n6px48vzc744hmp6c0000gn_T_main_eef954_mi_0);</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">}</span></div><div><br/></div><div><span style="font-size: 13px; color: rgb(39, 42, 216); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">4</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">、</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> __main_block_desc_0</span></div><div><br/></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">staticstruct __main_block_desc_0 {</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    size_t reserved;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    size_t Block_size;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">} __main_block_desc_0_DATA =</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">{ </span><span style="font-size: 13px; color: rgb(39, 42, 216); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">0</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">, </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">sizeof</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">(</span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">struct</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> __main_block_impl_0)};</span></div><div><br/></div><div><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">int</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> main(</span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">int</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> argc, </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">const</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">char</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> * argv[]) {</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    </span><span style="font-size: 13px; color: rgb(0, 132, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">/* @autoreleasepool */</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    { __AtAutoreleasePool __autoreleasepool;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">        </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">void</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> (*myblock)() = ((</span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">void</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> (*)</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">                              ())&amp;__main_block_impl_0((</span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">void</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> *)__main_block_func_0,</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">                                                      &amp;__main_block_desc_0_DATA));</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">        ((</span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">void</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> (*)(__block_impl *))</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">         ((__block_impl *)myblock)-&gt;FuncPtr)((__block_impl *)myblock);</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    }</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">    </span><span style="font-size: 13px; color: rgb(186, 45, 162); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">return</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;"> </span><span style="font-size: 13px; color: rgb(39, 42, 216); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">0</span><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">;</span></div><div><span style="font-size: 13px; color: rgb(0, 0, 0); font-family: Menlo; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: normal; line-height: normal;">}</span></div><ul><li>注意事项：block容易造成循环引用，在block里面如果使用了self，</li><li>然后形成强引用时，需要打断循环引用</li><li>在MRC下用_block，在ARC下使用__weak;</li></ul><div><br/></div><h1><span style="font-weight: bold;">关于block在内存中的位置</span></h1><h2><span style="font-weight: bold;">深入理解</span></h2><div>block快的存储位置（block入口的地址）可能存放在3个地方：代码区（全局区）、堆区、栈区（ARC情况下回自动拷贝到堆区、因此ARC下只有两个地方：代码区和堆区）。</div><div>    •    </div><div>    •    代码区：不访问栈区的变量（如局部变量），且不访问堆区的变量（如用alloc创建的对象）时，此时block存放在代码区；</div><div>    •    堆区：如果访问了堆区的变量（如局部变量），或堆区的变量（如用alloc创建的对象），此时block存方在堆区；--需要注意</div><div>    ◦    实际是放在栈区，在ARC情况下自动拷贝到堆区，如果不是ARC则存放在栈区，所在函数执行完毕就回释放，想再外面调用需要用copy指向它，这样就拷贝到了堆区，strong属性不会拷贝、会造成野指针错区。（需要理解ARC是一种编译器特性，即编译器在编译时在核实的地方插入retain、release、autorelease，而不是iOS的运行时特性）。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">    ◦    此外代码存在堆区时,需要注意，因为堆区不像代码区不变化，堆区是动态的（不断的创建销毁），当没有强指针指向的时候就会被销毁，如果再去访问这段代码时，程序就会崩溃！所以此种情况在定义block属性时需要指定为strong or copy。block是一段代码，即不可变，所以使用copy也不会深拷贝。</div><div><span style="font-size: 14px; font-weight: bold;">6.KVC机制是如何通过key找到value。</span></div><h4 style="padding: 0px; font-size: 14px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242);"><span style="font-size: 14px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">KVC键值查找</span></h4><h5 style="padding: 0px; font-size: 12px; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242);"><span style="font-size: 12px; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(254, 254, 242); color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">搜索单值成员</span></h5><ul><li><span style="font-size: 13px; text-indent: 0px; color: rgb(0, 0, 0); line-height: 1.5;">setValue:forKey:搜索方式</span><br/><span style="font-size: 13px; text-indent: 0px; color: rgb(0, 0, 0); line-height: 1.5;">1、首先搜索setKey:方法。（key指成员变量名，首字母大写）</span><br/><span style="font-size: 13px; text-indent: 0px; color: rgb(0, 0, 0); line-height: 1.5;">2、上面的setter方法没找到，如果类方法accessInstanceVariablesDirectly返回YES。那么按 _key，_isKey，key，iskey的顺序搜索成员名。（NSKeyValueCodingCatogery中实现的类方法，默认实现为返回YES）</span><br/><span style="font-size: 13px; text-indent: 0px; color: rgb(0, 0, 0); line-height: 1.5;">3、如果没有找到成员变量，调用setValue:forUnderfinedKey:</span></li><li><span style="font-size: 13px; text-indent: 0px; color: rgb(0, 0, 0); line-height: 1.5;">valueForKey:的搜索方式</span><br/><span style="font-size: 13px; text-indent: 0px; color: rgb(0, 0, 0); line-height: 1.5;">1、首先按getKey，key，isKey的顺序查找getter方法，找到直接调用。如果是BOOL、int等内建值类型，会做NSNumber的转换。</span><br/><span style="font-size: 13px; text-indent: 0px; color: rgb(0, 0, 0); line-height: 1.5;">2、上面的getter没找到，查找countOfKey、objectInKeyAtindex、KeyAtindexes格式的方法。如果countOfKey和另外两个方法中的一个找到，那么就会返回一个可以响应NSArray所有方法的代理集合的NSArray消息方法。</span><br/><div><span style="color: rgb(0, 0, 0); font-size: 13px; line-height: 1.5;">3、还没找到，查找countOfKey、enumeratorOfKey、memberOfKey格式的方法。如果这三个方法都找到，那么就返回一个可以响应NSSet所有方法的代理集合。</span></div><div><br/></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(0, 0, 0); font-size: 13px; line-height: 1.5;">4、还是没找到，如果类方法accessInstanceVariablesDirectly返回YES。那么按 _key，_isKey，key，iskey的顺序搜索成员名。</span></div><br/><span style="font-size: 13px; text-indent: 0px; color: rgb(0, 0, 0); line-height: 1.5;">5、再没找到，调用valueForUndefinedKey。</span></li></ul><div><br/></div><div><span style="font-weight: bold;">7.说说你最熟悉的第三方，知晓其原理么？</span></div><div><span style="font-size: 14px; font-weight: bold;">这个网上很多，就不用细细道来了吧！</span></div><div><span style="font-size: 14px; font-weight: bold;">例：SD、YY、MJ等！</span></div><div style="text-align: center;"><img src="面试   网易篇_files/Image.gif" type="image/gif" data-filename="Image.gif"/><br/></div><div><br/></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="text-align: center;"><span style="font-weight: bold;">刷我滴卡~下次面试题见！</span></div><div><br/></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div><br/></div></span>
</div></body></html> 