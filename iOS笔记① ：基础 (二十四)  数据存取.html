<html>
<head>
  <title>iOS笔记① ：基础 (二十四) : 数据存取</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="2D48C36D-F433-45F7-8D31-29BD3881579F"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1997"/>
<h1>iOS笔记① ：基础 (二十四) : 数据存取</h1>

<div>
<span><div style="direction: ltr; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">iOS</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">应用数据存储的常用方式</span></div><div style="direction: ltr; font-size: 21pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">XML</span><span style="direction: ltr; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">属性列表（</span><span style="direction: ltr; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">plist</span><span style="direction: ltr; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">）归档</span></div><div style="direction: ltr; font-size: 21pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Preference(</span><span style="direction: ltr; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">偏好设置</span><span style="direction: ltr; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">)</span></div><div style="direction: ltr; font-size: 21pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSKeyedArchiver</span><span style="direction: ltr; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">归档</span><span style="direction: ltr; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(NSCoding)</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 21pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">SQLite3 </span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 21pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 21.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Core Data</span><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image.png" type="image/png" data-filename="Image.png" style="color: rgb(51, 102, 102); font-family: Calibri; font-size: 21pt;"/><br/></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; background: #FAC08F;">注意</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri; background: #FAC08F;">:</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; background: #FAC08F;">最常用的就是</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri; background: #FAC08F;">D</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri; background: #FAC08F;">o</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri; background: #FAC08F;">cuments,</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; background: #FAC08F;">是有备份的</span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">应用沙盒结构分析</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">应用程序包：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">上图中的</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Layer)</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">包含了所有的资源文件和可执行文件</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;; background: #FAC08F;">Documents</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; background: #FAC08F;">：保存应用运行时生成的</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500; background: #FAC08F;">需要持久化的数据</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; background: #FAC08F;">，</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;; background: #FAC08F;">iTunes</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; background: #FAC08F;">同步设备时</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500; background: #FAC08F;">会备份</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; background: #FAC08F;">该目录。例如，游戏应用可将游戏存档保存在该目录</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">tmp</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：保存应用运行时所需的</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">临时数据</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">，使用完毕后再将相应的文件从该目录删除。应用没有运行时，系统也可能会清除该目录下的文件。</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">iTunes</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">同步设备时</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">不会备份</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">该目录</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">Library/Caches</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：保存应用运行时生成的</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">需要持久化的数据</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">，</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">iTunes</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">同步设备时</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">不会备份</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">该目录。一般存储体积大、不需要备份的非重要数据</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">Library/Preference</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：保存应用的所有</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">偏好设置</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">，</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">iOS</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">的</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Settings(</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">设置</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">)</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">应用会在该目录中查找应用的设置信息。</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">iTunes</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">同步设备时</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">会备份</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">该目录</span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">应用沙盒目录的常见获取方式</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">沙盒根目录：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSString *home =</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">NSHomeDirectory</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">();</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">Documents</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(2</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">种方式</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">)</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">利用沙盒根目录拼接</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">”Documents”</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">字符串</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSString *home = </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSHomeDirectory</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">();</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSString *documents = [home </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">stringByAppendingPathComponent</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">Documents</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">&quot;];</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">不建议采用，因为新版本的操作系统可能会修改目录名</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">利用</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSSearchPathForDirectoriesInDomains</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">函数</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSUserDomainMask</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">代表从用户文件夹下找</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">YES</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">代表展开路径中的波浪字符</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">“~”</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSArray *array =  NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, NO);</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">在</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">iOS</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">中，只有一个目录跟传入的参数匹配，所以这个集合里面只有一个元素</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSString *documents = [array objectAtIndex:0];</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">tmp</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSString *tmp =</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">NSTemporaryDirectory</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">();</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">Library/Caches</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">跟</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Documents</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">类似的</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">2</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">种方法</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">)</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">利用沙盒根目录拼接</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">”Caches”</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">字符串</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">利用</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSSearchPathForDirectoriesInDomains</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">函数</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">将函数的第</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">2</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">个参数改为：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSCachesDirectory</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">即可</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">)</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">Library/Preference</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：通过</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSUserDefaults</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">类存取该目录下的设置信息</span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">属性列表</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">属性列表是一种</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">XML</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">格式的文件，拓展名为</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">plist</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">如果对象是</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSString</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSDictionary</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSArray</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSData</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSNumber</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">等类型，就可以使用</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">writeToFile:atomically:</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">方法直接将对象写到属性列表文件中</span></div><div style="direction: ltr; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">属性列表</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">-</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">归档</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">NSDictionary</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">将一个</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSDictionary</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象归档到一个</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">plist</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">属性列表中</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">将数据封装成字典</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSMutableDictionary *dict = [NSMutableDictionary dictionary];</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">[dict setObject:@&quot;</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">母鸡</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">&quot; forKey:@&quot;name&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[dict setObject:@&quot;15013141314&quot; forKey:@&quot;phone&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[dict setObject:@&quot;27&quot; forKey:@&quot;age&quot;];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">将字典持久化到</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Documents/stu.plist</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">文件中</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[dict </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #FF2500;">writeToFile</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:path atomically:YES]; </span><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [1].png" type="image/png" data-filename="Image.png" style="color: rgb(51, 102, 102); font-size: 21pt;"/><br/></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">用</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">xcode</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">打开属性文件</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [2].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">属性列表</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">-</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">恢复</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">NSDictionary</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">读取属性列表，恢复</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSDictionary</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">读取</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Documents/stu.plist</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">的内容，实例化</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSDictionary</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSDictionary *dict = [NSDictionary </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #FF2500;">dictionaryWithContentsOfFile</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:path];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSLog(@&quot;name:%@&quot;, [dict objectForKey:@&quot;name&quot;]);</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSLog(@&quot;phone:%@&quot;, [dict objectForKey:@&quot;phone&quot;]);</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSLog(@&quot;age:%@&quot;, [dict objectForKey:@&quot;age&quot;]);</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">打印信息如下</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [3].png" type="image/png" data-filename="Image.png"/><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [4].png" type="image/png" data-filename="Image.png" style="color: rgb(51, 102, 102); font-family: Calibri; font-size: 21pt;"/><br/></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [5].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">读取上次保存的设置</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSString *username = [defaults </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">stringForKey</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;username&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">float textSize = [defaults </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">floatForKey</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;text_size&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">BOOL autoLogin = [defaults </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">boolForKey</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;auto_login&quot;];</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">注意：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">UserDefaults</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">设置数据时，不是立即写入，而是根据时间戳定时地把缓存中的数据写入本地磁盘。所以调用了</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">set</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">方法之后数据有可能还没有写入磁盘应用程序就终止了。出现以上问题，可以通过调用</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">synchornize</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">方法强制写入</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[defaults synchornize];</span></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Courier New'; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSKeyedArchiver</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">如果对象是</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSString</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSDictionary</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSArray</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSData</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSNumber</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">等类型，可以直接用</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSKeyedArchiver</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">进行归档和恢复</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">不是所有的对象都可以直接用这种方法进行归档，只有遵守了</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSCoding</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">协议的对象才可以</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSCoding</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">协议有</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">2</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">个方法：</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">encodeWithCoder</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">每次归档对象时，都会调用这个方法。一般在这个方法里面指定如何归档对象中的每个实例变量，可以使用</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">encodeObject:forKey:</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">方法归档实例变量</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">initWithCoder</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">每次从文件中恢复</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">解码</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">)</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象时，都会调用这个方法。一般在这个方法里面指定如何解码文件中的数据为对象的实例变量，可以使用</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">decodeObject:forKey</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">方法解码实例变量</span><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [6].png" type="image/png" data-filename="Image.png" style="color: rgb(51, 102, 102); font-family: 'Courier New'; font-size: 21pt;"/><br/></div><div style="direction: ltr; font-size: 15pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">NSKeyedArchiver-</span><span style="direction: ltr; font-size: 15.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">归档</span><span style="direction: ltr; font-size: 15.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">Person</span><span style="direction: ltr; font-size: 15.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象（</span><span style="direction: ltr; font-size: 15.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">Person.h</span><span style="direction: ltr; font-size: 15.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">）</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">@interface Person : NSObject&lt;</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSCoding</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">&gt;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">@property (nonatomic, copy) NSString *name;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">@property (nonatomic, assign) int age;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">@property (nonatomic, assign) float height;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">@end</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">@implementation Person</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (void)encodeWithCoder:(NSCoder *)encoder {</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    [encoder </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">encodeObject</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:</span><a href="http://self.name" style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">self.name</a><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> forKey:@&quot;name&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    [encoder </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">encodeInt</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:self.age forKey:@&quot;age&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    [encoder </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">encodeFloat</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:self.height forKey:@&quot;height&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (id)initWithCoder:(NSCoder *)decoder {</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><a href="http://self.name" style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">self.name</a><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> = [decoder </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">decodeObjectForKey</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;name&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    self.age = [decoder </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">decodeIntForKey</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;age&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    self.height = [decoder </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">decodeFloatForKey</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;height&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    return self;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (void)dealloc {</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    [super dealloc];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    [_name release];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">@end</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">归档</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">编码</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">)</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Person *person = [[[Person alloc] init] autorelease];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><a href="http://person.name" style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">person.name</a><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> = @&quot;MJ&quot;;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">person.age = 27;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">person.height = 1.83f;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[NSKeyedArchiver archiveRootObject:person toFile:path];</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">恢复</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">解码</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">)</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Person *person = [NSKeyedUnarchiver unarchiveObjectWithFile:path];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">NSKeyedArchiver-</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">归档对象的注意</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">如果父类也遵守了</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSCoding</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">协议，请注意：</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">应该在</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">encodeWithCoder:</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">方法中加上一句</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">[super encodeWithCode:encode];</span></div><div style="direction: ltr; font-family: SimSun; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">确保继承的实例变量也能被编码，即也能被归档</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">应该在</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">initWithCoder:</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">方法中加上一句</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">self = [super initWithCoder:decoder];</span></div><div style="direction: ltr; font-family: SimSun; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">确保继承的实例变量也能被解码，即也能被恢复</span><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [7].png" type="image/png" data-filename="Image.png" style="color: rgb(51, 102, 102); font-family: Calibri; font-size: 21pt;"/><br/></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Courier New'; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSData-</span><span style="direction: ltr; font-family: SimSun; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">归档</span><span style="direction: ltr; font-family: 'Courier New'; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">2</span><span style="direction: ltr; font-family: SimSun; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">个</span><span style="direction: ltr; font-family: 'Courier New'; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">Person</span><span style="direction: ltr; font-family: SimSun; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">对象到同一文件中</span></div><div style="direction: ltr; font-family: SimSun; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">归档（编码）</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">新建一块可变数据区</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSMutableData</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *data = [</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSMutableData</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> data];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">将数据区连接到一个</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSKeyedArchiver</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSKeyedArchiver</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *archiver = [[[</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSKeyedArchiver</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> alloc] </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">initForWritingWithMutableData</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:data] autorelease];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">开始存档对象，存档的数据都会存储到</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSMutableData</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">中</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[archiver </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">encodeObject</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:person1 forKey:@&quot;person1&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[archiver </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">encodeObject</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:person2 forKey:@&quot;person2&quot;];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">存档完毕</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">一定要调用这个方法</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">)</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[archiver </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">finishEncoding</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">将存档的数据写入文件</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[data </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">writeToFile</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:path atomically:YES]; </span></div><div style="direction: ltr; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">NSData-</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">从同一文件中恢复</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">2</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">个</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">Person</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象</span></div><div style="direction: ltr; font-family: SimSun; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">恢复（解码）</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">从文件中读取数据</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSData *data = [NSData </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">dataWithContentsOfFile</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:path];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">根据数据，解析成一个</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSKeyedUnarchiver</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSKeyedUnarchiver</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *unarchiver = [[</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSKeyedUnarchiver</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> alloc] </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">initForReadingWithData</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:data];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Person *person1 = [unarchiver </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">decodeObjectForKey</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;person1&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Person *person2 = [unarchiver </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">decodeObjectForKey</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;person2&quot;];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">恢复完毕</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[unarchiver </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">finishDecoding</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [8].png" type="image/png" data-filename="Image.png" style="color: rgb(51, 102, 102); font-family: Calibri; font-size: 21pt;"/><br/></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; font-size: 20pt; font-weight: bold; color: rgb(51, 102, 102);">数据存储</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #0433FF;">-</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;; color: #0433FF;">数据存储</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">1.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #0433FF;">plist</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;; color: #0433FF;">存储</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1.plist</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">存储</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">生成一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">plist</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">文件</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">.</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2.plist</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">不是数组就是字典</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">,plist</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">存储就是用来存储字典或者数组</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">.</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">注意</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:Plist</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">不能存储自定义对象</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">获取应用沙盒中</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Caches</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">文件路径</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">directory:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">获取哪个文件夹</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">domainMask:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">在哪个范围内搜索</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">,NSUserDomainMask:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">表示在用户的手机上查找</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">expandTilde:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">是否展开全路径</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">YES:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">表示展开全路径</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NO:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">不会展开全路径</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">,</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">会把应用沙盒的路径用波浪号</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">(~)</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">代替</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">获取到</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Caches</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">文件夹路径</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSString *cachePath = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">YES</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)[0];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">4.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">读取</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">plist,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">之前是什么类型存储的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">读取也是什么</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">2.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;; color: #0433FF;">偏好设置存储</span><span style="direction: ltr; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">偏好设置存储</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:NSUserDefaults</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">以字典的形式进行偏好设置</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">,</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">用法跟字典</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">.</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">偏好设置好处</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:  1.</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">不需要关心文件名</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">              2.</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">快速进行键值对存储</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">              3.</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">直接存储基本数据类型</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">3.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;; color: #0433FF;">归档</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1.NSKeyedArchiver</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">专门用来做自定义对象归档</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(0, 143, 0);"> </span><span style="direction: ltr; font-family: 'Heiti SC Light'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(0, 143, 0);">什么时候调用</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(0, 143, 0);">:</span><span style="direction: ltr; font-family: 'Heiti SC Light'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(0, 143, 0);">当一个对象要归档的时候就会调用这个方法归档</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">作用</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">告诉苹果当前对象中哪些属性需要归档</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">void</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)encodeWithCoder:(NSCoder *)aCoder</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">{</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    [aCoder encodeObject:_name forKey:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #B4261A;">@&quot;name&quot;</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    [aCoder encodeInt:_age forKey:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #B4261A;">@&quot;age&quot;</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">什么时候调用</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">当一个对象要解档的时候就会调用这个方法解档</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">作用</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">告诉苹果当前对象中哪些属性需要解档</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">initWithCoder</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">什么时候调用</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">只要解析一个文件的时候就会调用</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">id</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)initWithCoder:(NSCoder *)aDecoder</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">{</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(4, 51, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">#warning  [super initWithCoder]</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">if</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> (</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> = [</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">super</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> init]) {</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">       </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;; color: #008F00;">解档</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">       </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;; color: #008F00;">注意一定要记得给成员属性赋值</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        _name = [aDecoder decodeObjectForKey:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #B4261A;">@&quot;name&quot;</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        _age = [aDecoder decodeIntForKey:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #B4261A;">@&quot;age&quot;</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    }</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">   </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">return self</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">;</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [9].png" type="image/png" data-filename="Image.png" style="font-size: 21pt;"/><br/></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">创建、打开、关闭数据库</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">创建或打开数据库</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">path</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">为：</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">~/Documents/person.db</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *db;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">int result = </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_open</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">([path UTF8String], &amp;db); </span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">代码解析：</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite3_open()</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">将根据文件路径打开数据库，如果不存在，则会创建一个新的数据库。如果</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">result</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">等于常量</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">SQLITE_OK</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">，则表示成功打开数据库</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite3 *db</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：一个打开的数据库实例</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">数据库文件的路径必须以</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">C</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">字符串</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">而非</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSString)</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">传入</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">关闭数据库：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">sqlite3_close</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(db);</span></div><div style="direction: ltr; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">执行不返回数据的</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">SQL</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">语句</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">执行创表语句</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">char *errorMsg; </span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #018000;">用来存储错误信息</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">char *sql = &quot;create table if not exists t_person(id integer primary key autoincrement, name text, age integer);&quot;;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">int result = </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_exec</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(db, sql, NULL, NULL, &amp;errorMsg);</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">代码解析：</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite3_exec()</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">可以执行任何</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">SQL</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">语句，比如创表、更新、插入和删除操作。但是一般不用它执行查询语句，因为它不会返回查询到的数据</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite3_exec()</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">还可以执行的语句：</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">开启事务：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">begin transaction;</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">回滚事务：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">rollback;</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">提交事务：</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">commit;</span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">带占位符插入数据</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">char *sql = &quot;insert into t_person(name, age) values(?, ?);&quot;;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_stmt</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *stmt;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">if (</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_prepare_v2</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(db, sql, -1, &amp;stmt, NULL) == </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">SQLITE_OK</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">) {</span></div><div style="direction: ltr; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">   </span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">sqlite3_bind_text</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(stmt, 1, &quot;</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">母鸡</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">&quot;, -1, NULL);</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_bind_int</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(stmt, 2, 27);</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">if (</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_step</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(stmt) != </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">SQLITE_DONE</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">) {</span></div><div style="direction: ltr; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">    NSLog(@&quot;</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">插入数据错误</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">&quot;);</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_finalize</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(stmt);</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: SimSun; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">代码解析：</span></div><div style="direction: ltr; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite3_prepare_v2()</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">返回值等于</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">SQLITE_OK</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">，说明</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">SQL</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">语句已经准备成功，没有语法问题</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite3_bind_text()</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：大部分绑定函数都只有</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">3</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">个参数</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">第</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">1</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">个参数是</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite3_stmt *</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">类型</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: black;">第</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;; color: black;">2</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: black;">个参数指占位符的位置，</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">第一个占位符的位置是</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;; color: #FF2500;">1</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">，不是</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;; color: #FF2500;">0</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">第</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">3</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">个参数指占位符要绑定的值</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">第</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">4</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">个参数指在第</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">3</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">个参数中所传递数据的长度，对于</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">C</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">字符串，可以传递</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">-1</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">代替字符串的长度</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">第</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">5</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">个参数是一个可选的函数回调，一般用于在语句执行后完成内存清理工作</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite_step()</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：执行</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">SQL</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">语句，返回</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">SQLITE_DONE</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">代表成功执行完毕</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite_finalize()</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">：销毁</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite3_stmt *</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象</span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">查询数据</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">char *sql = &quot;select id,name,age from t_person;&quot;;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_stmt</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *stmt;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">if (</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_prepare_v2</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(db, sql, -1, &amp;stmt, NULL) == </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">SQLITE_OK</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">) {</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    while (</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_step</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(stmt) == </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">SQLITE_ROW</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">) {</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        int _id = </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_column_int</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(stmt, </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">0</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">);</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        char *_name = (char *)</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_column_text</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(stmt, </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">1</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">);</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        NSString *name = [NSString </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">stringWithUTF8String</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:_name];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        int _age = </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_column_int</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(stmt, </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">2</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">);</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        NSLog(@&quot;id=%i, name=%@, age=%i&quot;, _id, name, _age);</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    }</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sqlite3_finalize</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(stmt);</span></div><div style="direction: ltr; font-family: SimSun; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">代码解析</span></div><div style="direction: ltr; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite3_step()</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">返回</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">SQLITE_ROW</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">代表遍历到一条新记录</span></div><div style="direction: ltr; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">sqlite3_column_*()</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">用于获取每个字段对应的值，</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">第</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;; color: #FF2500;">2</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">个参数是字段的索引，从</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;; color: #FF2500;">0</span><span style="direction: ltr; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #FF2500;">开始</span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [10].png" type="image/png" data-filename="Image.png"/><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [11].png" type="image/png" data-filename="Image.png" style="font-family: Calibri; font-size: 21pt;"/><br/></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [12].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [13].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Calibri; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [14].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Calibri; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [15].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [16].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Calibri; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">搭建</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">Core Data</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">上下文环境</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">从应用程序包中加载模型文件</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSManagedObjectModel</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *model = [NSManagedObjectModel </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">mergedModelFromBundles</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:nil];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">传入模型，初始化</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">NSPersistentStoreCoordinator</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSPersistentStoreCoordinator</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *psc = [[[NSPersistentStoreCoordinator alloc] </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">initWithManagedObjectModel</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:model] autorelease];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">构建</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">SQLite</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">文件路径</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSString *docs = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSURL *url = [NSURL </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">fileURLWithPath</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:[docs stringByAppendingPathComponent:@&quot;person.data&quot;]];</span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">搭建</span><span style="direction: ltr; font-family: 'Courier New'; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">Core Data</span><span style="direction: ltr; font-family: SimSun; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">上下文环境</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">添加持久化存储库，这里使用</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">SQLite</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">作为存储库</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSError *error = nil;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSPersistentStore *store = [psc </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">addPersistentStoreWithType:NSSQLiteStoreType</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> configuration:nil URL:</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">url</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> options:nil error:&amp;error];</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">if (store == nil) {</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #018000;">直接抛异常</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">    [</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">NSException</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">raise:@&quot;</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">添加数据库错误</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">&quot; format:@&quot;%@&quot;, [error localizedDescription]];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">初始化上下文，设置</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">persistentStoreCoordinator</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">属性</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSManagedObjectContext</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *context = [[NSManagedObjectContext alloc] init];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">context.persistentStoreCoordinator = psc;</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">用完之后，还是要</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">[context release];</span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">添加数据</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">传入上下文，创建一个</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Person</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">实体对象</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSManagedObject</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *person = [</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSEntityDescription insertNewObjectForEntityForName</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #FF2500;">Person</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">&quot; </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">inManagedObjectContext</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:context];</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">设置简单属性</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[person setValue:@&quot;MJ&quot; forKey:@&quot;name&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[person setValue:[NSNumber numberWithInt:27] forKey:@&quot;age&quot;];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">传入上下文，创建一个</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Card</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">实体对象</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSManagedObject</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *card = [</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSEntityDescription insertNewObjectForEntityForName</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #FF2500;">Card</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">&quot; </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">inManagedObjectContext</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:context];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[card setValue:@&quot;4414241933432&quot; forKey:@&quot;no&quot;];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">设置</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Person</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">和</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Card</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">之间的关联关系</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[person setValue:card forKey:@&quot;card&quot;];</span><span style="direction: ltr; font-family: SimSun; font-size: 21pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(51, 102, 102);"> </span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">利用上下文对象，将数据同步到持久化存储库</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSError *error = nil;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">BOOL success = [</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">context save</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:&amp;error];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">if (!success) {</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">    [NSException raise:@&quot;</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">访问数据库错误</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">&quot; format:@&quot;%@&quot;, [error localizedDescription]];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(1, 128, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">如果是想做更新操作：只要在更改了实体对象的属性后调用</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">[</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">context save</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">:&amp;error]</span><span style="direction: ltr; font-size: 13.5pt; color: #018000; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">，就能将更改的数据同步到数据库</span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">查询数据</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">初始化一个查询请求</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSFetchRequest</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *request = [[[</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSFetchRequest</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> alloc] init] autorelease];</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">设置要查询的实体</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSEntityDescription</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *desc = [</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSEntityDescription entityForName</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #FF2500;">Person</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">&quot; </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">inManagedObjectContext</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:context];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">设置排序（按照</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">age</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">降序）</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSSortDescriptor</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *sort = [NSSortDescriptor </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">sortDescriptorWithKey</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;age&quot; ascending:</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NO</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">request.sortDescriptors = [NSArray arrayWithObject:sort];</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">设置条件过滤</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">(</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">name like '%Itcast-1%'</span><span style="direction: ltr; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">)</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSPredicate</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *predicate = [NSPredicate </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">predicateWithFormat</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;name like %@&quot;, @&quot;</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #FF2500;">*</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Itcast-1</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #FF2500;">*</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">&quot;];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">request.predicate = predicate;</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">执行请求</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSError *error = nil;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSArray *objs = [context </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">executeFetchRequest</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:request error:&amp;error];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">if (error) {</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">    [NSException raise:@&quot;</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">查询错误</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">&quot; format:@&quot;%@&quot;, [error localizedDescription]];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">遍历数据</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">for (</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSManagedObject</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *obj in objs) {</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    NSLog(@&quot;name=%@&quot;, [obj </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">valueForKey</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;name&quot;]</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: SimSun; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">删除数据</span></div><div style="direction: ltr; font-family: SimSun; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">传入需要删除的实体对象</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[context </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">deleteObject</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:managedObject];</span></div><div style="direction: ltr; font-family: SimSun; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">将结果同步到数据库</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSError *error = nil;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">context save</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:&amp;error];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">if (error) {</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">    [NSException raise:@&quot;</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">删除错误</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">&quot; format:@&quot;%@&quot;, [error localizedDescription]];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [17].png" type="image/png" data-filename="Image.png" style="color: rgb(51, 102, 102); font-family: SimSun; font-size: 21pt;"/><br/></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Courier New'; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">Core Data</span><span style="direction: ltr; font-family: SimSun; font-size: 21pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">的延迟加载</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Core Data</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">不会根据实体中的关联关系立即获取相应的关联对象</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">比如通过</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Core Data</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">取出</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Person</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">实体时，并不会立即查询相关联的</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Card</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">实体；当应用真的需要使用</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Card</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">时，才会查询数据库，加载</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Card</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">实体的信息</span></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [18].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: Calibri; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [19].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记① ：基础 (二十四)  数据存取_files/Image [20].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">创建</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Courier New&quot;;">NSManagedObject</span><span style="direction: ltr; font-size: 21.0pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">的子类</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">那么生成一个</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Courier New&quot;;">Person</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">实体对象就应该这样写</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">Person</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *person = [</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSEntityDescription insertNewObjectForEntityForName</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@&quot;</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #FF2500;">Person</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">&quot; </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">inManagedObjectContext</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:context];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><a href="http://person.name" style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">person.name</a><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> = @&quot;MJ&quot;;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">person.age = [NSNumber numberWithInt:27];</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">Card</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *card = [</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">NSEntityDescription insertNewObjectForEntityForName</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:@”</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #FF2500;">Card</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">&quot; </span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">inManagedObjectContext</span><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:context];</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><a href="http://card.no" style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">card.no</a><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> = @”4414245465656&quot;;</span></div><div style="direction: ltr; font-family: 'Courier New'; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Courier New&quot;; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">person.card = card;</span></div><div style="direction: ltr; font-size: 21pt; color: rgb(51, 102, 102); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 18pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">.</span><span style="direction: ltr; font-size: 18pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: 'Heiti SC Light';">数据存储</span><span style="direction: ltr; font-size: 18pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">(</span><span style="direction: ltr; font-size: 18pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: 'Heiti SC Light';">数据持久化</span><span style="direction: ltr; font-size: 18pt; color: #336666; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">)</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">介绍</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">iOS</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">数据存储的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">5</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">种方式</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">介绍应用沙盒</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">(</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">应用程序的文件夹</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">)</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">如何找到应用沙盒的路径？首先需要显示隐藏文件。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">点击前往</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">-&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">个人</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">-&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">资源库</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">-&gt;Application Support-&gt;iPhone Simulator-&gt;7.1-&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">里面全是应用沙盒</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">应用沙盒怎么多文件夹保存，在哪个文件夹。介绍沙盒里的每一个文件夹。</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 18pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 18.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">.plist</span><span style="direction: ltr; font-size: 18.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">存储</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">把一些系统自带的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">OC</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">对象生成</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">pilst</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">文件存储起来。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">了解数据存储：数据存储一般有两个操作，一个存，一个取。拖两个按钮，一个用来存，一个用来取</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2&gt; plist</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">存储原理：</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">只要有</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">writeToFile</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">的对象，就能进行</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">plist</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">存储，调用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">writeToFile</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">就能自动生成</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">plist</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">格式的文件。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">一般常用的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Foundation</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">对象都有这个方法，数组，字典，字符串等</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">如何写入到沙盒，需要获取沙盒路径。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">获取</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Documents</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">路径</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">拼接文件名，因为数据是写入到文件中，不是写入到文件夹中。路径之间通过</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">/</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">分开的，为了避免自己写</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">/</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">，会用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">stringByAppendingPathCompent</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">，自动在文件夹与文件之间添加</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">/</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">4&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">如何读取，存储是什么类型存储，读取出来也是什么类型，直接用存储的类型，解析文件就好，用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">ContentsOfFile</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">解析。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">5&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">注意</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">plist</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">存储，不能存储自定义对象，会失败的。</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 18pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 18.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 18.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">偏好设置</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">什么是偏好设置存储：就是保存一些基本的信息，账号，密码，状态。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">偏好设置原理：不需要关心文件名，直接通过</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSUserDefaults</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">操作，默认就存到偏好设置里面了。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">通过</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSUserDefaults</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">就能直接访问软件的偏好设置</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">(Library/Preferences)</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">怎么利用偏好设置存储</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">?</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">利用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSUserDefaults</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">调用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">setObject:forKey</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">存储。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">偏好设置底层实现原理：底层其实就是利用一个字典，存储一些键值对。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">偏好设置好处：能快速存储一些键值对，如果用字典去存储，还需要获取文件名比较麻烦。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">偏好设置坏处：不能及时存储，需要做同步操作，把内存中的数据同步到硬盘上。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">4&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">怎么利用偏好设置读取</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">?</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">和字典一样，根据刚刚存储的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Key</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">读取。</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 18pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 18.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">自定义对象归档</span><span style="direction: ltr; font-size: 18.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">(</span><span style="direction: ltr; font-size: 18.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">归档：数据存储</span><span style="direction: ltr; font-size: 18.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">)</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">自定义对象如何归档：用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSKeyedArchiver,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">调用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">archiveRootObject:toFile:</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">方法，需要传一个对象，自定义一个对象，传进去。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">• </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">会报错</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">说对象没有</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">encodeWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">方法，说明归档的时候默认会调用这个方法，去实现这个方法。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">默认打不出</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">encodeWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">，必须遵守</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSCoding</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">协议才能实现这个方法。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">• encodeWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">什么时候调用：对象归档时候调用</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">• encodeWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">作用：告诉系统对象里的哪些属性需要归档，怎么去归档，根据一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">key</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">去归档，目的就是以后取的时候，也根据这个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">key</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">去取数据。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2&gt;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">自定义对象如何解档</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSKeyedUnarchiver,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">调用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">unarchiveObjectWithFile</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">方法，需要传一个文件名。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">会报错</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">说对象没有</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">initWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">方法，说明解档的时候默认会调用这个方法，去实现这个方法。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">• initWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">什么时候调用：对象解档时候调用</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">• initWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">作用：告诉系统对象里的哪些属性需要解档，怎么去解档，根据之前存储的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">key</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">去解档</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">• initWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">是一个初始化方法，需要先初始化父类的，但是不能调用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">[</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #0433FF;">super</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">initWithCoder:],</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">因为父类</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSObject</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">没有遵守</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSCoding</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">协议。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3&gt; initWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">什么时候需要调用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">[</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #0433FF;">super</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">initWithCoder:]</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">• initWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">原理</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">只要解析文件就会调用，</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">xib,storyboard</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">都是文件，因此只要解析这两个文件，就会调用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">initWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">•</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">因此如果在</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">storyboard</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">使用自定义</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">view,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">重写</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">initWithCoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">方法，一定要调用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">[</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #0433FF;">super</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">initWithCoder:]</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">，因为只有系统才知道怎么解析</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">storyboard</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Heiti SC Light&quot;;">，如果没有调用，就解析不了这个文件。</span></div><div><br/></div><div><span style="direction: ltr; font-size: 9pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); font-family: SimSun; font-weight: bold;">笔记整理：Edison</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 9pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; color: rgb(79, 129, 189);">联系方式：QQ：277593 （笔记意见建议可加此Q，专人更新此笔记）；</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 9pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189);"> </span></div><div><span style="direction: ltr; font-size: 9pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: rgb(79, 129, 189); font-weight: bold;">注：小道途径获取到的笔记，无法自动更新，请谅解！(笔记平均每月更新一次，祝各位都能拿到心仪的offer)</span><span style="direction: ltr; font-size: 9pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); font-family: SimSun;"> </span></div></span>
</div></body></html> 