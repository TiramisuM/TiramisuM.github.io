<html>
<head>
  <title>iOS笔记②  : 重点  (三十一) : 蓝牙/传感器</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="D7298CDC-990D-4EC5-83E6-384E6D9E34FD"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1520"/>
<h1>iOS笔记②  : 重点  (三十一) : 蓝牙/传感器</h1>

<div>
<span><div style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">iOS</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">中蓝牙的实现方案</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 12.0pt;">iOS</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">中提供了</span><span style="font-family: Helvetica; font-size: 12.0pt;">4</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">个框架用于实现蓝牙连接</span></li><li style="color: #C41B17;"><span style="font-family: Menlo; font-size: 12.0pt; color: #C41B17;">GameKit.framework</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #FF2500;">（用法简单）</span></li><li style="color: #0433FF;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">只能用于</span><span style="font-family: Helvetica; font-size: 12.0pt; color: #0433FF;">iOS</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">设备之间的连接</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #595959;">，多用于游戏（比如五子棋对战），</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">从</span><span style="font-family: Helvetica; font-size: 12.0pt; color: #0433FF;">iOS7</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">开始过期</span></li><li style="color: #C41B17;"><span style="font-family: Menlo; font-size: 12.0pt;">MultipeerConnectivity.framework</span></li><li style="color: #0433FF;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">只能用于</span><span style="font-family: Helvetica; font-size: 12.0pt; color: #0433FF;">iOS</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">设备之间的连接</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #595959;">，</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">从</span><span style="font-family: Helvetica; font-size: 12.0pt; color: #0433FF;">iOS7</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">开始引入</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #595959;">，主要用于文件共享（仅限于沙盒的文件）</span></li><li style="color: #C41B17;"><span style="font-family: Menlo; font-size: 12.0pt;">ExternalAccessory.framework</span></li><li style="color: #0433FF;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">可用于第三方蓝牙设备交互</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #595959;">，但是蓝牙设备必须经过</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">苹果</span><span style="font-family: Helvetica; font-size: 12.0pt; color: #0433FF;">MFi</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">认证</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #595959;">（国内较少）</span></li><li style="color: #FF2500;"><span style="font-family: Menlo; font-size: 12.0pt;">CoreBluetooth.framework</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">（时下热门）</span></li><li style="color: #0433FF;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #0433FF;">可用于第三方蓝牙设备交互</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #595959;">，必须要支持蓝牙</span><span style="font-family: Helvetica; font-size: 12.0pt; color: #595959;">4.0</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">硬件至少是</span><span style="font-family: Helvetica; font-size: 12.0pt;">4s</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">，系统至少是</span><span style="font-family: Helvetica; font-size: 12.0pt;">iOS6</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">蓝牙</span><span style="font-family: Helvetica; font-size: 12.0pt;">4.0</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">以低功耗著称，一般也叫</span><span style="font-family: Helvetica; font-size: 12.0pt;">BLE</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">（</span><span style="font-family: Helvetica; font-size: 12.0pt;">Bluetooth Low Energy</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">）</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">目前应用比较多的案例：运动手坏、嵌入式设备、智能家居</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">GameKit</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的蓝牙开发步骤</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">显示可以连接的蓝牙设备列表</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">GKPeerPickerController</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">*ppc = [[</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">GKPeerPickerController</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">alloc</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">]</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">init</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">ppc.</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">delegate</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> = </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">self</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">;</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[ppc </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">show</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">在代理方法中监控蓝牙的连接</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">void</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)peerPickerController:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">GKPeerPickerController</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)picker didConnectPeer:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSString</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)peerID toSession:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">GKSession</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)session {</span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">   </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">NSLog</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">(</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #C41B17;">@&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;STHeiti Light&quot;; color: #C41B17;">连接到设备：</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #C41B17;">%@&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">, peerID);</span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;STHeiti Light&quot;; color: #007400;">关闭蓝牙设备显示界面</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    [picker </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">dismiss</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;STHeiti Light&quot;; color: #007400;">设置接收到蓝牙数据后的监听器</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">    [session</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">setDataReceiveHandler</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">self</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">withContext</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">nil</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;STHeiti Light&quot;; color: #007400;">保存</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400;">session</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">self</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">.</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">session</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> = session;</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">GameKit</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的蓝牙开发步骤</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">处理接收到的蓝牙数据</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">void</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">) receiveData:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSData</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)data fromPeer:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSString</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)peer inSession: (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">GKSession</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)session context:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">void</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)context {</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #595959;">利用</span><span style="font-family: Menlo; font-size: 12.0pt; color: #5C2699;">GKSession</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt; color: #595959;">给其他设备发送数据</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">给指定的连接设备发送数据</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">BOOL</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)sendData:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSData</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *) data toPeers:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSArray</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)peers withDataMode:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">GKSendDataMode</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)mode error:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSError</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> **)error;</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 12.0pt;">给所有连接的设备发送数据</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">BOOL</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)sendDataToAllPeers:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSData</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *) data withDataMode:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">GKSendDataMode</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)mode error:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSError</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> **)error;</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">GameKit</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的蓝牙开发注意</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">只能用于</span><span style="font-family: Helvetica; font-size: 13.5pt;">iOS</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">设备之间的连接</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">只能用于同一个应用程序之间的连接</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">最好别利用蓝牙发送比较大的数据</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Core Bluetooth</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">Core Bluetooth</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">测试比较麻烦，正常情况下，得至少有</span><span style="font-family: Helvetica; font-size: 13.5pt;">2</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">台真实的蓝牙</span><span style="font-family: Helvetica; font-size: 13.5pt;">4.0</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">设备</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">如何让</span><span style="font-family: Helvetica; font-size: 13.5pt;">iOS</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">模拟器也能测试蓝牙</span><span style="font-family: Helvetica; font-size: 13.5pt;">4.0</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">程序？</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">买一个</span><span style="font-family: Helvetica; font-size: 13.5pt;">CSR</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">蓝牙</span><span style="font-family: Helvetica; font-size: 13.5pt;">4.0 USB</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">适配器，插在</span><span style="font-family: Helvetica; font-size: 13.5pt;">Mac</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">上</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">在终端输入</span><span style="font-family: Helvetica; font-size: 13.5pt;">sudo nvram bluetoothHostControllerSwitchBehavior=&quot;never&quot;</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">重启</span><span style="font-family: Helvetica; font-size: 13.5pt;">Mac</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">用</span><span style="font-family: Helvetica; font-size: 13.5pt;">Xcode 4.6</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">调试代码，将程序跑在</span><span style="font-family: Helvetica; font-size: 13.5pt;">iOS 6.1</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">的模拟器上</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-size: 13.5pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 13.5pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;STHeiti Light&quot;;">（苹果把</span><span style="direction: ltr; unicode-bidi: embed; font-size: 13.5pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">iOS 7.0</span><span style="direction: ltr; unicode-bidi: embed; font-size: 13.5pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;STHeiti Light&quot;;">模拟器对</span><span style="direction: ltr; unicode-bidi: embed; font-size: 13.5pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">BLE</span><span style="direction: ltr; unicode-bidi: embed; font-size: 13.5pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;STHeiti Light&quot;;">的支持移除掉了）</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">Core Bluetooth</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">的使用场景</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">运动手环、智能家居、嵌入式设备等等（金融刷卡器、心电测量器）</span></li></ul><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image.png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Core Bluetooth</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的基本常识</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">每个蓝牙</span><span style="font-family: Helvetica; font-size: 13.5pt;">4.0</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">设备都是通过服务（</span><span style="font-family: Helvetica; font-size: 13.5pt;">Service</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">）和特征（</span><span style="font-family: Helvetica; font-size: 13.5pt;">Characteristic</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">）来展示自己的</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">一个设备必然包含一个或多个服务，每个服务下面又包含若干个特征</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">特征是与外界交互的最小单位</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">比如说，一台蓝牙</span><span style="font-family: Helvetica; font-size: 13.5pt;">4.0</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">设备，用特征</span><span style="font-family: Helvetica; font-size: 13.5pt;">A</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">来描述自己的出厂信息，用特征</span><span style="font-family: Helvetica; font-size: 13.5pt;">B</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">来收发数据</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">服务和特征都是用</span><span style="font-family: Helvetica; font-size: 13.5pt;">UUID</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">来唯一标识的，通过</span><span style="font-family: Helvetica; font-size: 13.5pt;">UUID</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">就能区别不同的服务和特征</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">设备里面各个服务</span><span style="font-family: Helvetica; font-size: 13.5pt;">(service)</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">和特征</span><span style="font-family: Helvetica; font-size: 13.5pt;">(characteristic)</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">的功能，均由蓝牙设备硬件厂商提供，比如哪些是用来交互</span><span style="font-family: Helvetica; font-size: 13.5pt;">(</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">读写</span><span style="font-family: Helvetica; font-size: 13.5pt;">)</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">，哪些可获取模块信息</span><span style="font-family: Helvetica; font-size: 13.5pt;">(</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">只读</span><span style="font-family: Helvetica; font-size: 13.5pt;">)</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">等</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Core Bluetooth</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的开发步骤</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">建立中心设备</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">扫描外设（</span><span style="font-family: Helvetica; font-size: 13.5pt;">Discover Peripheral</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">）</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">连接外设</span><span style="font-family: Helvetica; font-size: 13.5pt;">(Connect Peripheral)</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">扫描外设中的服务和特征</span><span style="font-family: Helvetica; font-size: 13.5pt;">(Discover Services And Characteristics)</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">利用特征与外设做数据交互</span><span style="font-family: Helvetica; font-size: 13.5pt;">(Explore And Interact)</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">断开连接</span><span style="font-family: Helvetica; font-size: 13.5pt;">(Disconnect)</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">蓝牙的现状</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">绝大多数智能手机支持蓝牙</span> <span style="font-family: Helvetica; font-size: 13.5pt;">4.0</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">（</span><span style="font-family: Helvetica; font-size: 13.5pt;">BLE</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">）</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">蓝牙芯片发展迅速，在性能和效率方面都有很大提高，且不断变得更小更便宜</span></li><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">iBeacon +</span> <span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">蓝牙，前景一片光明</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">应用之一：室内导航</span></li><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">Estimote</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">公司为</span><span style="font-family: Helvetica; font-size: 13.5pt;">iBeacon</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">提供基站</span></li><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">3</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">个</span><span style="font-family: Helvetica; font-size: 13.5pt;">iBeacon</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">基站的预购价格为</span><span style="font-family: Helvetica; font-size: 13.5pt;">99</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">美元（约合人民币</span><span style="font-family: Helvetica; font-size: 13.5pt;">610</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">元）</span></li><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">Estimote</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">公司推出的</span><span style="font-family: Helvetica; font-size: 13.5pt;">iBeacon</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">基站的最远传输距离为</span><span style="font-family: Helvetica; font-size: 13.5pt;">50m</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">，但是他们推荐在</span><span style="font-family: Helvetica; font-size: 13.5pt;">10m</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">范围内的使用效果最好</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">一块纽扣电池就能为一个</span><span style="font-family: Helvetica; font-size: 13.5pt;">iBeacon</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">基站提供长达</span> <span style="font-family: Helvetica; font-size: 13.5pt;">2</span> <span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">年的使用寿命，而且是在设备不断对外发射信号的情况下</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">蓝牙通讯</span><span style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:</span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">GameKit</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">框架简介</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">使用</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #FF2500;">GameKit</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #FF2500;">框架</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">，可以在游戏中增加</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #800D00;">对等连接</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">，又称</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #800D00;">对端连接</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">或</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #800D00;">点对点连接</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">，</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #FF2500;">Peer To Peer</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">。</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">使用</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #595959;">GameKit</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">框架中的对等网络连接</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #595959;">API</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">，可以</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #800D00;">在游戏玩家之间建立一个对等网络，并在</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #FF2500;">游戏</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #FF2500;">/</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #FF2500;">应用实例之间交换数据</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">。</span></li><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 15.0pt;">GameKit</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt;">框架可以使用蓝牙在玩家之间创建网络，玩家甚至不需要连接到互联网，就可以彼此对战。</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">通过蓝牙实现对等网络连接</span></div><ol style="direction: ltr; border-width: 100%; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 15.0pt;" type="1"><li style="color: #595959;" value="1"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">为玩家双方呈现一个</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #800D00;">GKPeerPickerController</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">，提供了一个标准的用户界面连接</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #800D00;">两台设备</span></li></ol><ol style="direction: ltr; border-width: 100%; unicode-bidi: embed; font-family: Helvetica; font-size: 15.0pt;" type="1"><li style="color: #595959;" value="2"><span style="font-family: Helvetica; font-size: 15.0pt; color: #595959;">ViewControoler</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">遵循</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #800D00;">GKPeerPickerControllerDelegate</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">协议，处理来自</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #595959;">GKPeerPickerController</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">（对端选择器）的信息</span></li></ol><ol style="direction: ltr; border-width: 100%; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 15.0pt;" type="1"><li style="color: #595959;" value="3"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">建立连接后，使用</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #800D00;">GKSession</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">类可以</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #800D00;">向对端设备发送数据</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">在</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #800D00;">receiveData:fromPeer:inSession:context</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">代理方法中编写代码来处理接收到的数据</span></li></ol><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">蓝牙对等网络演练</span><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">——</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">发送照片（</span><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">1</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">）</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt; color: #595959;">演练目标：</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt; color: #FF2500;">通过蓝牙彼此发送照片</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">演练步骤：</span></li><ul style="direction: ltr; unicode-bidi: embed;" type="circle"><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">1.</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">  基于照片选择项目进行扩展，仅从照片库选择照片</span></li><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">2.</span> <span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">添加</span><span style="font-family: Helvetica; font-size: 13.5pt;">GameKit</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">框架</span></li><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">3.</span> <span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">创建对等连接</span></li><ul style="direction: ltr; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">3.1</span> <span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">实例化对端选择器</span></li><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">3.2</span> <span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">设置代理，并遵循协议</span></li><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">3.3</span> <span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">显示对端选择器</span></li></ul><li style="color: #595959;"><span style="font-family: Helvetica; font-size: 13.5pt;">4.</span> <span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">连接建立代理方法</span></li></ul></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 13.5pt; color: rgb(128, 13, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 13.5pt; color: #800D00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">peerPickerController:didConnectPeer:toSession:</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: Helvetica; font-size: 13.5pt;">4.1</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">记录对端连接会话</span></li><li><span style="font-family: Helvetica; font-size: 13.5pt;">4.2</span> <span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">设置数据接收处理</span></li><li><span style="font-family: Helvetica; font-size: 13.5pt;">4.3</span> <span style="font-family: &quot;STHeiti Light&quot;; font-size: 13.5pt;">关闭对端选择器</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">蓝牙对等网络演练</span><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">——</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">发送照片（</span><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">2</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">）</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 18.0pt;">发送数据方法</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">[</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">_peerSession</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">sendDataToAllPeers</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:data</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">withDataMode</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">GKSendDataReliable error</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:&amp;error];</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;STHeiti Light&quot;; font-size: 18.0pt;">接收数据方法</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">void</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)receiveData:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSData</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)data fromPeer:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSString</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)peer inSession: (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">GKSession</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)session context:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">void</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)context;</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(79, 129, 189); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">蓝牙对等网络</span><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">——</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #4F81BD; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">发送自定义对象</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">如果要通过网络发送自定义对象，</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #FF2500;">需要使用</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #FF2500;">NSKeyedArchiver</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #FF2500;">方法归档自定义对象</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">，然后再发送归档后的</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #595959;">NSData</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">自定义对象需要遵从</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #FF2500;">NSCoding</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #FF2500;">协议</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">，并实现相应的归档和恢复方法</span></li><li style="color: #595959;"><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">接收端接收到数据之后，使用</span><span style="font-family: Helvetica; font-size: 15.0pt; color: #FF2500;">NSKeyedUnarchiver</span><span style="font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959;">方法恢复数据</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'STHeiti Light'; font-size: 15pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;STHeiti Light&quot;; font-size: 15.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">传感器</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">什么是传感器</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">传感器是一种感应</span><span style="font-family: Helvetica; font-size: 13.5pt;">\</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">检测周围环境的一种装置</span><span style="font-family: Helvetica; font-size: 13.5pt;">,</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">目前已经广泛应用于智能手机上</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">传感器的作用</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">用于感应</span><span style="font-family: Helvetica; font-size: 13.5pt;">\</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">检测设备周边的信息</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">不同类型的传感器</span><span style="font-family: Helvetica; font-size: 13.5pt;">,</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">检测的信息也不一样</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">iPhone</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">中的下面现象都是由传感器完成的</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">在地图应用中</span><span style="font-family: Helvetica; font-size: 13.5pt;">,</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">能判断出手机头面向的方向</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">一关灯</span><span style="font-family: Helvetica; font-size: 13.5pt;">, iPhone</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">会自动调整屏幕的亮度</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">打电话时</span><span style="font-family: Helvetica; font-size: 13.5pt;">,</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">人脸贴近</span><span style="font-family: Helvetica; font-size: 13.5pt;">iPhone</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">屏幕时</span><span style="font-family: Helvetica; font-size: 13.5pt;">,</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">屏幕会自动锁屏</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">... ... </span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">传感器的类型</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">iPhone</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">内置的传感器有</span></li><li style="color: #FF2500;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #FF2500;">运动传感器</span><span style="font-family: Helvetica; font-size: 13.5pt; color: #FF2500;">\</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #FF2500;">加速度传感器</span><span style="font-family: Helvetica; font-size: 13.5pt; color: #FF2500;">\</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #FF2500;">加速计</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">（</span><span style="font-family: Helvetica; font-size: 13.5pt; color: #FF2500;">Motion/Accelerometer Sensor</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">）</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">环境光传感器（</span><span style="font-family: Helvetica; font-size: 13.5pt;">Ambient Light Sensor</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">）</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">距离传感器（</span><span style="font-family: Helvetica; font-size: 13.5pt;">Proximity Sensor</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">）</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">磁力计传感器（</span><span style="font-family: Helvetica; font-size: 13.5pt;">Magnetometer Sensor</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">）</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">内部温度传感器（</span><span style="font-family: Helvetica; font-size: 13.5pt;">Internal Temperature Sensor</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">）</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">湿度传感器（</span><span style="font-family: Helvetica; font-size: 13.5pt;">Moisture Sensor</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">）</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">陀螺仪（</span><span style="font-family: Helvetica; font-size: 13.5pt;">Gyroscope</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">）</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">... ...</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [1].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [2].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [3].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [4].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">湿度传感器（</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Moisture Sensor</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">）</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">湿度传感器跟其他基于微电子的传感器不同，是一个简单的物理传感器</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">简单来说，湿度传感器就是一张遇水变红的试纸</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">Apple</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">的维修人员就是通过检测试纸是否变红，来判断设备是否进水</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">（设备进水不在保修范围之内）</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [5].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [6].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">传感器总结</span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [7].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">距离传感器的使用</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 12pt; color: rgb(0, 116, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">开启距离感应功能</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">[</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">UIDevice</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">currentDevice</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">].</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">proximityMonitoringEnabled</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">=</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">YES</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">;</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 12pt; color: rgb(0, 116, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">监听距离感应的通知</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">[[</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSNotificationCenter</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">defaultCenter</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">]</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">addObserver</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">self</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">selector</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">@selector</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(proximityChange:)</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">name</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">UIDeviceProximityStateDidChangeNotification</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">object</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">nil</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">void</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)proximityChange:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSNotification</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)notification {</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">   </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">if</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">([</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">UIDevice</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">currentDevice</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">].</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">proximityState</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">==</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">YES</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">) {</span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">NSLog</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">(</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #C41B17;">@&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #C41B17;">某个物体靠近了设备屏幕</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #C41B17;">&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">);</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #007400;">屏幕会自动锁住</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    } </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">else</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> {</span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">NSLog</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">(</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #C41B17;">@&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #C41B17;">某个物体远离了设备屏幕</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #C41B17;">&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">);</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #007400;">屏幕会自动解锁</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    }</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">加速计</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">加速计的作用</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">用于检测设备的运动（比如摇晃）</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">加速计的经典应用场景</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">摇一摇</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">计步器</span></li></ul><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [8].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">加速计程序的开发</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">加速计程序的开发</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">在</span><span style="font-family: Helvetica; font-size: 13.5pt; color: #7F7F7F;">iOS4</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">以前：使用</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">UIAccelerometer</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">，用法非常简单（到了</span><span style="font-family: Helvetica; font-size: 13.5pt; color: #7F7F7F;">iOS5</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">就已经过期）</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">从</span><span style="font-family: Helvetica; font-size: 13.5pt; color: #7F7F7F;">iOS4</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">开始：</span><span style="font-family: Menlo; font-size: 13.5pt; color: #C41B17;">CoreMotion.framework</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">虽然</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">UIAccelerometer</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">已经过期，但由于其用法极其简单，很多程序里面都还有残留</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">UIAccelerometer</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: 'Microsoft YaHei';">的使用步骤</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">获得单例对象</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">UIAccelerometer</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">*accelerometer = [</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">UIAccelerometer</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">sharedAccelerometer</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">设置代理</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">accelerometer.</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">delegate</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> = </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">self</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">;</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">设置采样间隔</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">accelerometer.</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #5C2699;">updateInterval</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">=</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #1C27CF;">1.0</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">/</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #1C27CF;">30.0</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">;</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400;">1</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #007400;">秒钟采样</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400;">30</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #007400;">次</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">实现代理方法</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">void</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)accelerometer:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">UIAccelerometer</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)accelerometer didAccelerate:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">UIAcceleration</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)acceleration</span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; color: rgb(0, 116, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">acceleration</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">中的</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">x</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">、</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">y</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">、</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">z</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">三个属性分别代表每个轴上的加速度</span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [9].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Core Motion</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">在</span><span style="font-family: Helvetica; font-size: 13.5pt; color: #7F7F7F;">iOS4</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">之前，加速度计由</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">UIAccelerometer</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">类来负责采集数据</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">随着</span><span style="font-family: Helvetica; font-size: 13.5pt;">iPhone4</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">的推出</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">加速度计全面升级，并引入了陀螺仪</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">与</span><span style="font-family: Helvetica; font-size: 13.5pt;">Motion</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">（运动）相关的编程成为重头戏</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">苹果特地在</span><span style="font-family: Helvetica; font-size: 13.5pt; color: #7F7F7F;">iOS4</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">中增加了专门处理</span><span style="font-family: Helvetica; font-size: 13.5pt; color: #7F7F7F;">Motion</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #7F7F7F;">的框架</span><span style="font-family: Helvetica; font-size: 13.5pt; color: #7F7F7F;">-</span><span style="font-family: Menlo; font-size: 13.5pt; color: #C41B17;">CoreMotion.framework</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">Core Motion</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">不仅能够提供实时的加速度值和旋转速度值，更重要的是，苹果在其中集成了很多牛逼的算法</span></li></ul><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [10].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Core Motion</span><span style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">的使用步骤（</span><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">push</span><span style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">）</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">创建运动管理者对象</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">CMMotionManager</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">*mgr = [[</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">CMMotionManager</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">alloc</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">]</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">init</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">判断加速计是否可用（最好判断）</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">if</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">(mgr.</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">isAccelerometerAvailable</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">) {</span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #007400;">加速计可用</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">设置采样间隔</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">mgr.</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #5C2699;">accelerometerUpdateInterval</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">=</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #1C27CF;">1.0</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">/</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #1C27CF;">30.0</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">;</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400;">1</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #007400;">秒钟采样</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400;">30</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #007400;">次</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt; color: #7F7F7F;">开始采样（采样到数据就会调用</span><span style="font-family: Menlo; font-size: 12.0pt; color: black;">handler</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt; color: #7F7F7F;">，</span><span style="font-family: Menlo; font-size: 12.0pt; color: black;">handler</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt; color: #7F7F7F;">会在</span><span style="font-family: Menlo; font-size: 12.0pt; color: black;">queue</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt; color: #7F7F7F;">中执行）</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">void</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)startAccelerometerUpdatesToQueue:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSOperationQueue</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *)queue withHandler:(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">CMAccelerometerHandler</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)handler;</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Core Motion</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">的使用步骤（</span><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">pull</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">）</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">创建运动管理者对象</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">CMMotionManager</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">*mgr = [[</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">CMMotionManager</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">alloc</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">]</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">init</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">判断加速计是否可用（最好判断）</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #AA2391;">if</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">(mgr.</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">isAccelerometerAvailable</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">) {</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #007400;">加速计可用</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">}</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">开始采样</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">void</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)startAccelerometerUpdates;</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">在需要的时候采集加速度数据</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">CMAcceleration</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">acc = mgr.</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">accelerometerData</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">.</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">acceleration</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">;</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #2E116E;">NSLog</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;%f, %f, %f&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">, acc.</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">x</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">, acc.</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">y</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">, acc.</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">z</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">);</span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记②   重点  (三十一)  蓝牙传感器_files/Image [11].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">摇一摇</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">监控摇一摇的方法</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">方法</span><span style="font-family: Helvetica; font-size: 13.5pt;">1</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">：通过分析加速计数据来判断是否进行了摇一摇操作（比较复杂）</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">方法</span><span style="font-family: Helvetica; font-size: 13.5pt;">2</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">：</span><span style="font-family: Helvetica; font-size: 13.5pt;">iOS</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">自带的</span><span style="font-family: Helvetica; font-size: 13.5pt;">Shake</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">监控</span><span style="font-family: Helvetica; font-size: 13.5pt;">API</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">（非常简单）</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">判断摇一摇的步骤：实现</span><span style="font-family: Helvetica; font-size: 13.5pt;">3</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">个摇一摇监听方法</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #007400;">检测到摇动</span></li><li><span style="font-family: Menlo; font-size: 13.5pt;">- (</span><span style="font-family: Menlo; font-size: 13.5pt; color: #AA2391;">void</span><span style="font-family: Menlo; font-size: 13.5pt;">)motionBegan:(</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">UIEventSubtype</span><span style="font-family: Menlo; font-size: 13.5pt;">)motion withEvent:(</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">UIEvent</span> <span style="font-family: Menlo; font-size: 13.5pt;">*)event</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #007400;">摇动取消</span><span style="font-family: Menlo; font-size: 13.5pt; color: #007400;">(</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #007400;">被中断</span><span style="font-family: Menlo; font-size: 13.5pt; color: #007400;">)</span></li><li><span style="font-family: Menlo; font-size: 13.5pt;">- (</span><span style="font-family: Menlo; font-size: 13.5pt; color: #AA2391;">void</span><span style="font-family: Menlo; font-size: 13.5pt;">)motionCancelled:(</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">UIEventSubtype</span><span style="font-family: Menlo; font-size: 13.5pt;">)motion withEvent:(</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">UIEvent</span> <span style="font-family: Menlo; font-size: 13.5pt;">*)event</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt; color: #007400;">摇动结束</span></li><li><span style="font-family: Menlo; font-size: 13.5pt;">- (</span><span style="font-family: Menlo; font-size: 13.5pt; color: #AA2391;">void</span><span style="font-family: Menlo; font-size: 13.5pt;">)motionEnded:(</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">UIEventSubtype</span><span style="font-family: Menlo; font-size: 13.5pt;">)motion withEvent:(</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">UIEvent</span> <span style="font-family: Menlo; font-size: 13.5pt;">*)event</span></li></ul><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><span style="direction: ltr; font-family: SimSun; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">笔记整理：Edison</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; color: rgb(79, 129, 189); unicode-bidi: embed;">联系方式：QQ：277593 （笔记意见建议可加此Q，专人更新此笔记）；</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); unicode-bidi: embed;"> </span></div><div><span style="direction: ltr; font-family: SimSun; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">注：小道途径获取到的笔记，无法自动更新，请谅解！(笔记平均每月更新一次，祝各位都能拿到心仪的offer)</span><span style="direction: ltr; font-family: SimSun; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%;"> </span></div><div><br/></div></span>
</div></body></html> 