<html>
<head>
  <title>直播  (二十四) : 编译ffmpeg和集成第三方实现直播（监控类）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="7B368A12-B7F1-42A9-9543-2C83B6A67BB6"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1659"/>
<h1>直播  (二十四) : 编译ffmpeg和集成第三方实现直播（监控类）</h1>

<div>
<span><div><br/></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">最近由于项目需要，接触了一下</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">ffmpeg</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的编译和使用。</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">由于之前的版本</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">ffmpeg</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">编译的库比较老，对新设备，</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">5s</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">及</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">5s</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">以后的设备支持不太好，重新编译了</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">ffmpeg</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">静态库。</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 14pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 14.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">一，下载并在终端中运行脚本编译</span><span style="direction: ltr; font-size: 14.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">ffmpeg</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">脚本参考</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">git</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">上的：</span><a href="https://github.com/kewlbear/FFmpeg-iOS-build-script" style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">https://github.com/kewlbear/FFmpeg-iOS-build-script</a><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">；</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">终端进入刚刚下载后的脚本文件夹下，运行</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">sh</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">：</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">build</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">－</span><a href="http://ffmpeg.sh" style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">ffmpeg.sh</a><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">自动编译，有缺少</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">yasm</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的按照提示操作，安装</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">yasm</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">编译的是</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">ffmpeg2.5.3</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">版本，</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Xcode6</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">下</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">iOS8.1</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">。</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">按照脚本编译完后的静态库目录如下：</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="直播  (二十四)  编译ffmpeg和集成第三方实现直播（监控类）_files/Image.png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #FAC08F;">注意</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri; background: #FAC08F;">:</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #FAC08F;">其中的</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial; background: #FAC08F;">.a</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #FAC08F;">文件为静态库文件，</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial; background: #FAC08F;">include</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #FAC08F;">文件夹内的是头文件</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 14pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 14.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">二，将编译好的</span><span style="direction: ltr; font-size: 14.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">ffmpeg</span><span style="direction: ltr; font-size: 14.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">文件拖人工程，并设置相应的路径</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">新建工程，将编译好后包含</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">include</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">和</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">lib</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">文件夹拖进工程</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="直播  (二十四)  编译ffmpeg和集成第三方实现直播（监控类）_files/Image [1].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">我这里先将</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">FFmpeg</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">－</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">iOS</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">文件夹</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">copy</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">了一分放在工程目录下，并重新命名为</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">ffmpegNew</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，路径如下图：</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="直播  (二十四)  编译ffmpeg和集成第三方实现直播（监控类）_files/Image [2].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">到这里要修改工程的</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Header Search Paths</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，要不然会报</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">include“libavformat/avformat.h” file not found  </span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">错误</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">根据</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Library Search Paths</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">中的</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">lib</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的路径：</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="直播  (二十四)  编译ffmpeg和集成第三方实现直播（监控类）_files/Image [3].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">复制路径，添加一份到</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Header Search Paths</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">中，再将</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">lib</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">改为</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">include</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">改好如下：</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="直播  (二十四)  编译ffmpeg和集成第三方实现直播（监控类）_files/Image [4].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: Arial; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Arial; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 14pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 14.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 14pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 14.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">三，导入其他库文件</span></div><div style="direction: ltr; font-size: 12pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 12.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">其中</span><span style="direction: ltr; font-size: 12.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">libz.dylib libbz2.dylib libiconv.dylib</span><span style="direction: ltr; font-size: 12.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 12.0pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">貌似是必须要导入的，其他的按照需求配置</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">个人配置好后的如下供参考：</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="直播  (二十四)  编译ffmpeg和集成第三方实现直播（监控类）_files/Image [5].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">四，将第三方代码导入工程</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">根据工程的定制化需求，这里选择了</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">iFrameExtractor</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">，</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">git</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">代码参考：</span><a href="https://github.com/lajos/iFrameExtractor" style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">https://github.com/lajos/iFrameExtractor</a><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">或者</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">RTSPPlayer    </span><a href="https://github.com/SutanKasturi/RTSPPlayer" style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">https://github.com/SutanKasturi/RTSPPlayer</a></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">我这里用的后者的</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">demo</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">里面的代码，直接将（</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">AudioStreamer  RTSPPlayer  Utilities</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">）六个文件拖入工程使用</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="直播  (二十四)  编译ffmpeg和集成第三方实现直播（监控类）_files/Image [6].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: Arial; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Arial; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">五，实现播放，实现方法可以参考</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">demo</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">中的代码</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">其中的</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">self.playUrl</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">为视频流的地址本工程用的是</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;">RTSP</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">数据流</span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Arial;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">示例：</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #3F3F3F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">.playUrl =</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #B4261A;">@&quot;</span><a href="rtsp://xxx.xxx.xxx.xxx/xxx.sdp" style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #B4261A;">rtsp://xxx.xxx.xxx.xxx/xxx.sdp</a><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #B4261A;">&quot;</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">;</span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 11.25pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 11.25pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 11.25pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 11.25pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">实现播放的代码：</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">.videoView = [[RTSPPlayer alloc] initWithVideo:</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">.playUrl usesTcp:</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">YES</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">.videoView.outputHeight = </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">.playImage.frame.size.height;</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">.videoView.outputWidth  = </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">.playImage.frame.size.width;</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">__weak</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> TestViewController *weakself = </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">;</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    dispatch_async(dispatch_get_main_queue(), ^{</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">     </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">            weakself.playTimer = [NSTimer scheduledTimerWithTimeInterval:1/30.0</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                   </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                                                                            target:weakself</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                   </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                                                                          selector:</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">@selector</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(displayNextFrame:)</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                   </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                                                                          userInfo:</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">nil</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                   </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                                                                           repeats:</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">YES</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">     </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        });</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">-(</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">void</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)displayNextFrame:(NSTimer *)timer {</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">if</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> (![</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">.videoView stepFrame]) {</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                [timer invalidate];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">return</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">;</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">            }</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">if</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> (startframecount &lt; 48) {</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                startframecount++;</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">            } </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">else</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> {</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                    startframecount++;</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                    [</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> playVideo];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                }</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">-(</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">void</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)playVideo</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">{</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">   </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00; mso-spacerun: yes;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00; mso-spacerun: yes;">   </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00;">NSLog(@&quot;%p,%d&quot;,__FUNCTION__,__LINE__);</span></div><div style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">        </span><span style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">主线程更改视图</span></div><div style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">       </span><span style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00; mso-spacerun: yes;">  </span><span style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">视频源尺寸为</span><span style="direction: ltr; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">352*288</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">__weak</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> TestViewController *weakself = </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">;</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        dispatch_async(dispatch_get_main_queue(), ^{</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">            weakself.playImage.image =  weakself.videoView.currentImage;</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">       </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00;">NSLog(@&quot;%d,%d&quot;,self.videoView.sourceWidth,self.videoView.sourceHeight);</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">            });</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">笔记整理：Edison</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; color: rgb(79, 129, 189); unicode-bidi: embed;">联系方式：QQ：277593 （笔记意见建议可加此Q，专人更新此笔记）；</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); unicode-bidi: embed;"> </span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(63, 63, 63); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">注：小道途径获取到的笔记，无法自动更新，请谅解！(笔记平均每月更新一次，祝各位都能拿到心仪的offer)</span><span style="direction: ltr; font-family: 'Microsoft YaHei'; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%;"> </span></div><div><br/></div></span>
</div></body></html> 