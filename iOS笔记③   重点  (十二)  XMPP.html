<html>
<head>
  <title>iOS笔记③  : 重点  (十二) : XMPP</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="1E6DB653-6475-4532-BB41-5DB072ACAB29"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1355"/>
<h1>iOS笔记③  : 重点  (十二) : XMPP</h1>

<div>
<span><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">即时通讯</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">即时通讯，又称实时通讯</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">即时通信（</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">Instant Messaging</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">，简称</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">IM</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">）是一个</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">实时通信</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">系统，允许两人或多人使用网络实时的传递文字消息、文件、语音与视频交流</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">即时通讯在开发中使用的场景</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">开发一个类型于微信，</span><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">QQ</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">，易信的聊天软件</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">在电商</span><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">APP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">集成买家与卖家的实时沟通等</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">当前时下，实现即时通讯的方案</span></li></ul><ol style="direction: ltr; border-width: 100%; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt;" type="1"><li lang="en-US" style="color: #829CBB;" value="1"><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">XMPP</span> <span style="font-family: Eurostile; font-size: 18.0pt; color: red;">(Openfire+XMPPFramework)</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">环信第三方平台</span><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">…</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">其它第三方平台</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: red;">融云、容联、亲加</span><span style="font-family: Eurostile; font-size: 18.0pt; color: red;">…</span><span style="font-family: Eurostile; font-size: 18.0pt; color: red;">..</span></li></ol><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">XMPP</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">是什么</span></div><ol style="direction: ltr; border-width: 100%; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt;" type="1"><li style="color: #829CBB;" value="4"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">：</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">The Extensible Messaging and Presence Protocol</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">（可扩展通讯和表示协议）</span></li></ol><ol style="direction: ltr; border-width: 100%; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt;" type="1"><li value="5"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">是一种基于</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">XML</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">的即时通讯协议</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">，</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">的官方文档是</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">RFC 3920</span></li></ol><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: black;">这个文档定义了登录，退出，获取好友，发送消息等等的</span><span style="font-family: Eurostile; font-size: 18.0pt; color: red;">XML</span><span style="font-weight: bold; font-style: italic; font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: red; text-decoration: underline;">数据</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: red;">传输协议</span></li></ul><ol style="direction: ltr; border-width: 100%; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt;" type="1"><li value="6"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">是一个典型的</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">C/S</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">架构，基本的网络形式是</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">客户端通过</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">TCP/IP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">连接到服务器</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">，通过</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">Socket</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">建立连接，然后在</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">Socket</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">上传输</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">XML</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">流</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">是一种类似于</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">HTTP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">协议的一种</span><span style="font-weight: bold; font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">数据传输协议</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">，其过程就如同“解包装</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">--〉</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">包装”的过程。只需要理解其接收的类型及返回的类型，便可以很好的利用</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">来进行数据通讯</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">官方网站</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: black;">——</span><a href="http://xmpp.org" style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt;">http://xmpp.org</a></li></ol><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">XMPP</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">实现即时通信的准备工作</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri;">(</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">已经过时了</span><span style="direction: ltr; unicode-bidi: embed; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri;">)</span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image.png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">环信</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">什么是环信</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">环信是一个第三平台，提供即时通信</span><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">(IM –Instant Messaging )</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">的服务</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">环信是在</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">的基础上进行二次开发</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">环信在网络上传输的数据也是</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XML</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">使用环信，不用自己搭建服务器，节约成本</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">环信日活</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">30</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">万以下</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">,</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">永远免费</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">2015</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">年上半年易观发布中国移动</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">IM</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">云报告，环信稳居市场第一</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">公司如要开发即时通讯软件，建议首选环信</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">,</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">环信占用市场份额较大</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [1].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [2].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [3].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [4].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [5].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">自动登录</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">自动登录：当然程序再次启动时，如果用户已经成功登录过，不需要用户再输入用户名和密码进行登录</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">实现方法</span></li><ol style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt;" type="A"><li style="color: #829CBB;" value="1"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">把登录帐号信息保存下来，程序起动发送登录请求</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">环信已经实现了自动登录，只需要在第一次登录成功后调用 下面的方法即可</span><br/> <span style="font-family: Eurostile; font-size: 18.0pt; color: red;">[[EaseMob sharedInstance].chatManager setIsAutoLoginEnabled:YES];</span></li></ol><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">总结：不管哪种方法，实质都是再次调用了登录的网络请求</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">自动连接</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">如果网络不通过，用户应该自动连接到服务器</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">,</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">以及时接收消息</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">此功能无需程序员自己做，环信框架已实现</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">,</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">环信</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">SDK</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">会调用自动连接的代理方法来通知应用程序</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [6].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 32pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 32.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div lang="en-US" style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">EMChatManagerBuddyDelegate</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #E46C0A;">上面的协议的实现了对用户的基本操作，如</span></li><ol style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt;" type="A"><li style="color: #829CBB;" value="1"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #E46C0A;">添加好友</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #E46C0A;">从本地获取好友列表</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #E46C0A;">从服务器获取最新好友列表</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #E46C0A;">接收好友添加请求</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #E46C0A;">删除好友</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #E46C0A;">被好友从名单上删除</span></li></ol></ul><div lang="en-US" style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">文字发送</span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [7].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">显示聊天消息</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">步骤</span></li><ol style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt;" type="A"><li style="color: #829CBB;" value="1"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">先获取</span><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">EMConversation</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">会话管理者对象</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">调用</span><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">EMConversation</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">的</span><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">- (NSArray *)loadNumbersOfMessages:(NSUInteger)aCount before:(long long)timestamp;</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">获取指定的聊天记录</span></li></ol></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 18pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [8].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">监听好友的回复消息</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">当前聊天页面，监听好友发送的及时消息</span></li><li style="font-size: 24.0pt; color: #595959;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [9].png" type="image/png" data-filename="Image.png"/><br/></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [10].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [11].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [12].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [13].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [14].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [15].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [16].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">是否使用过</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">XMPP,XMPP</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">的实现原理</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">是一个即时通讯的协议，</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">它规范了用于即时通信在网络上数据传输格式的</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">，比如登录，获取好友列表等等的格式。</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">在网络传输的数据</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">是</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">XML</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">格式</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">比如登录：把用户名和密码放在</span><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">xml</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">的标签中，传输到服务器</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">是一个基于个</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">Socket</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">通过的网络协议，目的是为了保存长连接，以实现即时通讯功能</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">的客户端是使用一个</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPPFramework</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">框架实现</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">的服务器是使用</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">Openfire,</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">一个开源的服务器</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">客户端获取到服务器发送过来的好友消息，客户端需要对</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XML</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">进行解析，使用的解析框架的</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">KissXML</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">框架，而不是</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">NSXMLParser/GDataXML</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [17].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Calibri; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记③   重点  (十二)  XMPP_files/Image [18].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">在使用</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">XMPP</span><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">的时候有没有需要什么困难</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">发送附件（图片，语音，文档</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">…</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">）时比较麻烦</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">框架没有提供发送附件的功能，需要自己实现</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">实现方法，把文件上传到文件服务器，上传成功后获取文件保存路径，再把附件的路径发送给好友</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">是否使用过环信，简单的说下环信的实现原理</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">环信是一个即时通信的服务提供商</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">环信使用的是</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">协议，它是再</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">的基础上进行二次开发，对服务器</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">Openfire</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">和客户端进行</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">功能模型的添加</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">和</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">客户端</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">SDK</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">的封装</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">，环信的本质还是使用</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">XMPP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">，基本于</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">Socket</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">的网络通信</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">环信内部实现了</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">数据缓存</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">，会把聊天记录添加到数据库，把附件</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">(</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">如音频文件，图片文件</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">)</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">下载到本地，使程序员更多时间是花到</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: red;">用户体验上</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">环信内部已经实现了视频，音频，图片，其它附件发送功能</span></li><li><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 20.0pt; color: #7F7F7F;">环信使用公司可以节约时间成本</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">不需要公司内部搭建服务器</span></li><li style="color: #829CBB;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">客户端的开发，使用环信</span><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">SDK</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">比使用</span><span style="font-family: Eurostile; font-size: 18.0pt; color: #7F7F7F;">XMPPFramework</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18.0pt; color: #7F7F7F;">更简洁方便</span></li></ul><div><br/></div><div><br/></div><div><br/></div><div><span style="direction: ltr; font-family: SimSun; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">笔记整理：Edison</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; color: rgb(79, 129, 189); unicode-bidi: embed;">联系方式：QQ：277593 （笔记意见建议可加此Q，专人更新此笔记）；</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); unicode-bidi: embed;"> </span></div><div><span style="direction: ltr; font-family: SimSun; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">注：小道途径获取到的笔记，无法自动更新，请谅解！(笔记平均每月更新一次，祝各位都能拿到心仪的offer)</span><span style="direction: ltr; font-family: SimSun; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%;"> </span></div><div><br/></div></span>
</div></body></html> 