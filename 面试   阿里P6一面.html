<html>
<head>
  <title>面试  : 阿里P6一面</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="E8810DE5-B514-41C2-92D3-04EE8922790B"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="705"/>
<h1>面试  : 阿里P6一面</h1>

<div>
<span><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><div><span style="font-size: 18px; font-weight: bold;">前言：先自己尝试去回答，回答不了再看参考答案，你才能学的更多！</span></div></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">1.MVC具有什么样的优势，各个模块之间怎么通信，比如点击 Button 后 怎么通知 Model？ </span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">2.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">两个无限长度链表（也就是可能有环） 判断有没有交点 </span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">3.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">UITableView的相关优化 </span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">4.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">KVO、Notification、delegate各自的优缺点，效率还有使用场景 </span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">5.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">如何手动通知KVO </span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">6.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">Objective-C 中的copy方法 </span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">7.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">runtime 中，SEL和IMP的区别 </span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">8.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">autoreleasepool的使用场景和原理 </span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">9.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">RunLoop的实现原理和数据结构，什么时候会用到 </span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">10.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">block为什么会有循环引用 </span></div><div><span style="font-size: 10.5pt; direction: ltr; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">11.</span><span style="font-size: 10.5pt; direction: ltr; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">有没有自己设计过网络控件？ </span><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold; line-height: normal;">12.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold; line-height: normal;">NSOperation和GCD的区别</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">12.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">CoreData的使用，如何处理多线程问题 </span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">13.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">如何设计图片缓存？</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">14.</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-variant-caps: normal; font-weight: bold; line-height: normal;">有没有自己设计过网络控件？ </span></div><div><br/></div><hr/><div><br/></div><div><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">1.MVC </span><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">具有什么样的优势，各个模块之间怎么通信，比如点击</span><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Button </span><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">后</span><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> </span><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">怎么通知</span><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model</span><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">？</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">MVC </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">是一种设计思想，一种框架模式，是一种把应用中所有类组织起来的策略，它把你的程序分为三块，分别是：</span></div><div><br style="font-weight: bold; font-family: PingFang SC; font-size: 13px;"/></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">M</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">（</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Model</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">）：实际上考虑的是</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">“</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">什么</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">”</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">问题，你的程序本质上是什么，独立于</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> UI </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">工作。是程序中用于处理应用程序逻辑的部分，通常负责存取数据。</span></div><div><br style="font-weight: bold; font-family: PingFang SC; font-size: 13px;"/></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">C</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">（</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Controller</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">）：控制你</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">如何呈现在屏幕上，当它需要数据的时候就告诉</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">，你帮我获取某某数据；当它需要</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> UI </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">展示和更新的时候就告诉</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> View</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">，你帮我生成一个</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> UI </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">显示某某数据，是</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">和</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">沟通的桥梁。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">V</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">（</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">View</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">）：</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">的手下，是</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">要使用的类，用于构建视图，通常是根据</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">来创建视图的。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">要了解</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> MVC </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">如何工作，首先需要了解这三个模块间如何通信。</span></div><div><br style="font-weight: bold; font-family: PingFang SC; font-size: 13px;"/></div><div><img src="面试   阿里P6一面_files/Image.png" type="image/png" data-filename="Image.png"/><br/></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">MVC</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">通信规则</span></div><div><br style="font-weight: bold; font-family: PingFang SC; font-size: 13px;"/></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Controller to Model</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">可以直接单向通信</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">。</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">需要将</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">呈现给用户，因此需要知道模型的一切，还需要有同</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">完全通信的能力，并且能任意使用</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">的公共</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> API</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Controller to View</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">可以直接单向通信</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">。</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">通过</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">来布局用户界面。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Model to View</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">永远不要直接通信</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">。</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">是独立于</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> UI </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">的，并不需要和</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">直接通信，</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">通过</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">获取</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">数据。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">View to Controller</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">不能对</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">知道的太多，因此要通过间接的方式通信。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Target action</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">。首先</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">会给自己留一个</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> target</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">，再把配套的</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> action </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">交给</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">作为联系方式。那么</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">接收到某些变化时，</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">就会发送</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> action </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">给</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> target </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">从而达到通知的目的。这里</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">只需要发送</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> action</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">，并不需要知道</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">如何去执行方法。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">代理</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">。有时候</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">没有足够的逻辑去判断用户操作是否符合规范，他会把判断这些问题的权力委托给其他对象，他只需获得答案就行了，并不会管是谁给的答案。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">DataSoure</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">。</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">没有拥有他们所显示数据的权力，</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">View </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">只能向</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">请求数据进行显示，</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">则获取</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">的数据整理排版后提供给</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> View</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">访问</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Controller</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">同样的</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">是独立于</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> UI </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">存在的，因此无法直接与</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">通信，但是当</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">本身信息发生了改变的时候，会通过下面的方式进行间接通信。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Notification &amp; KVO</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">一种类似电台的方法，</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">Model </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">信息改变时会广播消息给感兴趣的人</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">，只要</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Controller </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">接收到了这个广播的时候就会主动联系</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> Model</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">，获取新的数据并提供给</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> View</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">从上面的简单介绍中我们来简单概括一下</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> MVC </span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">模式的优点。</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">1.</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">低耦合性</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">2.</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">有利于开发分工</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">3.</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">有利于组件重用</span></div><div><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">4.</span><span style="-webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-size: 13px; color: rgb(0, 0, 0); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">可维护性</span></div><hr/><div><br/></div><div><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">2.两个无限长度链表（也就是可能有环）</span><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;"> </span><span style="font-size: 18px; -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); color: rgb(4, 51, 255); font-family: 'PingFang SC'; -webkit-font-kerning: none; font-variant-caps: normal; font-weight: bold; line-height: normal;">判断有没有交点？</span></div><h2><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">单链表是否存在环？环的入口是什么？</span></h2><h3><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">是否存在环</span></h3><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">1) 判断是否存在环：设置快慢指针fast和slow，fast步速为2，slow为1，若最终fast==slow，那么就证明单链表中一定有环。如果没有环的话，fast一定先到达尾节点</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">2) 简单证明：利用相对运动的概念，以slow为参考点（静止不动），那么fast的步速实际为1，当fast超过slow之后，fast以每步一个节点的速度追赶slow，如果链表有环的话，fast一定会追赶到slow，即fast==slow。</span></div><h3><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">如何找到环的入口</span></h3><div><img src="面试   阿里P6一面_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">第一次相遇</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">字母代表的量：</span></div><ul><li>a：链表头结点到环入口的距离</li><li>r：环长</li><li>蓝色线：fast指针所走的距离2s</li><li>黑色线：slow指针所走的距离s</li></ul><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">假设链表总长度为L，且fast与slow相遇时fast已经绕环走了n圈，则有如下关系：</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">2s = s + n</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-style: italic; font-weight: bold;">r</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-style: italic; font-weight: bold;">将s移到左边得：</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-style: italic; font-weight: bold;">s = n</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">r</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">转换：</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">s = (n-1)</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-style: italic; font-weight: bold;">r + r = (n-1)</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">r + L-a</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">a+x = (n-1)</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-style: italic; font-weight: bold;">r + L-a</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-style: italic; font-weight: bold;">得：</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-style: italic; font-weight: bold;">a = (n-1)</span><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">r + L-a-x</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">由图可知，（L-a-x）为相遇点到环入口点的距离。由上式可知：</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">从链表头到环入口的距离 = （n-1）圈内环循环 + 相遇点到环入口点的距离</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">将r视为周期的话，a与L-a-x在某种意义上是相等的（实际并不一定相等）。</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">那么由此我们便找到了突破点，为了找到环的入口点，在fast与slow相遇时，将slow指针重新指向单链表的头节点，fast仍然留在相遇点，只不过步速降为与slow相同的1，每次循环只经过一个节点，如此，当fast与slow再次相遇时，那个新的相遇点便是我们苦苦寻找的入口点了。</span></div><h3><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">如何知道环的长度</span></h3><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">纪录下相遇点，让slow与fast从该点开始，再次碰撞所走过的操作数就是环的长度r。</span></div><h3><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">带环的链表的长度是多少？</span></h3><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">通过以上分析我们已经知道了如何求环入口，环长，那么链表长度显然就是两者之和，即：</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">L = a + r</span></div><h2><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">判断两个链表是否相交</span></h2><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">分析问题之前我们要搞清楚链表相交的一些基本概念</span></div><ul><li>明确概念：两个单向链表相交，只能是y型相交，不可能是x型相交。</li><li>分析：有两个链表，La,Lb,设他们的交点设为p，假设在La中，p的前驱为pre_a，后继为next_a,在Lb中，前驱为pre_b,后继为next_b，则<br/>pre_a-&gt;next=p,pre_b-&gt;next=p,接下来看后继,p-&gt;next=next_a,p-&gt;next=next_b；那么问题就出来了，一个单链表的next指针只有一个，<br/>怎么跑出两个来呢，所以必有next_a==next_b，于是我们得出两个链表相交只能是Y型相交。明确了这个概念，我们再来堆相交问题进行分析。</li></ul><h3><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">情况一：两个链表都无环</span></h3><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">1) 问题简化。将链表B接到链表A的后面，如果A、B有交点，则构成一个有环的单链表，而我们刚刚在上面已经讨论了如何判断一个</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">单链表是否有环。</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">2) 若两个链表相交则必为Y型，由此可知两个链表从相交点到尾节点是相同的，我们并不知道他们的相交点位置，但是我们可以遍历得出A、B链表的</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">尾节点，如此，比较他们的尾节点是否相等便可以求证A、B是否相交了。</span></div><h3><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">情况二：链表有环</span></h3><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">1) 其中一个链表有环，另外一个链表无环。则两个链表不可能相交。（啥？你不知道为啥？自己看看前面的“明确概念”反省吧）</span></div><div><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">2) 那么有环相交的情况只有当两个链表都有环时才会出现，如果两个有环链表相交，则他们拥有共通的环，即环上任意一个节点都存在于</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">两个链表上。因此，通过判断A链表上的快慢指针相遇点是否也在B链表上便可以得出两个链表是否相交了。</span></div><h2><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">求相交链表的相交点</span></h2><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">题目描述：如果两个无环单向链表相交，怎么求出他们相交的第一个节点呢？</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 13px; font-family: 'PingFang SC'; font-weight: bold;">分析：采用对齐的思想。计算两个链表的长度 L1 , L2，分别用两个指针 p1 , p2 指向两个链表的头，然后将较长链表的 p1（假设为 p1）向后移动L2 - L1个节点，然后再同时向后移动p1 , p2，直到 p1 = p2。相遇的点就是相交的第一个节点。</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><hr/></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"></div><h4 style="box-sizing: border-box; text-rendering: optimizeLegibility; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; text-rendering: optimizeLegibility; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 18px; color: rgb(4, 51, 255); font-family: -apple-system, 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.7;">3.UITableView 的相关优化</span></h4><div><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;"><font style="font-size: 14px;">前言</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">1.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">这篇文章对</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> UITableView </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的优化主要从以下</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">3</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">个方面分析</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">:</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Lucida Grande'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">◦</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">基础的优化准则</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">(</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">高度缓存</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">, cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">重用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">...)</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Lucida Grande'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">◦</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">学会使用调试工具分析问题</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Lucida Grande'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">◦</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">异步绘制</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">2.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">涉及到</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> tableView </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">请一定要</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">用真机调试！用真机调试！用真机调试！</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">手机的性能比起电脑还是差别很大，不要老想着用模拟器调试。一定要用真机才能看出效果。</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">3.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">不要过早的做复杂的优化</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">虽然这篇文章讲的是如何优化</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">table</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，但是根据我的经验，不要一开始就去做这些工作</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">(</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">基本的优化除外</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">)</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，因为不管怎么说，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">PM</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">不会闲着的，产品的变动并不是由开发人员控制。但是大的优化对代码的结构还是有很大影响的，这意味着过早优化可能会拖慢工程的进度。在项目初期能用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> xib </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">就用吧，本来大部分这样的文章都是不推荐使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> IB </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的东西，但是不得不说，在效率上</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> IB </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">实在是有了很多天然的优势。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">4.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">优化总是在</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">空间</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">和</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">时间</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">之间权衡</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">一般优化的后期总是以更多的空间换取更短时间的响应。这表示可能会增加额外的内存和</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">CPU</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">资源的开销，需要缓存高度，缓存布局</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">...</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，当然也可能有别的考量以时间换取空间。具体怎么做，还得根据项目相关的业务逻辑确定。其实我想表达的是目前并没有十全十美的方案既可以节省内存，又可以加快速度，如果非要说好的话，也只能是在资源调度上下了功夫（如果你知道更好的请告诉我，谢谢）。如果你追求的是非常完美，还是不要朝下看了。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;"><font style="font-size: 14px;">基础的优化准则</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">1.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">正确地使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UITableViewCell</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的重用机制</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UITableView</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">最核心的思想就是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> UITableViewCell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的重用机制。</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UITableView </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">只会创建一屏幕（或一屏幕多一点）的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> UITableViewCell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，每当</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">滑出屏幕范围时，就会放入到一重用池当中，当要显示新的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">时，先去重用池中取，若没有可用的，才会重新创建。这样可以极大的减少内存的开销。</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">比较早的一种写法</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;"> static NSString *cellID = @&quot;Cell&quot;;</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">2.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">3.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> if (!cell) {</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">4.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID];</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">5.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">    //cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">初始化</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">6.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> }</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">7.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> // cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">设置数据</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">8.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> return cell;</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">或者通过注册</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">cell</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的方式</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">//</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">注册</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">cell</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">9.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">[tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@&quot;cell&quot;];</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">10.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">//</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">获取</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">cell    </span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">11.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@&quot;cell&quot;];</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">12.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">提前计算好</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的高度和布局。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UITableView</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">有两个重要的回调方法</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">:</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">13.</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">14.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UITableView</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的回调顺序是先多次调用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">tableView:heightForRowAtIndexPath:</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">用来确定</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">contentSize</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">及</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Cell</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的位置，然后才会调用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">tableView:cellForRowAtIndexPath:</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，从而来显示在当前屏幕的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">iOS8</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">会更厉害，还会边滑动边调用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">tableView:heightForRowAtIndexPath:</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，可见这个方法里一定不能重复进行着大量的计算。我们应该提前计算好</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的高度并且缓存起来，在回调时直接把高度值直接返回。</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">这里说一种我经常采用的策略：</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">一般在网络请求结束后，在更新界面之前就把每个</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的高度算好，缓存到相对应的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> model </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">中。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">这里可能有人说要是一个</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> model </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">对应多种</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">怎么办？</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">model </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">可以添加多个高度属性啊，这点空间上的开销还是可以接受的吧。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">当然这个时候最好把布局也都算好了最好，下面的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">YY</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的做法会介绍。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">15.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">避免阻塞主线程。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">很多时候我们需要从网络请求图片等，把这些操作放在后台执行，并且缓存起来。现在我们大都使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><a href="https://github.com/rs/SDWebImage" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">SDWebImage</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">进行网络图片处理，正常的使用是没有大问题的，但是如果对性能要求比较高，或者要处理</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">gif</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">图，我还是推荐</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><a href="https://github.com/ibireme/YYWebImage" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">YYWebImage</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，详细内容请自行移步到</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">github</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">查看，当然这只是个人建议。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">还有就是不要在主线程做一些文件的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">I/O</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">操作。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">16.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">按需加载。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">这一条真的是看各位喜好了，我是觉得滚动的过程中有大量的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> “</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">留白</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">” </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">并不太好，不过作为优化的建议还是要考虑的。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">如快速滚动时，仅绘制目标位置的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，可以提高滚动的顺畅程度。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">具体可以参考</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><a href="https://github.com/johnil/VVeboTableViewDemo" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">VVebo</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">17.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">减少</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">SubViews</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的数量。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">总觉得这条有点多余，能简单点的我们肯定不会做复杂了吧。这更多的取决于</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UI</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">界面的复杂度。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">18.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">尽可能重用开销比较大的对象。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">如</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">NSDateFormatter</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">和</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">NSCalendar</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">等对象初始化非常慢，我们可以把它加入类的属性当中，或者创建单例来使用。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">19.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">尽量减少计算的复杂度</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">在高分屏尽量用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> ceil </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">或</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> floor </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">或</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> round </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">取整。不要出现</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> 1.7</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">10.007</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">这样的小数。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">20.</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">不要动态的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">add</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">或者</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">remove</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">子控件</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">最好在初始化时就添加完，然后通过</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">hidden</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">来控制是否显示。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;"><font style="font-size: 14px;">学会使用调试工具分析问题</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;">Instruments</span><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;">里的：</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Core Animation instrument</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">OpenGL ES Driver instrument</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;">模拟器中的</span><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;">:</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Color debug options View debugging</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;">Xcode</span><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;">的：</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">View debugging</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Xcode </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">已经集成了</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Instruments </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">工具，通过菜单</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> profile </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">即可打开。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">在模拟器中你可以在</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Debug </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">中找到如下的菜单：</span></font></div><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [1].png" type="image/png" data-filename="Image.png"/></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">D5806B24-BB86-449D-81C2-82DA247E053C.png</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">下面是一些常见的调试选项的含义：</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">1. Color Blended Layers</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Instruments</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">可以在物理机上显示出被混合的图层</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Blended Layer(</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">用红色标注</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">)</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Blended Layer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">是因为这些</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Layer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">是透明的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">(Transparent)</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">系统在渲染这些</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">view</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">时需要将该</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">view</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">和下层</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">view</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">混合</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">(Blend)</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">后才能计算出该像素点的实际颜色。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">解决办法：检查红色区域</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">view</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">opaque</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">属性，记得设置成</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">YES</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">；检查</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">backgroundColor</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">属性是不是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">[UIColor clearColor]</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">2. Color Copied Images</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">这个选项主要检查我们有无使用不正确图片格式</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">,</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">若是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">GPU</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">不支持的色彩格式的图片则会标记为青色</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">,</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">则只能由</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">CPU</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">来进行处理。我们不希望在滚动视图的时候</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">,CPU</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">实时来进行处理</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">,</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">因为有可能会阻塞主线程。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">解决办法：检查图片格式，推荐使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">png</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">3. Color Misaligned Images</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">这个选项检查了图片是否被放缩</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">,</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">像素是否对齐。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">被放缩的图片会被标记为黄色</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">,</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">像素不对齐则会标注为紫色。</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">    </span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">如果不对齐此时系统需要对相邻的像素点做</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">anti-aliasing</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">反锯齿计算，会增加图形负担</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">通常这种问题出在对某些</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">View</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Frame</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">重新计算和设置时产生的。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">解决办法：参考</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">基本优化准则的第</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">7</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">点</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">4. Color Offscreen-Rendered</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">这个选项将需要</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">offscreen</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">渲染的的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">layer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">标记为黄色。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">离屏渲染意思是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">iOS</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">要显示一个视图时，需要先在后台用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">CPU</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">计算出视图的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Bitmap</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">再交给</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">GPU</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">做</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Onscreen-Rendering</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">显示在屏幕上，因为显示一个视图需要两次计算，</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">所以这种</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Offscreen-Rendering</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">会导致</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">app</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的图形性能下降。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">大部分</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Offscreen-Rendering</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">都是和视图</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Layer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Shadow</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">和</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Mask</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">相关。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">下列情况会导致视图的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Offscreen-Rendering</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">：</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">- </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Core Graphics (CG</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">开头的类</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">)</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">- </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">drawRect()</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">方法，即使为空。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">- </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">将</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">CALayer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的属性</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">shouldRasterize</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">设置为</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">YES</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">- </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">使用了</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">CALayer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">setMasksToBounds(masks)</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">和</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">setShadow*(shadow)</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">方法。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">- </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">在屏幕上直接显示文字，包括</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Core Text</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">- </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">设置</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UIViewGroupOpacity</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">解决办法：只能减少各种</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> layer </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的特殊效果了。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">这篇博文</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><a href="https://robots.thoughtbot.com/designing-for-ios-graphics-performance" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">Designing for iOS: Graphics &amp; Performance</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">对</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">offsreen</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">以及图形性能有个很棒的介绍，</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;"><font style="font-size: 14px;">异步绘制</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">这个属于稍高级点的技能。</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">如果我们使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Autolayout </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">可能就无能为力了。这也是为什么那么多人在优化这块拒绝使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> IB </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">开发。</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">但是这里并不展示具体的绘制代码。给个简单的形式参考：</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">//</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">异步绘制</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">    CGRect rect = CGRectMake(0, 0, 100, 100);</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">    UIGraphicsBeginImageContextWithOptions(rect.size, YES, 0);</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">    CGContextRef context = UIGraphicsGetCurrentContext();</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">    [[UIColor lightGrayColor] set];</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">    CGContextFillRect(context, rect);</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">    //</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">将绘制的内容以图片的形式返回，并调主线程显示</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">    UIImage *temp = UIGraphicsGetImageFromCurrentImageContext();</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">    UIGraphicsEndImageContext();</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">    // </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">回到主线程</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">    dispatch_async(dispatch_get_main_queue(), ^{</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">        //code</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">    });</font></span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">});</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">另外绘制</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">不建议使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> UIView</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，建议使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> CALayer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">从形式来说：</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UIView </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的绘制是建立在</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> CoreGraphic </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">上的，使用的是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> CPU</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">CALayer </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">使用的是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Core Animation</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">CPU</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">GPU </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">通吃，由系统决定使用哪个。</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">View</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的绘制使用的是自下向上的一层一层的绘制，然后渲染。</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Layer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">处理的是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Texure</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，利用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> GPU </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Texture Cache </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">和独立的浮点数计算单元加速</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">纹理</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的处理。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">从事件的响应来说：</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UIView</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> CALayer </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的代理，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">layer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">本身并不能响应事件，因为</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">layer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">是直接继承自</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">NSObject</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，不具备处理事件的能力。而</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> UIView </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">是继承了</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UIResponder </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的，这也是事件转发的角度上说明，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">view</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">要比单纯的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">layer</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">复杂的多。在滑动的列表上，多层次的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">view</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">再加上各种手势的处理势必导致帧数的下降。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">在这一块还有个问题就是当</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> TableView </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">快速滑动时，会有大量异步绘制任务提交到后台线程去执行。线程并不是越多越好，太多了只会增加</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> CPU </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的负担。所以我们需要在适当的时候取消掉不重要的线程。</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">目前这里有两种做法：</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">YY</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的做法是：</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">尽量快速、提前判断当前绘制任务是否已经被取消；在绘制每一行文本前，都会调用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> isCancelled() </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">来进行判断，保证被取消的任务能及时退出，不至于影响后续操作。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">VVebo</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的做法是：</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">当滑动时，松开手指后，立刻计算出滑动停止时</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的位置，并预先绘制那个位置附近的几个</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Cell</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，而忽略当前滑动中的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Cell</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。忽略的代价就是快速滑动中会出现大量空白内容。</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">两者都是不错的优化方法，各位自行取舍。</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;"><font style="font-size: 14px;">番外</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><a href="https://github.com/ibireme/YYText" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">YYText</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的使用</span></font></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"><font style="font-size: 14px;">这个框架涉及到的方面还是很多的，在这里说再多的理论还是不如自己去看代码的好。</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">关于用法，没什么比</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">YY</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">作者说的更明白的了</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">:</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">当获取到</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> API JSON </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">数据后，我会把每条</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">需要的数据都在后台线程计算并封装为一个布局对象</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> CellLayout</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">CellLayout </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">包含所有文本的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> CoreText </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">排版结果、</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">内部每个控件的高度、</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的整体高度。每个</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> CellLayout </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的内存占用并不多，所以当生成后，可以全部缓存到内存，以供稍后使用。这样，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">TableView </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">在请求各个高度函数时，不会消耗任何多余计算量；当把</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> CellLayout </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">设置到</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">内部时，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">Cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">内部也不用再计算布局了。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">对于通常的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> TableView </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">来说，提前在后台计算好布局结果是非常重要的一个性能优化点。为了达到最高性能，你可能需要牺牲一些开发速度，不要用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Autolayout </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">等技术，少用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> UILabel </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">等文本控件。但如果你对性能的要求并不那么高，可以尝试用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> TableView </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的预估高度的功能，并把每个</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Cell </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">高度缓存下来。这里有个来自百度知道团队的开源项目可以很方便的帮你实现这一点：</span><a href="https://github.com/forkingdog/UITableView-FDTemplateLayoutCell/" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">FDTemplateLayoutCell</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">一开始我是想要在这里长篇大论的，不过后来想想千言万语还是不及一个</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">Demo</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> (</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">还没做完</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">)</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><a href="https://github.com/facebook/AsyncDisplayKit" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">AsyncDisplayKit</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的使用</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">这个框架是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> facebook </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">团队开源的，它的使用代价有点大，因为它已经不是按照我们正常的</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">UIKit</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">框架来写了。由于这个框架就是建立在各种</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Display Node </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">上的，所以要使用该框架，那么就需要使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Display Node </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">层次结构替换视图层次结构和</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">/</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">或</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> Layer </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">树。但是这个框架还是值得尝试的，因为</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> AsyncDisplayKit </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">支持在非主线程执行之前只能在主线程才能执行的任务。这就能减轻主线程的工作量以执行其他操作，例如处理触摸事件，滑动事件。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">下面附一篇</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><a href="http://www.cocoachina.com/swift/20141124/10298.html" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">AsyncDisplayKit</a><a href="http://www.cocoachina.com/swift/20141124/10298.html" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">教程</a></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">当然，不管是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> YYText </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">还是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> AsyncDisplayKit</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，他们都有非常流畅的体验，对于复杂的列表来说都是神器。用好其中一种都可以解决大部分问题了，那么还有一部分问题来自于哪里呢？继续向下看。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><a href="https://github.com/rs/SDWebImage" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">SDWebImage</a></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">应该是使用最为广泛的图片库了吧。上面也提到了，我们正常的使用是没有大问题的，但是如果对性能要求比较高，或者要处理</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">gif</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">图，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">SD </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">难免会拖慢速度。特别是</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> gif </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">的内存暴增问题，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">SD </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">一直没有一个较好的解决方案。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><a href="https://github.com/ibireme/YYWebImage" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">YYWebImage</a></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">这个就是在列表优化时我推荐使用的网络图片库，在对性能要求比较高的情况下，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">YY </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">可以直接以</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> layer </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">作为图片的载体这样减少了相当的一部分资源消耗。具体在什么情况下使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">layer </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">什么情况下使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> imageView </span><a href="https://github.com/ibireme/YYWebImage/issues/47" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">戳这里</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">对于</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">gif</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">图，</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">YY </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">还提供了</span><a href="https://github.com/ibireme/YYWebImage/issues/50" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">分享</a><a href="https://github.com/ibireme/YYWebImage/issues/50" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">gif</a><a href="https://github.com/ibireme/YYWebImage/issues/50" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">的方案</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="font-style: normal; font-variant-caps: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0); font-weight: bold;"><font style="font-size: 14px;">小结</font></span></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">如果项目比较紧，我更推荐</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Courier; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">IB</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> + </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">基础的优化准则，既可以保证整体效率也不至于卡的太严重。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">如果项目已经到后期，并且有时间进行大量的优化。我倾向于使用</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">纯代码</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> + </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'PingFang SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">异步绘制，这一部分在苹果现在的多种屏幕尺寸上适配工作量并不小。但是效果却也是很明显的。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">•</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">如果想获得流畅的体验，但是有没有太多的时间去做优化，那就可以使用一些封装好的第三方库，比如</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><a href="https://github.com/ibireme/YYText" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">YYText</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">，</span><a href="https://github.com/facebook/AsyncDisplayKit" style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 238); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 238); text-decoration: underline;">AsyncDisplayKit</a><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Times; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);"> </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Songti SC'; -webkit-font-kerning: none; color: rgb(0, 0, 0); -webkit-text-stroke-width: 0px; -webkit-text-stroke-color: rgb(0, 0, 0);">。</span></font></div><div><br/></div><div><br/></div><hr/><h4><span style="font-size: 18px; color: rgb(4, 51, 255);">4.KVO、Notification、delegate 各自的优缺点，效率还有使用场景</span></h4><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">在开发ios应用的时候，我们会经常遇到一个常见的问题：在不过分耦合的前提下，controllers间怎么进行通信。在IOS应用不断的出现三种模式来实现这种通信：</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">1.委托delegation；</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">2.通知中心Notification Center；</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">3.键值观察key value observing，KVO</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">delegate的优势：</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">1.很严格的语法，所有能响应的时间必须在协议中有清晰的定义</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">2.因为有严格的语法，所以编译器能帮你检查是否实现了所有应该实现的方法，不容易遗忘和出错</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">3.使用delegate的时候，逻辑很清楚，控制流程可跟踪和识别</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">4.在一个controller中可以定义多个协议，每个协议有不同的delegate</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">5.没有第三方要求保持/监视通信过程，所以假如出了问题，那我们可以比较方便的定位错误代码。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">6.能够接受调用的协议方法的返回值，意味着delegate能够提供反馈信息给controller</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">delegate的缺点：</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">需要写的代码比较多</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">有一个“Notification Center”的概念，他是一个单例对象，允许当事件发生的时候通知一些对象，满足控制器与一个任意的对象进行通信的目的，这种模式的基本特征就是接收到在该controller中发生某种事件而产生的消息，controller用一个key（通知名称），这样对于controller是匿名的，其他的使用同样地key来注册了该通知的对象能对通知的事件作出反应。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">notification的优势：</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">1.不需要写多少代码，实现比较简单</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">2.一个对象发出的通知，多个对象能进行反应，一对多的方式实现很简单</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">缺点：</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">1.编译期不会接茬通知是否能被正确处理</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">2.释放注册的对象时候，需要在通知中心取消注册</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">3.调试的时候，程序的工作以及控制流程难跟踪</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">4.需要第三方来管理controller和观察者的联系</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">5.controller和观察者需要提前知道通知名称、UserInfo dictionary keys。如果这些没有在工作区间定义，那么会出现不同步的情况</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">6.通知发出后，发出通知的对象不能从观察者获得任何反馈。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">KVO</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">KVO是一个对象能观察另一个对象属性的值，前两种模式更适合一个controller和其他的对象进行通信，而KVO适合任何对象监听另一个对象的改变，这是一个对象与另外一个对象保持同步的一种方法。KVO只能对属性做出反应，不会用来对方法或者动作做出反应。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">优点：</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">1.提供一个简单地方法来实现两个对象的同步</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">2.能对非我们创建的对象做出反应</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">3.能够提供观察的属性的最新值和先前值</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">4.用keypaths 来观察属性，因此也可以观察嵌套对象</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">缺点：</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">1.观察的属性必须使用string来定义，因此编译器不会出现警告和检查</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">2.对属性的重构将导致观察不可用</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">3.复杂的“if”语句要求对象正在观察多个值，这是因为所有的观察都通过一个方法来指向</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">KVO有显著的使用场景，当你希望监视一个属性的时候，我们选用KVO</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">而notification和delegate有比较相似的用处，</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">当处理属性层的消息的事件时候，使用KVO，其他的尽量使用delegate，除非代码需要处理的东西确实很简单，那么用通知很方便</div><hr/><h4><span style="font-size: 18px; color: rgb(4, 51, 255);">5.如何手动通知 KVO</span></h4><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">重写Controller里面某个属性的setter方法，联动给View赋值，使用Controller监控Model里面某个值的变化，在controller的dealloc函数中用一行代码了结：removeObserver。</div><hr/><div><span style="font-size: 18px; color: rgb(4, 51, 255); font-family: 'PingFang SC'; font-variant-caps: normal; line-height: normal;">6.</span><span style="font-size: 18px; color: rgb(4, 51, 255); font-family: 'PingFang SC'; font-variant-caps: normal; line-height: normal;">Objective-C 中的copy方法 </span></div><div><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">对象的复制就是复制一个对象作为副本，他会开辟一块新的内存（堆内存）来存储副本对象，就像复制文件一样，即源对象和副本对象是两块不同的内存区域。对象要具备复制功能，必须实现&lt;NSCopying&gt;协议或者&lt;NSMutableCopying&gt;协议，常用的可复制对象有：NSNumber、NSString、NSMutableString、NSArray、NSMutableArray、NSDictionary、NSMutableDictionary</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">copy：产生对象的副本是不可变的</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">mutableCopy：产生的对象的副本是可变的</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">浅拷贝和深拷贝</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">      浅拷贝值复制对象本身，对象里的属性、包含的对象不做复制</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">      深拷贝则既复制对象本身，对象的属性也会复制一份</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">Foundation中支持复制的类，默认是浅复制</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">对象的自定义拷贝</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">    对象拥有复制特性，须实现NSCopying，NSMutableCopying协议，实现该协议的CopyWithZone：方法或MutableCopyWithZone：方法。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">浅拷贝实现</span></div><div style="box-sizing: border-box; padding: 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"></div><div style="box-sizing: border-box; padding: 1px 0px 0px; font-size: 12px; background-color: rgb(231, 229, 220); overflow-x: auto; overflow-y: hidden; text-align: left; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; padding: 0px 0px 0px 45px; font-size: 13px;"><div style="box-sizing: border-box; padding: 3px 8px 10px 10px; font-size: 9px; background-color: rgb(248, 248, 248); border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); border-right-width: 1px; border-right-style: solid; border-right-color: rgb(231, 229, 220);"><div style="font-size: 13px;"><span style="font-size: 13px; box-sizing: border-box; background-color: rgb(248, 248, 248); color: silver; font-family: 'PingFang SC'; font-stretch: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: normal;">[cpp]</span><span style="font-size: 13px; background-color: rgb(248, 248, 248); color: silver; font-family: 'PingFang SC'; font-stretch: normal; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;"> </span><a href="http://blog.csdn.net/jobtong/article/details/8453927#" style="font-size: 9px; box-sizing: border-box; background-color: rgb(248, 248, 248); color: rgb(202, 12, 22); font-family: 'PingFang SC'; font-stretch: normal; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; background-position: left top; background-repeat: no-repeat no-repeat;" title="view plain">view plain</a><span style="font-size: 13px; box-sizing: border-box; background-color: rgb(248, 248, 248); color: silver; font-family: 'PingFang SC'; font-stretch: normal; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;"> </span><a href="http://blog.csdn.net/jobtong/article/details/8453927#" style="font-size: 9px; box-sizing: border-box; background-color: rgb(248, 248, 248); color: rgb(202, 12, 22); font-family: 'PingFang SC'; font-stretch: normal; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; background-position: left top; background-repeat: no-repeat no-repeat;" title="copy">copy</a></div><div style="box-sizing: border-box; padding: 0px; left: 228px; top: 657px; z-index: 99; font-family: PingFang SC; font-size: 13px;"></div></div></div><ol start="1" style="box-sizing: border-box; padding: 0px; list-style: decimal; border-style: none solid none none; border-right-width: 1px; border-right-color: rgb(231, 229, 220); background-color: rgb(255, 255, 255); font-size: 13px;"><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(255, 255, 255); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">-（id）copyWithZone:(NSZone *)zone{  </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(248, 248, 248); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">             </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(255, 255, 255); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">           Person *person = [[[self Class]allocWithZone:zone]init];  </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(248, 248, 248); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">           </span><a href="http://p.name" style="box-sizing: border-box; border: none; background-color: rgb(248, 248, 248); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">p.name</a><span style="box-sizing: border-box; border: none; background-color: rgb(248, 248, 248); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;"> = _name;  </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(255, 255, 255); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">           p.age = _age;  </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(248, 248, 248); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">           </span><span style="box-sizing: border-box; border: none; background-color: rgb(248, 248, 248); font-size: 13px; color: rgb(0, 102, 153); font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 18px;">return</span><span style="box-sizing: border-box; border: none; background-color: rgb(248, 248, 248); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;"> person;  </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(255, 255, 255); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">       }  </span></li></ol></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">深拷贝的实现</span></div><div style="box-sizing: border-box; padding: 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"></div><div style="box-sizing: border-box; padding: 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"></div><div style="box-sizing: border-box; padding: 1px 0px 0px; font-size: 12px; background-color: rgb(231, 229, 220); overflow-x: auto; overflow-y: hidden; text-align: left; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; padding: 0px 0px 0px 45px; font-size: 13px;"><div style="box-sizing: border-box; padding: 3px 8px 10px 10px; font-size: 9px; background-color: rgb(248, 248, 248); border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); border-right-width: 1px; border-right-style: solid; border-right-color: rgb(231, 229, 220);"><div style="font-size: 13px;"><span style="font-size: 13px; box-sizing: border-box; background-color: rgb(248, 248, 248); color: silver; font-family: 'PingFang SC'; font-stretch: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: normal;">[cpp]</span><span style="font-size: 13px; background-color: rgb(248, 248, 248); color: silver; font-family: 'PingFang SC'; font-stretch: normal; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;"> </span><a href="http://blog.csdn.net/jobtong/article/details/8453927#" style="font-size: 9px; box-sizing: border-box; background-color: rgb(248, 248, 248); color: rgb(202, 12, 22); font-family: 'PingFang SC'; font-stretch: normal; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; background-position: left top; background-repeat: no-repeat no-repeat;" title="view plain">view plain</a><span style="font-size: 13px; box-sizing: border-box; background-color: rgb(248, 248, 248); color: silver; font-family: 'PingFang SC'; font-stretch: normal; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal;"> </span><a href="http://blog.csdn.net/jobtong/article/details/8453927#" style="font-size: 9px; box-sizing: border-box; background-color: rgb(248, 248, 248); color: rgb(202, 12, 22); font-family: 'PingFang SC'; font-stretch: normal; font-variant-caps: normal; font-variant-ligatures: normal; line-height: normal; background-position: left top; background-repeat: no-repeat no-repeat;" title="copy">copy</a></div><div style="box-sizing: border-box; padding: 0px; left: 228px; top: 898px; z-index: 99; font-family: PingFang SC; font-size: 13px;"></div></div></div><ol start="1" style="box-sizing: border-box; padding: 0px; list-style: decimal; border-style: none solid none none; border-right-width: 1px; border-right-color: rgb(231, 229, 220); background-color: rgb(255, 255, 255); font-size: 13px;"><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(255, 255, 255); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">-(</span><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(0, 102, 153); font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 18px;">void</span><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">)copyWithZone:(NSZone *)zone{  </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(248, 248, 248); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">            Person *person = [[[self Class]allocWithZone:zone]init];  </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(255, 255, 255); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">            </span><a href="http://person.name" style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">person.name</a><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;"> = [_name copy];  </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(248, 248, 248); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">            person.age = [_age copy];  </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(255, 255, 255); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">            </span><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(0, 102, 153); font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 18px;">return</span><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;"> person;  </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(248, 248, 248); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">              </span></li><li style="box-sizing: border-box; list-style: decimal; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); background-color: rgb(255, 255, 255); padding: 0px 3px 0px 10px !important;"><span style="box-sizing: border-box; border: none; background-color: rgb(255, 255, 255); font-size: 13px; color: black; font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 18px;">        }  </span></li></ol></div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">深浅拷贝和retain之间的关系</span></div><div style="box-sizing: border-box; padding: 0px; color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">   copy、mutableCopy和retain之间的关系</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">   Foundation中可复制的对象，当我们copy的是一个不可变的对象的时候，它的作用相当与retain（cocoa做的内存优化）</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">   当我们使用mutableCopy的时候，无论源对象是否可变，副本是可变的</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun; font-variant-caps: normal; font-variant-ligatures: normal;">    当我们copy的 是一个可变对象时，复本不可变</span></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><div style="color: rgb(69, 69, 69); font-size: 13px; font-family: 'PingFang SC';"></div><h4 style="color: rgb(47, 47, 47); font-size: 20px; box-sizing: border-box; font-family: -apple-system, 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-weight: bold; line-height: 1.7; text-rendering: optimizeLegibility; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></h4><hr/><h4><span style="font-size: 18px; color: rgb(4, 51, 255); font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal;">7.runtime 中，SEL 和 IMP 的区别</span></h4><div style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em; word-break: break-word !important;"><div style="font-size: 13px;"><span style="font-size: 13px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: 'PingFang SC'; font-variant-caps: normal; font-variant-ligatures: normal;">方法名 SEL – 表示该方法的名称；</span></div><div style="font-size: 13px;"><br style="font-family: PingFang SC; font-size: 13px; color: rgb(69, 69, 69);"/></div></div><div style="font-size: 16px; box-sizing: border-box; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em; word-break: break-word !important;"><span style="font-size: 16px; box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); word-break: break-word !important; color: rgb(47, 47, 47); font-family: -apple-system, 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">一个 types – 表示该方法参数的类型；</span></div><div style="font-size: 13px;"><div><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; word-break: break-word !important; color: rgb(47, 47, 47); font-family: -apple-system, 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">一个IMP     – 指向该方法的具体实现的函数指针，说白了IMP就是实现方法。</span></div></div><div style="font-size: 13px;"><hr/></div></div><h4><span style="font-size: 18px; color: rgb(4, 51, 255); font-family: -apple-system; font-weight: bold;">8.autoreleasepool 的使用场景和原理</span></h4><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 20px; color: rgb(47, 47, 47); font-family: -apple-system;">Autorelease Pool全名叫做NSAutoreleasePool，是OC中的一个类。autorelease pool并不是天生就有的，你需要手动的去创建它。一般地，在新建一个iphone项目的时候，xcode会自动地为你创建一个Autorelease Pool，这个pool就写在Main函数里面。在NSAutoreleasePool中包含了一个可变数组，用来存储被声明为autorelease的对象。当NSAutoreleasePool自身被销毁的时候，它会遍历这个数组，release数组中的每一个成员（注意，这里只是release，并没有直接销毁对象）。若成员的retain count 大于1，那么对象没有被销毁，造成内存泄露。默认的NSAutoreleasePool 只有一个，你可以在你的程序中创建NSAutoreleasePool，被标记为autorelease的对象会跟最近的NSAutoreleasePool匹配。可以嵌套使用NSAutoreleasePool。</span></div><h1 style="padding: 0px; border: 0px; text-rendering: optimizeLegibility;"><span style="border: 0px; text-rendering: optimizeLegibility; font-size: 24px; font-family: 'PT Serif', Georgia, 'Helvetica Neue', Arial, sans-serif; line-height: 1.2em; font-weight: normal;">Objective-C Autorelease Pool 的实现原理</span></h1><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">内存管理一直是学习 Objective-C 的重点和难点之一，尽管现在已经是 ARC 时代了，但是了解 Objective-C 的内存管理机制仍然是十分必要的。其中，弄清楚 autorelease 的原理更是重中之重，只有理解了 autorelease 的原理，我们才算是真正了解了 Objective-C 的内存管理机制。</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">注</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">：本文使用的 </span><a href="http://opensource.apple.com/tarballs/objc4/" style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); word-wrap: break-word; color: rgb(117, 21, 144); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">runtime</a><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;"> 源码是当前的最新版本 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5em;">objc4-646.tar.gz</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;"> 。</span></div><h2 style="padding: 0.8em 0px 0px; border: 0px; font-size: 1.5em; text-rendering: optimizeLegibility; background-image: url('file; %20color: %20rgb(34,%2034,%2034); %20letter-spacing: %20normal; %20orphans: %202; %20text-align: %20start; %20text-indent: %200px; %20text-transform: %20none; %20white-space: %20normal; %20widows: %202; %20word-spacing: %200px; %20-webkit-text-stroke-width: %200px; background-position: initial initial; background-repeat: initial initial;"><span style="border: 0px; font-size: 1.5em; text-rendering: optimizeLegibility; font-weight: normal;">autoreleased 对象什么时候释放</span></h2><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">autorelease 本质上就是延迟调用 release ，那 autoreleased 对象究竟会在什么时候释放呢？为了弄清楚这个问题，我们先来做一个小实验。这个小实验分 3 种场景进行，请你先自行思考在每种场景下的 console 输出，以加深理解。</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">注</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">：本实验的源码可以在这里 </span><a href="https://github.com/leichunfeng/AutoreleasePool" style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); word-wrap: break-word; color: rgb(117, 21, 144); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">AutoreleasePool</a><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;"> 找到。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">特别说明</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">：在苹果一些新的硬件设备上，本实验的结果已经不再成立，详细情况如下：</span></div><ul style="padding: 0px; border: 0px; font-size: 18.4px; list-style: disc; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">iPad 2</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 0px; font-size: 18.4px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: line-through;">iPad Air</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 0px; font-size: 18.4px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: line-through;">iPad Air 2</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 0px; font-size: 18.4px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: line-through;">iPad Pro</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">iPad Retina</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">iPhone 4s</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal;">iPhone 5</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 0px; font-size: 18.4px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: line-through;">iPhone 5s</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 0px; font-size: 18.4px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: line-through;">iPhone 6</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 0px; font-size: 18.4px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: line-through;">iPhone 6 Plus</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 0px; font-size: 18.4px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: line-through;">iPhone 6s</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 0px; font-size: 18.4px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; text-decoration: line-through;">iPhone 6s Plus</span></li></ul><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">4</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">5</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">6</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">7</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">8</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">9</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">11</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">12</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">13</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">14</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">15</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">16</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">17</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">18</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">19</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">20</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">21</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">22</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">23</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">24</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">25</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">26</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">27</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">28</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">29</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">30</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">31</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">32</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">34</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">__weak</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">NSString</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string_weak_</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">=</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">nil</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">viewDidLoad</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">super</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">viewDidLoad</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">];</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">// 场景 1</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">NSString</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">=</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">NSString</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">stringWithFormat</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">@&quot;leichunfeng&quot;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">];</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string_weak_</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">=</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">// 场景 2</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">//    @autoreleasepool {</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">//        NSString *string = [NSString stringWithFormat:@&quot;leichunfeng&quot;];</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">//        string_weak_ = string;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">//    }</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">// 场景 3</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">//    NSString *string = nil;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">//    @autoreleasepool {</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">//        string = [NSString stringWithFormat:@&quot;leichunfeng&quot;];</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">//        string_weak_ = string;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">//    }</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">NSLog</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">@&quot;string: %@&quot;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">,</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string_weak_</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">viewWillAppear:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">BOOL</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">animated</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">super</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">viewWillAppear</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">animated</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">];</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">NSLog</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">@&quot;string: %@&quot;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">,</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string_weak_</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">viewDidAppear:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">BOOL</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">animated</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">super</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">viewDidAppear</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">animated</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">];</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">NSLog</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">@&quot;string: %@&quot;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">,</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string_weak_</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">思考得怎么样了？相信在你心中已经有答案了。那么让我们一起来看看 console 输出：</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">4</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">5</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">6</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">7</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">8</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">9</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">11</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">12</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">13</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">14</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">// 场景 1</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2015</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">05</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">30</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">32</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">20.837</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33876</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1448343</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">]</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">leichunfeng</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2015</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">05</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">30</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">32</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">20.838</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33876</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1448343</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">]</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">leichunfeng</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2015</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">05</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">30</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">32</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">20.845</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33876</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1448343</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">]</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">null</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">// 场景 2</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2015</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">05</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">30</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">32</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">50.548</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33915</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1448912</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">]</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">null</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2015</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">05</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">30</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">32</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">50.549</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33915</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1448912</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">]</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">null</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2015</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">05</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">30</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">32</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">50.555</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33915</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1448912</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">]</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">null</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">// 场景 3</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2015</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">05</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">30</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">07.075</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33984</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1449418</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">]</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">leichunfeng</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2015</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">05</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">30</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">07.075</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33984</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1449418</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">]</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">null</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2015</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">05</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">30</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">07.094</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">[</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">33984</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1449418</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">]</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">string</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">:</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">null</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">跟你预想的结果有出入吗？Any way ，我们一起来分析下为什么会得到这样的结果。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">分析</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">：3 种场景下，我们都通过 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">[NSString stringWithFormat:@&quot;leichunfeng&quot;]</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 创建了一个 autoreleased 对象，这是我们实验的前提。并且，为了能够在 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewWillAppear</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 和 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewDidAppear</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">中继续访问这个对象，我们使用了一个全局的 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">__weak</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 变量 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string_weak_</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 来指向它。因为 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">__weak</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 变量有一个特性就是它不会影响所指向对象的生命周期，这里我们正是利用了这个特性。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">场景 1</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">：当使用 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">[NSString stringWithFormat:@&quot;leichunfeng&quot;]</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 创建一个对象时，这个对象的引用计数为 1 ，并且这个对象被系统自动添加到了当前的 autoreleasepool 中。当使用局部变量 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 指向这个对象时，这个对象的引用计数 +1 ，变成了 2 。因为在 ARC 下 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">NSString *string</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 本质上就是 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">__strong NSString *string</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 。所以在 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewDidLoad</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 方法返回前，这个对象是一直存在的，且引用计数为 2 。而当 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewDidLoad</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 方法返回时，局部变量 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 被回收，指向了 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">nil</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 。因此，其所指向对象的引用计数 -1 ，变成了 1 。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">而在 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewWillAppear</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 方法中，我们仍然可以打印出这个对象的值，说明这个对象并没有被释放。咦，这不科学吧？我读书少，你表骗我。不是一直都说当函数返回的时候，函数内部产生的对象就会被释放的吗？如果你这样想的话，那我只能说：骚年你太年经了。开个玩笑，我们继续。前面我们提到了，这个对象是一个 autoreleased 对象，autoreleased 对象是被添加到了当前最近的 autoreleasepool 中的，只有当这个 autoreleasepool 自身 drain 的时候，autoreleasepool 中的 autoreleased 对象才会被 release 。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">另外，我们注意到当在 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewDidAppear</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 中再打印这个对象的时候，对象的值变成了 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">nil</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> ，说明此时对象已经被释放了。因此，我们可以大胆地猜测一下，这个对象一定是在 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewWillAppear</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 和 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewDidAppear</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 方法之间的某个时候被释放了，并且是由于它所在的 autoreleasepool 被 drain 的时候释放的。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">你说什么就是什么咯？有本事你就证明给我看你妈是你妈。额，这个我真证明不了，不过上面的猜测我还是可以证明的，不信，你看！</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">在开始前，我先简单地说明一下原理，我们可以通过使用 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">lldb</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">watchpoint</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 命令来设置观察点，观察全局变量 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string_weak_</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的值的变化，</span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string_weak_</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 变量保存的就是我们创建的 autoreleased 对象的地址。在这里，我们再次利用了 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">__weak</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 变量的另外一个特性，就是当它所指向的对象被释放时，</span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">__weak</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 变量的值会被置为 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">nil</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 。了解了基本原理后，我们开始验证上面的猜测。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">我们先在第 35 行打一个断点，当程序运行到这个断点时，我们通过 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">lldb</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 命令 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">watchpoint set v string_weak_</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 设置观察点，观察 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string_weak_</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 变量的值的变化。如下图所示，我们将在 console 中看到类似的输出，说明我们已经成功地设置了一个观察点：</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><div><img src="面试   阿里P6一面_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">设置好观察点后，点击 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">Continue program execution</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 按钮，继续运行程序，我们将看到如下图所示的界面：</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><div><img src="面试   阿里P6一面_files/Image [2].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">我们先看 console 中的输出，注意到 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string_weak_</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 变量的值由 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">0x00007f9b886567d0</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 变成了 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">0x0000000000000000</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> ，也就是 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">nil</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 。说明此时它所指向的对象被释放了。另外，我们也可以注意到一个细节，那就是 console 中打印了两次对象的值，说明此时 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewWillAppear</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 也已经被调用了，而 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewDidAppear</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 还没有被调用。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">接着，我们来看看左侧的线程堆栈。我们看到了一个非常敏感的方法调用 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">-[NSAutoreleasePool release]</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> ，这个方法最终通过调用 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">AutoreleasePoolPage::pop(void *)</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 函数来负责对 autoreleasepool 中的 autoreleased 对象执行 release 操作。结合前面的分析，我们知道在 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewDidLoad</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 中创建的 autoreleased 对象在方法返回后引用计数为 1 ，所以经过这里的 release 操作后，这个对象的引用计数 -1 ，变成了 0 ，该 autoreleased 对象最终被释放，猜测得证。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">另外，值得一提的是，我们在代码中并没有手动添加 autoreleasepool ，那这个 autoreleasepool 究竟是哪里来的呢？看完后面的章节你就明白了。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">场景 2</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">：同理，当通过 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">[NSString stringWithFormat:@&quot;leichunfeng&quot;]</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 创建一个对象时，这个对象的引用计数为 1 。而当使用局部变量 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 指向这个对象时，这个对象的引用计数 +1 ，变成了 2 。而出了当前作用域时，局部变量 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 变成了 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">nil</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> ，所以其所指向对象的引用计数变成 1 。另外，我们知道当出了 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">@autoreleasepool {}</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的作用域时，当前 autoreleasepool 被 drain ，其中的 autoreleased 对象被 release 。所以这个对象的引用计数变成了 0 ，对象最终被释放。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">场景 3</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">：同理，当出了 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">@autoreleasepool {}</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的作用域时，其中的 autoreleased 对象被 release ，对象的引用计数变成 1 。当出了局部变量 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的作用域，即 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">viewDidLoad</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 方法返回时，</span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">string</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 指向了 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">nil</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> ，其所指向对象的引用计数变成 0 ，对象最终被释放。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">理解在这 3 种场景下，autoreleased 对象什么时候释放对我们理解 Objective-C 的内存管理机制非常有帮助。其中，场景 1 出现得最多，就是不需要我们手动添加 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">@autoreleasepool {}</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的情况，直接使用系统维护的 autoreleasepool ；场景 2 就是需要我们手动添加 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">@autoreleasepool {}</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的情况，手动干预 autoreleased 对象的释放时机；场景 3 是为了区别场景 2 而引入的，在这种场景下并不能达到出了 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">@autoreleasepool {}</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的作用域时 autoreleased 对象被释放的目的。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">PS</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">：请读者参考场景 1 的分析过程，使用 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">lldb</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 命令 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">watchpoint</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 自行验证下在场景 2 和场景 3 下 autoreleased 对象的释放时机，you should give it a try yourself 。</span></div><h2 style="padding: 0.8em 0px 0px; border: 0px; text-rendering: optimizeLegibility; background-image: url('file:///Applications/Evernote.app/Contents/Resources/common-editor-mac/file;%20%20color:%20%20rgb(34,%2034,%2034);%20%20letter-spacing:%20%20normal;%20%20orphans:%20%202;%20%20text-align:%20%20start;%20%20text-indent:%20%200px;%20%20text-transform:%20%20none;%20%20white-space:%20%20normal;%20%20widows:%20%202;%20%20word-spacing:%20%200px;%20%20-webkit-text-stroke-width:%20%200px;%20background-position:%20initial%20initial;%20background-repeat:%20initial%20initial;');"><span style="border: 0px; text-rendering: optimizeLegibility;"><font style="font-size: 18px;">AutoreleasePoolPage</font></span></h2><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">细心的读者应该已经有所察觉，我们在上面已经提到了 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">-[NSAutoreleasePool release]</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 方法最终是通过调用 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">AutoreleasePoolPage::pop(void *)</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 函数来负责对 autoreleasepool 中的 autoreleased 对象执行 release 操作的。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">那这里的 AutoreleasePoolPage 是什么东西呢？其实，autoreleasepool 是没有单独的内存结构的，它是通过以 AutoreleasePoolPage 为结点的</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">双向链表</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">来实现的。我们打开 runtime 的源码工程，在 </span><a href="http://NSObject.mm" style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">NSObject.mm</a><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 文件的第 438-932 行可以找到 autoreleasepool 的实现源码。通过阅读源码，我们可以知道：</span></div><ul style="padding: 0px; border: 0px; font-size: 18.4px; list-style: disc; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">每一个线程的 autoreleasepool 其实就是一个指针的堆栈；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">每一个指针代表一个需要 release 的对象或者 POOL_SENTINEL（哨兵对象，代表一个 autoreleasepool 的边界）；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">一个 pool token 就是这个 pool 所对应的 POOL_SENTINEL 的内存地址。当这个 pool 被 pop 的时候，所有内存地址在 pool token 之后的对象都会被 release ；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">这个堆栈被划分成了一个以 page 为结点的双向链表。pages 会在必要的时候动态地增加或删除；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Thread-local storage（线程局部存储）指向 hot page ，即最新添加的 autoreleased 对象所在的那个 page 。</span></li></ul><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">一个空的 AutoreleasePoolPage 的内存结构如下图所示：</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><div><img src="面试   阿里P6一面_files/Image [2].png" type="image/png" data-filename="Image.png"/><br/></div></div><ol style="padding: 0px; border: 0px; font-size: 18.4px; list-style: decimal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">magic</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 用来校验 AutoreleasePoolPage 的结构是否完整；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">next</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 指向最新添加的 autoreleased 对象的下一个位置，初始化时指向 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">begin()</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> ；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">thread</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 指向当前线程；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">parent</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 指向父结点，第一个结点的 parent 值为 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">nil</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> ；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">child</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 指向子结点，最后一个结点的 child 值为 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">nil</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> ；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">depth</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 代表深度，从 0 开始，往后递增 1；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">hiwat</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 代表 high water mark 。</span></li></ol><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">另外，当 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">next == begin()</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 时，表示 AutoreleasePoolPage 为空；当 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">next == end()</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 时，表示 AutoreleasePoolPage 已满。</span></div><h3 style="padding: 0px; border: 0px; font-size: 1.3em; text-rendering: optimizeLegibility; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><span style="border: 0px; font-size: 1.3em; text-rendering: optimizeLegibility; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, 'Helvetica Neue', Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Autorelease Pool Blocks</span></h3><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">我们使用 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">clang -rewrite-objc</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 命令将下面的 Objective-C 代码重写成 C++ 代码：</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">@autoreleasepool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">将会得到以下输出结果（只保留了相关代码）：</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">4</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">5</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">6</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">7</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">8</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">9</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">11</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">12</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">extern</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">&quot;C&quot;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(211, 54, 130); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">__declspec</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">dllimport</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">objc_autoreleasePoolPush</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">extern</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">&quot;C&quot;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(211, 54, 130); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">__declspec</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">dllimport</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">objc_autoreleasePoolPop</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">struct</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">__AtAutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">  </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">__AtAutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">()</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">atautoreleasepoolobj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">=</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">objc_autoreleasePoolPush</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">();}</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">  </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">~</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">__AtAutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">()</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">objc_autoreleasePoolPop</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">atautoreleasepoolobj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);}</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">  </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">atautoreleasepoolobj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">};</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">/* @autoreleasepool */</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">__AtAutoreleasePool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">__autoreleasepool</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">不得不说，苹果对 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">@autoreleasepool {}</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的实现真的是非常巧妙，真正可以称得上是代码的艺术。苹果通过声明一个 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">__AtAutoreleasePool</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 类型的局部变量 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">__autoreleasepool</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 来实现 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">@autoreleasepool {}</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 。当声明 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">__autoreleasepool</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 变量时，构造函数 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">__AtAutoreleasePool()</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">被调用，即执行 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">atautoreleasepoolobj = objc_autoreleasePoolPush();</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> ；当出了当前作用域时，析构函数 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">~__AtAutoreleasePool()</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 被调用，即执行 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">objc_autoreleasePoolPop(atautoreleasepoolobj);</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 。也就是说 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">@autoreleasepool {}</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的实现代码可以进一步简化如下：</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">4</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">5</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">/* @autoreleasepool */</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">atautoreleasepoolobj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">=</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">objc_autoreleasePoolPush</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">();</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">// 用户代码，所有接收到 autorelease 消息的对象会被添加到这个 autoreleasepool 中</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">objc_autoreleasePoolPop</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">atautoreleasepoolobj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">因此，单个 autoreleasepool 的运行过程可以简单地理解为 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">objc_autoreleasePoolPush()</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">、</span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">[对象 autorelease]</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 和 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">objc_autoreleasePoolPop(void *)</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 三个过程。</span></div><h3 style="padding: 0px; border: 0px; font-size: 1.3em; text-rendering: optimizeLegibility; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><span style="border: 0px; font-size: 1.3em; text-rendering: optimizeLegibility; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, 'Helvetica Neue', Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">push 操作</span></h3><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">上面提到的 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">objc_autoreleasePoolPush()</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 函数本质上就是调用的 AutoreleasePoolPage 的 push 函数。</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">4</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">5</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">6</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">objc_autoreleasePoolPush</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">if</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">UseGC</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">nil</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePoolPage</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">::</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">push</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">();</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">因此，我们接下来看看 AutoreleasePoolPage 的 push 函数的作用和执行过程。一个 push 操作其实就是创建一个新的 autoreleasepool ，对应 AutoreleasePoolPage 的具体实现就是往 AutoreleasePoolPage 中的 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">next</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 位置插入一个 POOL_SENTINEL ，并且返回插入的 POOL_SENTINEL 的内存地址。这个地址也就是我们前面提到的 pool token ，在执行 pop 操作的时候作为函数的入参。</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">4</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">5</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">6</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">static</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(211, 54, 130); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">inline</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">push</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">()</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">id</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">dest</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">=</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">autoreleaseFast</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">POOL_SENTINEL</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">assert</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">dest</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">==</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">POOL_SENTINEL</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">dest</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">push 函数通过调用 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">autoreleaseFast</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 函数来执行具体的插入操作。</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">4</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">5</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">6</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">7</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">8</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">9</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">11</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">static</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(211, 54, 130); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">inline</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">id</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">autoreleaseFast</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">id</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">obj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePoolPage</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">page</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">=</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">hotPage</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">();</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">if</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">page</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">&amp;&amp;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">!</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">page</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-&gt;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">full</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">())</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">        </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">page</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-&gt;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">add</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">obj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">else</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">if</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">page</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">        </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">autoreleaseFullPage</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">obj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">,</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">page</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">else</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">        </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">autoreleaseNoPage</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">obj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">autoreleaseFast</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 函数在执行一个具体的插入操作时，分别对三种情况进行了不同的处理：</span></div><ol style="padding: 0px; border: 0px; font-size: 18.4px; list-style: decimal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">当前 page 存在且没有满时，直接将对象添加到当前 page 中，即 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">next</span><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 指向的位置；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">当前 page 存在且已满时，创建一个新的 page ，并将对象添加到新创建的 page 中；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">当前 page 不存在时，即还没有 page 时，创建第一个 page ，并将对象添加到新创建的 page 中。</span></li></ol><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">每调用一次 push 操作就会创建一个新的 autoreleasepool ，即往 AutoreleasePoolPage 中插入一个 POOL_SENTINEL ，并且返回插入的 POOL_SENTINEL 的内存地址。</span></div><h3 style="padding: 0px; border: 0px; font-size: 1.3em; text-rendering: optimizeLegibility; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><span style="border: 0px; font-size: 1.3em; text-rendering: optimizeLegibility; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, 'Helvetica Neue', Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">autorelease 操作</span></h3><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">通过 </span><a href="http://NSObject.mm" style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">NSObject.mm</a><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 源文件，我们可以找到 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">-autorelease</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 方法的实现：</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">id</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">autorelease</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">((</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">id</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(133, 153, 0); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">self</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-&gt;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">rootAutorelease</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">();</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">通过查看 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">((id)self)-&gt;rootAutorelease()</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的方法调用，我们发现最终调用的就是 AutoreleasePoolPage 的 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">autorelease</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 函数。</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">4</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">5</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">6</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">7</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">__attribute__</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">((</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">noinline</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">,</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">used</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">))</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">id</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">objc_object</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">::</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">rootAutorelease2</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">()</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">assert</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">!</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">isTaggedPointer</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">());</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePoolPage</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">::</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">autorelease</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">((</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">id</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">this</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">AutoreleasePoolPage 的 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">autorelease</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 函数的实现对我们来说就比较容量理解了，它跟 push 操作的实现非常相似。只不过 push 操作插入的是一个 POOL_SENTINEL ，而 autorelease 操作插入的是一个具体的 autoreleased 对象。</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">4</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">5</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">6</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">7</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">8</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">static</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(211, 54, 130); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">inline</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">id</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">autorelease</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">id</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">obj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">assert</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">obj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">assert</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">!</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">obj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">-&gt;</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">isTaggedPointer</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">());</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">id</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">dest</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">__unused</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">=</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">autoreleaseFast</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">obj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">assert</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">!</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">dest</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">  </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">||</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">  </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">dest</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">==</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">obj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">obj</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><h3 style="padding: 0px; border: 0px; font-size: 1.3em; text-rendering: optimizeLegibility; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><span style="border: 0px; font-size: 1.3em; text-rendering: optimizeLegibility; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, 'Helvetica Neue', Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">pop 操作</span></h3><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">同理，前面提到的 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">objc_autoreleasePoolPop(void *)</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 函数本质上也是调用的 AutoreleasePoolPage 的 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">pop</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 函数。</span></div><div style="padding: 0px; font-size: 18.4px; background-color: rgb(0, 43, 54); overflow-y: hidden; overflow-x: auto; border: 1px solid rgb(5, 35, 43) !important; background-position: initial initial; background-repeat: initial initial;"><div><br/></div><table style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline; border-collapse: collapse; border-spacing: 0px;"><colgroup><col></col><col></col></colgroup><tbody style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><tr style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="border-top-style: none; border-bottom-style: none; border-left-style: none; font-size: 13px; vertical-align: baseline; box-shadow: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; text-align: right; text-shadow: rgb(2, 16, 20) 0px -1px; padding: 0.8em !important; border-right-width: 1px !important; border-right-style: solid !important; border-right-color: rgb(0, 35, 44) !important; background-image: url(file:///images/noise.png?1415515498) !important; background-color: rgb(7, 54, 66) !important; background-position: left top !important; background-repeat: initial initial !important;"><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">1</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">2</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">3</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">4</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">5</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">6</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">7</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">8</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">9</span></div><div><span style="border: 0px; font-size: 13px; background-color: rgb(7, 54, 66); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">10</span></div><div><br/></div></div></td><td style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: middle; text-align: left;"><div style="padding: 0px; border: none; font-size: 13px; vertical-align: baseline; box-shadow: none; background-image: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow: auto; background-position: initial initial; background-repeat: initial initial;"><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">objc_autoreleasePoolPop</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(42, 161, 152); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">void</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">*</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">ctxt</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">{</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">if</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">UseGC</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">// fixme </span><a href="rdar://9167170" style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(88, 110, 117); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">rdar://9167170</a></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">if</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">!</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">ctxt</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">)</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;"> </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(203, 75, 22); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">return</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">;</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">    </span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">AutoreleasePoolPage</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">::</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">pop</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">(</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(38, 139, 210); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">ctxt</span><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">);</span></div><div><span style="border: 0px; font-size: 13px; overflow-y: hidden; overflow-x: auto; background-color: rgb(0, 0, 0); color: rgb(147, 161, 161); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; line-height: 1.45em;">}</span></div></div></td></tr></tbody></table><div><br/></div></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">pop 函数的入参就是 push 函数的返回值，也就是 POOL_SENTINEL 的内存地址，即 pool token 。当执行 pop 操作时，内存地址在 pool token 之后的所有 autoreleased 对象都会被 release 。直到 pool token 所在 page 的 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">next</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 指向 pool token 为止。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">下面是某个线程的 autoreleasepool 堆栈的内存结构图，在这个 autoreleasepool 堆栈中总共有两个 POOL_SENTINEL ，即有两个 autoreleasepool 。该堆栈由三个 AutoreleasePoolPage 结点组成，第一个 AutoreleasePoolPage 结点为 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">coldPage()</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> ，最后一个 AutoreleasePoolPage 结点为 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">hotPage()</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 。其中，前两个结点已经满了，最后一个结点中保存了最新添加的 autoreleased 对象 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">objr3</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的内存地址。</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">此时，如果执行 </span><span style="border: 1px solid rgb(221, 221, 221); font-size: 0.8em; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-top-left-radius: 0.4em; border-top-right-radius: 0.4em; border-bottom-right-radius: 0.4em; border-bottom-left-radius: 0.4em; color: rgb(85, 85, 85); font-family: Menlo, Monaco, 'Andale Mono', 'lucida console', 'Courier New', monospace; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">pop(token1)</span><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 操作，那么该 autoreleasepool 堆栈的内存结构将会变成如下图所示：</span></div><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><div><img src="面试   阿里P6一面_files/Image [3].png" type="image/png" data-filename="Image.png"/><br/></div></div><h2 style="padding: 0.8em 0px 0px; border: 0px; font-size: 1.5em; text-rendering: optimizeLegibility; background-image: url('file; %20color: %20rgb(34,%2034,%2034); %20letter-spacing: %20normal; %20orphans: %202; %20text-align: %20start; %20text-indent: %200px; %20text-transform: %20none; %20white-space: %20normal; %20widows: %202; %20word-spacing: %200px; %20-webkit-text-stroke-width: %200px; background-position: initial initial; background-repeat: initial initial;"><span style="border: 0px; font-size: 1.5em; text-rendering: optimizeLegibility; background-image: url('file; %20color: %20rgb(34,%2034,%2034); %20letter-spacing: %20normal; %20orphans: %202; %20text-align: %20start; %20text-indent: %200px; %20text-transform: %20none; %20white-space: %20normal; %20widows: %202; %20word-spacing: %200px; %20-webkit-text-stroke-width: %200px; background-position: initial initial; background-repeat: initial initial; font-family: 'PT Serif', Georgia, 'Helvetica Neue', Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">NSThread、NSRunLoop 和 NSAutoreleasePool</span></h2><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">根据苹果官方文档中对 </span><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/index.html#//apple_ref/doc/constant_group/Run_Loop_Modes" style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); word-wrap: break-word; color: rgb(117, 21, 144); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">NSRunLoop</a><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的描述，我们可以知道每一个线程，包括主线程，都会拥有一个专属的 NSRunLoop 对象，并且会在有需要的时候自动创建。</span></div><blockquote style="padding: 0px 0px 0px 1.5em; border-width: 0px 0px 0px 4px; border-left-style: solid; border-left-color: rgba(170, 170, 170, 0.498039); font-size: 1.2em; quotes: none; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><div style="padding: 0px; border: 0px; font-size: 22.08px; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 22.08px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: -apple-system; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">Each NSThread object, including the application’s main thread, has an NSRunLoop object automatically created for it as needed.</span></div></blockquote><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">同样的，根据苹果官方文档中对 </span><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/index.html#//apple_ref/doc/uid/TP40003623" style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); word-wrap: break-word; color: rgb(117, 21, 144); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">NSAutoreleasePool</a><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的描述，我们可知，在主线程的 NSRunLoop 对象（在系统级别的其他线程中应该也是如此，比如通过 dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) 获取到的线程）的每个 event loop 开始前，系统会自动创建一个 autoreleasepool ，并在 event loop 结束时 drain 。我们上面提到的场景 1 中创建的 autoreleased 对象就是被系统添加到了这个自动创建的 autoreleasepool 中，并在这个 autoreleasepool 被 drain 时得到释放。</span></div><blockquote style="padding: 0px 0px 0px 1.5em; border-width: 0px 0px 0px 4px; border-left-style: solid; border-left-color: rgba(170, 170, 170, 0.498039); font-size: 1.2em; quotes: none; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><div style="padding: 0px; border: 0px; font-size: 22.08px; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 22.08px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: -apple-system; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">The Application Kit creates an autorelease pool on the main thread at the beginning of every cycle of the event loop, and drains it at the end, thereby releasing any autoreleased objects generated while processing an event.</span></div></blockquote><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">另外，NSAutoreleasePool 中还提到，每一个线程都会维护自己的 autoreleasepool 堆栈。换句话说 autoreleasepool 是与线程紧密相关的，每一个 autoreleasepool 只对应一个线程。</span></div><blockquote style="padding: 0px 0px 0px 1.5em; border-width: 0px 0px 0px 4px; border-left-style: solid; border-left-color: rgba(170, 170, 170, 0.498039); font-size: 1.2em; quotes: none; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><div style="padding: 0px; border: 0px; font-size: 22.08px; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 22.08px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: -apple-system; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5em;">Each thread (including the main thread) maintains its own stack of NSAutoreleasePool objects.</span></div></blockquote><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">弄清楚 NSThread、NSRunLoop 和 NSAutoreleasePool 三者之间的关系可以帮助我们从整体上了解 Objective-C 的内存管理机制，清楚系统在背后到底为我们做了些什么，理解整个运行机制等。</span></div><h2 style="padding: 0.8em 0px 0px; border: 0px; font-size: 1.5em; text-rendering: optimizeLegibility; background-image: url('file; %20color: %20rgb(34,%2034,%2034); %20letter-spacing: %20normal; %20orphans: %202; %20text-align: %20start; %20text-indent: %200px; %20text-transform: %20none; %20white-space: %20normal; %20widows: %202; %20word-spacing: %200px; %20-webkit-text-stroke-width: %200px; background-position: initial initial; background-repeat: initial initial;"><span style="border: 0px; font-size: 1.5em; text-rendering: optimizeLegibility; background-image: url('file; %20color: %20rgb(34,%2034,%2034); %20letter-spacing: %20normal; %20orphans: %202; %20text-align: %20start; %20text-indent: %200px; %20text-transform: %20none; %20white-space: %20normal; %20widows: %202; %20word-spacing: %200px; %20-webkit-text-stroke-width: %200px; background-position: initial initial; background-repeat: initial initial; font-family: 'PT Serif', Georgia, 'Helvetica Neue', Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">总结</span></h2><div style="padding: 0px; border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); margin-top: 1em; margin-bottom: 1em;"><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">看到这里，相信你应该对 Objective-C 的内存管理机制有了更进一步的认识。通常情况下，我们是不需要手动添加 autoreleasepool 的，使用线程自动维护的 autoreleasepool 就好了。根据苹果官方文档中对 </span><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html#//apple_ref/doc/uid/20000047-CJBFBEDI" style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); word-wrap: break-word; color: rgb(117, 21, 144); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Using Autorelease Pool Blocks</a><span style="border: 0px; font-size: 18.4px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248); color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> 的描述，我们知道在下面三种情况下是需要我们手动添加 autoreleasepool 的：</span></div><ol style="padding: 0px; border: 0px; font-size: 18.4px; list-style: decimal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">如果你编写的程序不是基于 UI 框架的，比如说命令行工具；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">如果你编写的循环中创建了大量的临时对象；</span></li><li style="padding: 0px; border: 0px; font-size: 18.4px; vertical-align: baseline;"><span style="background-color: rgb(248, 248, 248); font-size: 18.4px; color: rgb(34, 34, 34); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">如果你创建了一个辅助线程。</span></li></ol><div style="orphans: 2; widows: 2;"><div><br/></div></div><div style="orphans: 2; widows: 2;"><hr/></div><div style="orphans: 2; widows: 2;"><span style="orphans: 2; widows: 2; font-size: 18.399999618530273px; color: rgb(4, 51, 255); font-family: 'PT Serif', Georgia, Times, 'Times New Roman', serif; font-weight: bold;">9.</span><span style="orphans: 2; widows: 2; font-size: 20px; color: rgb(4, 51, 255); font-family: -apple-system, 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif; font-weight: bold;">RunLoop 的实现原理和数据结构，什么时候会用到</span></div><div style="orphans: 2; widows: 2;"><div><br style="font-weight: bold; font-family: PT Serif; font-size: 18px; color: rgb(34, 34, 34);"/></div></div><div><span style="font-family: -apple-system; font-weight: bold;">答案一：</span></div><div><span style="font-size: 13px; font-family: -apple-system; font-weight: bold;">Run loops是线程的基础架构部分。一个run loop就是一个事件处理循环，用来不停的调配工作以及处理输入事件。使用run loop的目的是使你的线程在有工作的时候工作，没有的时候休眠。</span></div><div><span style="font-size: 13px; font-family: -apple-system; font-weight: bold;">Run loop的管理并不完全是自动的。你仍必须设计你的线程代码以在适当的时候启动run loop并正确响应输入事件。Cocoa和CoreFundation都提供了run loop对象方便配置和管理线程的run loop。你创建的程序不需要显示的创建run loop；每个线程，包括程序的主线程（main thread）都有与之相应的run loop对象。但是，自己创建的次线程是需要手动运行run loop的。在carbon和cocoa程序中，程序启动时，主线程会自行创建并运行run loop。</span></div><div><span style="font-size: 13px; font-family: -apple-system; font-weight: bold;">接下来的部分将会详细介绍run loop以及如何为你的程序管理run loop。关于run loop对象可以参阅sdk文档。</span></div><div><span style="font-size: 13px; font-family: -apple-system; font-weight: bold;">解析Run Loop</span></div><div><span style="font-size: 13px; font-family: -apple-system; font-weight: bold;">run loop，顾名思义，就是一个循环，你的线程在这里开始，并运行事件处理程序来响应输入事件。你的代码要有实现循环部分的控制语句，换言之就是要有while或for语句。在run loop中，使用run loop对象来运行事件处理代码：响应接收到的事件，启动已经安装的处理程序。</span></div><div><span style="font-size: 13px; font-family: -apple-system; font-weight: bold;">Run loop处理的输入事件有两种不同的来源：输入源（input source）和定时源（timer source）。输入源传递异步消息，通常来自于其他线程或者程序。定时源则传递同步消息，在特定时间或者一定的时间间隔发生。两种源的处理都使用程序的某一特定处理路径。</span></div><div><span style="font-size: 13px; font-family: -apple-system; font-weight: bold;">图1－1显示了run loop的结构以及各种输入源。输入源传递异步消息给相应的处理程序，并调用runUntilDate：方法退出。定时源则直接传递消息给处理程序，但并不会退出run loop。</span></div><div><br/></div><div><br/></div><div>参考答案二：</div><div><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loops是线程的基础架构部分。一个run loop就是一个事件处理循环，用来不停的调配工作以及处理输入事件。使用run loop的目的是使你的线程在有工作的时候工作，没有的时候休眠。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loop的管理并不完全是自动的。你仍必须设计你的线程代码以在适当的时候启动run loop并正确响应输入事件。Cocoa和CoreFundation都提供了run loop对象方便配置和管理线程的run loop。你创建的程序不需要显示的创建run loop；每个线程，包括程序的主线程（main thread）都有与之相应的run loop对象。但是，自己创建的次线程是需要手动运行run loop的。在carbon和cocoa程序中，程序启动时，主线程会自行创建并运行run loop。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">接下来的部分将会详细介绍run loop以及如何为你的程序管理run loop。关于run loop对象可以参阅sdk文档。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">解析Run Loop</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">run loop，顾名思义，就是一个循环，你的线程在这里开始，并运行事件处理程序来响应输入事件。你的代码要有实现循环部分的控制语句，换言之就是要有while或for语句。在run loop中，使用run loop对象来运行事件处理代码：响应接收到的事件，启动已经安装的处理程序。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loop处理的输入事件有两种不同的来源：输入源（input source）和定时源（timer source）。输入源传递异步消息，通常来自于其他线程或者程序。定时源则传递同步消息，在特定时间或者一定的时间间隔发生。两种源的处理都使用程序的某一特定处理路径。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">图1－1显示了run loop的结构以及各种输入源。输入</span><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">源传递异步消</span><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">息给相应的处理程序，并调用runUntilDate：方法退出。定时源则直接传递消息给处理程序，但并不会退出run loop。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><img src="面试   阿里P6一面_files/Image [4].png" type="image/png" data-filename="Image.png"/><br/></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">                       </span><span style="box-sizing: border-box; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;"> 图1－1 run loop结构和几种源</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">除了处理输入源，run loop也会生成关于run loop行为的notification。注册的run－loop 观察者可以收到这些notification，并做相应的处理。可以使用Core Foundation在你的线程注册run－loop观察者。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">下面介绍run loop的组成，以及其运行的模式。同时也提及在处理程序中不同时间发送不同的notification。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run Loop Modes</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loop模式是所有要监视的输入源和定时源以及要通知的注册观察者的集合。每次运行run loop都会指定其运行在哪个模式下。以后，只有相应的源会被监视并允许接收他们传递的消息。（类似的，只有相应的观察者会收到通知）。其他模式关联的源只有在run loop运行在其模式下才会运行，否则处于暂停状态。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通常代码中通过指定名字来确定模式。Cocoa和core foundation定义了默认的以及一系列常用的模式，都是用字符串来标识。当然你也可以指定字符串来自定义模式。虽然你可以给模式指定任何名字，但是所有的模式内容都是相同的。你必须添加输入源，定时器或者run loop观察者到你定义的模式中。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通过指定模式可以使得run loop在某一阶段只关注感兴趣的源。大多数时候，run loop都是运行在系统定义的默认模式。但是模态面板（modal panel）可以运行在 “模态”模式下。在这种模式下，只有和模态面板相关的源可以传递消息给线程。对于次线程，可以使用自定义模式处理时间优先的操作，即屏蔽优先级低的源传递消息。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Note：模式区分基于事件的源而非事件的种类。例如，你不可以使用模式只选择处理鼠标按下或者键盘事件。你可以使用模式监听端口，暂停定时器或者其他对源或者run loop观察者的处理，只要他们在当前模式下处于监听状态。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">表1－1列出了cocoa和Core Foundation预先定义的模式。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><img src="面试   阿里P6一面_files/Image [5].png" type="image/png" data-filename="Image.png"/><br/></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">　　　　　　　　　　　　　</span><span style="box-sizing: border-box; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">　表1－1</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">输入源</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">输入源向线程发送异步消息。消息来源取决于输入源的种类：基于端口的输入源和自定义输入源。基于端口的源监听程序相应的端口，而自定义输入源则关注自定义的消息。至于run loop，它不关心输入源的种类。系统会去实现两种源供你使用。两类输入源的区别在于如何显示的：基于端口的源由内核自动发送，而自定义的则需要人工从其他线程发送。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">当你创建输入源，你需要将其分配给run loop中的一个或多个模式。模式只会在特定事件影响监听的源。大多数情况下，run loop运行在默认模式下，但是你也可以使其运行在自定义模式。若某一源在当前模式下不被监听，那么任何其生成的消息只有当run loop运行在其关联的模式下才会被传递。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">下面讨论这几种输入源。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><a href="http://www.cnblogs.com/scorpiozj/" style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); outline: none; color: rgb(38, 112, 154); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">http://www.cnblogs.com/scorpiozj/</a></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">基于端口的源：</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">cocoa和core foundation为使用端口相关的对象和函数创建的基于端口的源提供了内在支持。Cocoa中你从不需要直接创建输入源。你只需要简单的创建端口对象，并使用NSPort的方法将端口对象加入到run loop。端口对象会处理创建以及配置输入源。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">在core foundation，你必须手动的创建端口和源，你都可以使用端口类型（CFMachPortRef，CFMessagePortRef，CFSocketRef）来创建。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">更多例子可以看 配置基于端口的源。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">自定义输入源：</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">在Core Foundation程序中，必须使用CFRunLoopSourceRef类型相关的函数来创建自定义输入源，接着使用回调函数来配置输入源。Core Fundation会在恰当的时候调用回调函数，处理输入事件以及清理源。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">除了定义如何处理消息，你也必须定义源的消息传递机制——它运行在单独的进程，并负责传递数据给源和通知源处理数据。消息传递机制的定义取决于你，但最好不要过于复杂。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">关于创建自定义输入源的例子，见 定义自定义输入源。关于自定义输入源的信息参见CFRunLoopSource。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Cocoa Perform Selector Sources：</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">除了基于端口的源，Cocoa提供了可以在任一线程执行函数（perform selector）的输入源。和基于端口的源一样，perform selector请求会在目标线程上序列化，减缓许多在单个线程上容易引起的同步问题。而和基于端口的源不同的是，perform selector执行完后会自动清除出run loop。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">当perform selector在其它线程中执行时，目标线程须有一活动中的run loop。对于你创建的线程而言，这意味着线程直到你显示的开始run loop否则处于等待状态。然而，由于主线程自己启动run loop，在程序调用applicationDidFinishlaunching：的时候你会遇到线程调用的问题。因为Run loop通过每次循环来处理所有排列的perform selector调用，而不时通过每次的循环迭代来处理perform selector。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">表1－2列出了NSObject可以在其它线程使用的perform selector。由于这些方法时定义在NSObject的，你可以在包括POSIX的所有线程中使用只要你有objc对象的访问权。注意这些方法实际上并没有创建新的线程以运行perform selector。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><img src="面试   阿里P6一面_files/Image [6].png" type="image/png" data-filename="Image.png"/><br/></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">　　　　　　　　　　　　　　　　　　　　　　</span><span style="box-sizing: border-box; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">表1－2</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">定时源</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">定时源在预设的时间点同步地传递消息。定时器时线程通知自己做某事的一种方法。例如，搜索控件可以使用定时器，当用户连续输入的时间超过一定时间时，就开始一次搜索。这样，用户就可以有足够的时间来输入想要搜索的关键字。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">尽管定时器和时间有关，但它并不是实时的。和输入源一样，定时器也是和run loop的运行模式相关联的。如果定时器所在的模式未被run loop监视，那么定时器将不会开始直到run loop运行在相应的模式下。类似的，如果定时器在run loop处理某一事件时开始，定时器会一直等待直到下次run loop开始相应的处理程序。如果run loop不再运行，那定时器也将永远不开始。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">你可以选择定时器工作一次还是定时工作。如果定时工作，定时器会基于安排好的时间而非实际时间，自动的开始。举个例子，定时器在某一特定时间开始并设置5秒重复，那么定时器会在那个特定时间后5秒启动，即使在那个特定时间定时器延时启动了。如果定时器延迟到接下来设定的一个会多个5秒，定时器在这些时间段中也只会启动一次，在此之后，正常运行。（假设定时器在时间1，5，9。。。运行，如果最初延迟到7才启动，那还是从9，13，。。。开始）。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run Loop观察者</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">源是同步或异步的传递消息，而run loop观察者则是在运行run loop的时候在特定的时候开始。你可以使用run loop观察者来为某一特定事件或是进入休眠的线程做准备。你可以将观察者将以下事件关联：</span></div><ul style="box-sizing: border-box; padding: 0px; list-style: disc; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loop入口</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loop将要开始定时</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loop将要处理输入源</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loop将要休眠</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loop被唤醒但又在执行唤醒事件前</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loop终止</span></li></ul><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">你可以给cocoa和carbon程序随意添加观察者，但是如果你要定义观察者的话就只能使用core fundation。使用CFRunLoopObserverRed类型来创建观察者实例，它会追踪你自定义的回调函数以及其它你感兴趣的地方。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">和定时器类似，观察者可以只用一次或循环使用。若只用一次，那在结束的时候会移除run loop，而循环的观察者则不会。你需要制定观察者是一次／多次使用。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">消息的run loop顺序</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">每次启动，run loop会自动处理之前未处理的消息，并通知观察者。具体的顺序，如下：</span></div><ol style="box-sizing: border-box; padding: 0px; list-style: decimal; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通知观察者，run loop启动</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通知观察者任何即将要开始的定时器</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通知观察者任何非基于端口的源即将启动</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">启动任何准备好的非基于端口的源</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">如果基于端口的源准备好并处于等待状态，立即启动；并进入步骤9。</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通知观察者线程进入休眠</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">将线程之于休眠直到任一下面的事件发生</span></li></ol><ul style="box-sizing: border-box; padding: 0px; list-style: disc; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">某一事件到达基于端口的源</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">定时器启动</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">设置了run loop的终止时间</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">run loop唤醒</span></li></ul><ol style="box-sizing: border-box; padding: 0px; list-style: decimal; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通知观察者线程将被唤醒。</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">处理未处理的事件</span></li></ol><ul style="box-sizing: border-box; padding: 0px; list-style: disc; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">如果用户定义的定时器启动，处理定时事件并重启run loop。进入步骤2</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">如果输入源启动，传递相应的消息</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">run loop唤醒但未终止，重启。进入步骤2</span></li></ul><ol style="box-sizing: border-box; padding: 0px; list-style: decimal; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通知观察者run loop结束。</span></li></ol><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">（标号应该连续，不知道怎么改）</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">因为观察者的消息传递是在相应的事件发生之前，所以两者之间可能存在误差。如果需要精确时间控制，你可以使用休眠和唤醒通知以此来校对实际发生的事件。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">因为定时器和其它周期性事件那是在run loop运行后才启动，撤销run loop也会终止消息传递。典型的例子就是鼠标路径追踪。因为你的代码直接获取到消息而不是经由程序传递，从而不会在实际的时间开始而须使得鼠标追踪结束并将控制权交给程序后才行。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">使用run loop对象可以唤醒Run loop。其它消息也可以唤醒run loop。例如，添加新的非基于端口的源到run loop从而可以立即执行输入源而不是等待其他事件发生后再执行。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">何时使用Run Loop</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><a href="http://www.cnblogs.com/scorpiozj/archive/2011/05/26/2058167.html" style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); outline: none; color: rgb(38, 112, 154); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">http://www.cnblogs.com/scorpiozj/archive/2011/05/26/2058167.html</a></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">只有在为你的程序创建次线程的时候，才需要运行run loop。对于程序的主线程而言，run loop是关键部分。Cocoa和carbon程序提供了运行主线程run loop的代码同时也会自动运行run loop。IOS程序UIApplication中的run方法在程序正常启动的时候就会启动run loop。同样的这部分工作在carbon程序中由RunApplicationEventLoop负责。如果你使用xcode提供的模板创建的程序，那你永远不需要自己去启动run loop。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">而对于次线程，你需要判断是否需要run loop。如果需要run loop，那么你要负责配置run loop并启动。你不需要在任何情况下都去启动run loop。比如，你使用线程去处理一个预先定义好的耗时极长的任务时，你就可以毋需启动run loop。Run loop只在你要和线程有交互时才需要，比如以下情况：</span></div><ul style="box-sizing: border-box; padding: 0px; list-style: disc; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">使用端口或自定义输入源和其他线程通信</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">使用定时器</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">cocoa中使用任何performSelector</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">使线程履行周期性任务</span></li></ul><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">如果决定在程序中使用run loop，那么配置和启动都需要自己完成。和所有线程编程一样，你需要计划好何时退出线程。在退出前结束线程往往是比被强制关闭好的选择。详细的配置和推出run loop的信息见 使用run loop对象。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">使用Run loop对象</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">run loop对象提供了添加输入源，定时器和观察者以及启动run loop的接口。每个线程都有唯一的与之关联的run loop对象。在cocoa中，是NSRunLoop对象；而在carbon或BSD程序中则是指向CFRunLoopRef类型的指针。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">获得run loop对象</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">获得当前线程的run loop，可以采用：</span></div><ul style="box-sizing: border-box; padding: 0px; list-style: disc; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">cocoa：使用NSRunLoop的currentRunLoop类方法</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">使用CFRunLoopGetCurrent函数</span></li></ul><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">虽然CFRunLoopRef类型和NSRunLoop对象并不完全等价，你还是可以从NSRunLoop对象中获取CFRunLoopRef类型。你可以使用NSRunLoop的getCFRunLoop方法，返回CFRunLoopRef类型到Core Fundation中。因为两者都指向同一个run loop，你可以任一替换使用。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">配置run loop</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">在次线程启动run loop前，你必须至少添加一类源。因为如果run loop没有任何源需要监视的话，它会在你启动之际立马退出。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">此外，你也可以添加run loop观察者来监视run loop的不同执行阶段。首先你可以创建CFRunLoopObserverRef类型并使用CFRunLoopAddObserver将它添加金run loop。注意即使是cocoa程序，run loop观察者也需要由core foundation函数创建。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">以下代码3－1实现了添加观察者进run loop，代码简单的建立了一个观察者来监视run loop的所有活动，并将run loop的活动打印出来。</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><img src="面试   阿里P6一面_files/Image.gif" type="image/gif" data-filename="Image.gif"/><span style="box-sizing: border-box; border: 1px solid rgb(128, 128, 128); background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(68, 68, 68); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Creating a run loop observer</span></div><div style="box-sizing: border-box; padding: 0px;"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)threadMain</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> The application uses garbage collection, so no autorelease pool is needed.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">NSRunLoop</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> myRunLoop </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> [NSRunLoop currentRunLoop];</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Create a run loop observer and attach it to the run loop.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopObserverContext context </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> {</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">, self, NULL, NULL, NULL};</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopObserverRef observer </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> CFRunLoopObserverCreate(kCFAllocatorDefault,</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">kCFRunLoopAllActivities, YES, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">&amp;</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">myRunLoopObserver, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">&amp;</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">context);</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">if</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (observer)</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopRef cfLoop </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> [myRunLoop getCFRunLoop];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopAddObserver(cfLoop, observer, kCFRunLoopDefaultMode);</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Create and schedule the timer.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">[NSTimer scheduledTimerWithTimeInterval:</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0.1</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> target:self</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">selector:@selector(doFireTimer:) userInfo:nil repeats:YES];</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">NSInteger loopCount </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">10</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">do</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Run the run loop 10 times to let the timer fire.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">[myRunLoop runUntilDate:[NSDate dateWithTimeIntervalSinceNow:</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">1</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">]];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">loopCount</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">--</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">while</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (loopCount);</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div></div></div></div><div><br style="box-sizing: border-box; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); padding: 0px;"/></div><div><br/></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">如果线程运行事件长，最好添加一个输入源到run loop以接收消息。虽然你可以使用定时器，但是定时器一旦启动后当它失效时也会使得run loop退出。虽然定时器可以循环使得run loop运行相对较长的时间，但是也会导致周期性的唤醒线程。与之相反，输入源会等待某事件发生，于是线程只有当事件发生后才会从休眠状态唤醒。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">启动run loop</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">run loop只对程序的次线程有意义，并且必须添加了一类源。如果没有，在启动后就会退出。有几种启动的方法，如：</span></div><ul style="box-sizing: border-box; padding: 0px; list-style: disc; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">无条件的</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">预设的时间</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">特定的模式</span></li></ul><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">无条件的进入run loop是最简单的选择，但也最不提倡。因为这样会使你的线程处在一个永久的run loop中，这样的话你对run loop本身的控制就会很小。你可以添加或移除源，定时器，但是只能通过杀死进程的办法来退出run loop。并且这样的run loop也没有办法运行在自定义模式下。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">用预设时间来运行run loop是一个比较好的选择，这样run loop在某一事件发生或预设的事件过期时启动。如果是事件发生，消息会被传递给相应的处理程序然后run loop退出。你可以重新启动run loop以处理下一个事件。如果是时间过期，你只需重启run loop或使用定时器做任何的其他工作。＊＊</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">此外，使run loop运行在特定模式也是一个比较好的选择。模式和预设时间不是互斥的，他们可以同时存在。模式对源的限制在run loop模式部分有详细说明。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Listing3－2代码描述了线程的整个结构。代码的关键是说明了run loop的基本结构。必要时，你可以添加自己的输入源或定时器，然后重复的启动run loop。每次run loop返回，你要检查是否有使线程退出的条件发生。代码中使用了Core Foundation的run loop程序，这样就能检查返回结果从而判断是否要退出。若是cocoa程序，也不需要关心返回值，你也可以使用NSRunLoop的方法运行run loop（代码见listing3－14）</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><img src="面试   阿里P6一面_files/Image [1].gif" type="image/gif" data-filename="Image.gif"/><span style="box-sizing: border-box; border: 1px solid rgb(128, 128, 128); background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(68, 68, 68); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Listing 3-2 Running a run loop</span></div><div style="box-sizing: border-box; padding: 0px;"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)skeletonThreadMain</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Set up an autorelease pool here if not using garbage collection.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">BOOL done </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> NO;</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Add your sources or timers to the run loop and do any other setup.</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">do</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Start the run loop but return after each source is handled.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">SInt32 result </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> CFRunLoopRunInMode(kCFRunLoopDefaultMode, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">10</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">, YES);</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> If a source explicitly stopped the run loop, or if there are no</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> sources or timers, go ahead and exit.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">if</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> ((result </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">==</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> kCFRunLoopRunStopped) </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">||</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (result </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">==</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> kCFRunLoopRunFinished))</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">done </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> YES;</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Check for any other exit conditions here and set the</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> done variable as needed.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">while</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">!</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">done);</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Clean up code here. Be sure to release any allocated autorelease pools.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div></div></div></div><div><br style="box-sizing: border-box; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); padding: 0px;"/></div><div><br/></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">因为run loop有可能迭代启动，也就是说你可以使用CFRunLoopRun，CFRunLoopRunInMode或者任一NSRunLoop的方法来启动run loop。这样做的时候，你可以使用任何模式启动迭代的run loop，包括被外层run loop使用的模式。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">退出run loop</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">在run loop处理事件前，有两种方法使其退出：</span></div><ul style="box-sizing: border-box; padding: 0px; list-style: disc; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">设置超时限定</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通知run loop停止</span></li></ul><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">如果可以配置的话，使用第一种方法是较好的选择。这样，可以使run loop完成所有正常操作，包括发送消息给run loop观察者，最后再退出。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">使用CFRunLoopStop来停止run loop也有类似的效果。Run loop也会把所有未发送的消息发送完后再退出。与设置时间的区别在于你可以在任何情况下停止run loop。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">尽管移除run loop的输入源和定时器也可以使run loop退出，但这并不是可靠的退出run loop的办法。一些系统程序会添加输入源来处理必须的事件。而你的代码未必会考虑到这些，这样就没有办法从系统程序中移除，从而就无法退出run loop。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">线程安全和run loop对象</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">线程是否安全取决于你使用哪种API操纵run loop。Core Foundation中的函数通常是线程安全的可以被任意线程调用。但是，如果你改变了run loop的配置然后需要进行某些操作，你最好还是在run loop所在线程去处理。如果可能的话，这样是个好习惯。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">至于Cocoa的NSRunLoop则不像Core Foundation具有与生俱来的线程安全性。你应该只在run loop所在线程改变run loop。如果添加yuan或定时器到属于另一个线程的run loop，程序会崩溃或发生意想不到的错误。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Run loop 源的配置</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">下面的例子说明了如果使用cocoa和core foundation来建立不同类型的输入源。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">定义自定义输入源</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">遵循下列步骤来创建自定义的输入源：</span></div><ul style="box-sizing: border-box; padding: 0px; list-style: disc; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">输入源要处理的信息</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">使感兴趣的客户知道如何和输入源交互的调度程序</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">处理客户发送请求的程序</span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">使输入源失效的取消程序</span></li></ul><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">由于你自己创建源来处理消息，实际配置设计得足够灵活。调度，处理和取消程序是你创建你得自定义输入源时总会需要用到得关键程序。但是，输入源其他的大部分行为都是由其他程序来处理。例如，由你决定数据传输到输入源的机制，还有输入源和其他线程的通信机制。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">图3－2列举了自定义输入源的配置。在这个例子中，程序的主线程保持了输入源，输入源所需的命令缓冲区和输入源所在的run loop的引用。当主线程有任务，需要分发给目标线程，主线程会给命令缓冲区发送命令和必须的信息，这样活动线程就可以开始执行任务。（因为主线程和输入源所在线程都须访问命令缓冲区，所以他们的操作要注意同步。）一旦命令传送了，主线程会通知输入源并且唤醒活动线程的run loop。而一收到唤醒命令，run loop会调用输入源的处理部分，由它来执行命令缓冲区中相应的命令。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><img src="面试   阿里P6一面_files/Image [7].png" type="image/png" data-filename="Image.png"/><br/></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">　　　　　　　　　　　　　　　　</span><span style="box-sizing: border-box; font-size: 12px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">图3－2</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">下面解释下上图的关键代码。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">定义输入源</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">定义输入源需要使用Core Foundation来配置run loop源并把它添加到run loop。基本的函数是C函数，当然你也可以用objc或C＋＋来封装操作。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">图3－2中的输入源使用了objc对象来管理命令缓冲区和run loop。Listing3－3说明了此对象的定义：RunLoopSource对象管理着命令缓冲区并以此来接收其他线程的消息；RunLoopContext对象是一个用于传递RunLoopSource对象和run loop引用给程序主线程的一个容器。</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><img src="面试   阿里P6一面_files/Image [2].gif" type="image/gif" data-filename="Image.gif"/><span style="box-sizing: border-box; border: 1px solid rgb(128, 128, 128); background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(68, 68, 68); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Listing 3-3 The custom input source object definition</span></div><div style="box-sizing: border-box; padding: 0px;"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">@interface</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> RunLoopSource : NSObject</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopSourceRef runLoopSource;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">NSMutableArray</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> commands;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">id</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)init;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)addToCurrentRunLoop;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)invalidate;</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Handler method</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)sourceFired;</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Client interface for registering commands to process</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)addCommand:(NSInteger)command withData:(</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">id</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)data;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)fireAllCommandsOnRunLoop:(CFRunLoopRef)runloop;</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">@end</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> These are the CFRunLoopSourceRef callback functions.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> RunLoopSourceScheduleRoutine (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">info, CFRunLoopRef rl, CFStringRef mode);</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> RunLoopSourcePerformRoutine (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">info);</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> RunLoopSourceCancelRoutine (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">info, CFRunLoopRef rl, CFStringRef mode);</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> RunLoopContext is a container object used during registration of the input source.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">@interface</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> RunLoopContext : NSObject</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopRef runLoop;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">RunLoopSource</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> source;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">@property (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">readonly</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">) CFRunLoopRef runLoop;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">@property (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">readonly</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">) RunLoopSource</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> source;</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">id</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)initWithSource:(RunLoopSource</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)src andLoop:(CFRunLoopRef)loop;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">@end</span></div></div></div></div><div><br style="box-sizing: border-box; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); padding: 0px;"/></div><div><br/></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">虽然输入源的数据定义是objc代码，但是将源添加进run loop却需要c的回调函数。上述函数在像Listing3－4一样，在添加时调用。因为这个输入源只有一个客户（即主线程），它使用调度函数发送注册信息给程序的代理（delegate）。当代理需要和输入源通信时，就可以使用RunLoopContext对象实现。</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><img src="面试   阿里P6一面_files/Image [3].gif" type="image/gif" data-filename="Image.gif"/><span style="box-sizing: border-box; border: 1px solid rgb(128, 128, 128); background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(68, 68, 68); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Listing 3-4 Scheduling a run loop source</span></div><div style="box-sizing: border-box; padding: 0px;"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> RunLoopSourceScheduleRoutine (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">info, CFRunLoopRef rl, CFStringRef mode)</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">RunLoopSource</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> obj </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (RunLoopSource</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)info;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">AppDelegate</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> del </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> [AppDelegate sharedAppDelegate];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">RunLoopContext</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> theContext </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> [[RunLoopContext alloc] initWithSource:obj andLoop:rl];</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">[del performSelectorOnMainThread:@selector(registerSource:)</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">withObject:theContext waitUntilDone:NO];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div></div></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">一个重要的回调函数就是用来处理自定义数据。Lising3－5说明了如何调用这个回调函数。这里只是简单的将请求传递到sourceFired方法，然后继续处理在命令缓存区的命令。</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><img src="面试   阿里P6一面_files/Image [4].gif" type="image/gif" data-filename="Image.gif"/><span style="box-sizing: border-box; border: 1px solid rgb(128, 128, 128); background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(68, 68, 68); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Listing 3-5 Performing work in the input source</span></div><div style="box-sizing: border-box; padding: 0px;"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> RunLoopSourcePerformRoutine (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">info)</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">RunLoopSource</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> obj </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (RunLoopSource</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)info;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">[obj sourceFired];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div></div></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">使用CFRunLoopSourceInvalidate函数移除输入源，系统会调用输入源的取消程序。你可以以此通知客户输入源不再有效，客户可以释放输入源的引用。Listing3－6说明了取消回调函数的调用，其中给另一个RunLoopContext对象发送了程序代理，通知代理去除源的引用。</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> RunLoopSourceCancelRoutine (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">info, CFRunLoopRef rl, CFStringRef mode)</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">RunLoopSource</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> obj </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (RunLoopSource</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)info;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">AppDelegate</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> del </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> [AppDelegate sharedAppDelegate];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">RunLoopContext</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> theContext </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> [[RunLoopContext alloc] initWithSource:obj andLoop:rl];</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">[del performSelectorOnMainThread:@selector(removeSource:)</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">withObject:theContext waitUntilDone:YES];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div></div></div><div><br style="box-sizing: border-box; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); padding: 0px;"/></div><div><br/></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">安装输入源到run loop</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Listing3－7说明了RunLoopSource的init和addToCurrentRunLoop函数。Init函数创建CFRunLoopSourceRef类型，传递RunLoopSource对象做为信息这样回调函数持有对象的引用。输入源的安装当工作线程运行addToCurrentRunLoop方法，然后调用RunLoopSourceScheduledRoutine回调函数。一旦源被添加，线程就运行run loop监听事件。</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><img src="面试   阿里P6一面_files/Image [5].gif" type="image/gif" data-filename="Image.gif"/><span style="box-sizing: border-box; border: 1px solid rgb(128, 128, 128); background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(68, 68, 68); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Listing 3-7 Installing the run loop source</span></div><div style="box-sizing: border-box; padding: 0px;"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">id</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)init</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopSourceContext context </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> {</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">, self, NULL, NULL, NULL, NULL, NULL,</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">&amp;</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">RunLoopSourceScheduleRoutine,</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">RunLoopSourceCancelRoutine,</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">RunLoopSourcePerformRoutine};</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">runLoopSource </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> CFRunLoopSourceCreate(NULL, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">&amp;</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">context);</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">commands </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> [[NSMutableArray alloc] init];</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">return</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> self;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)addToCurrentRunLoop</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopRef runLoop </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> CFRunLoopGetCurrent();</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopAddSource(runLoop, runLoopSource, kCFRunLoopDefaultMode);</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div></div></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">统筹输入源的客户</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">为了使添加的输入源有用，你需要处理源以及从其他线程发送信号。输入源的主要工作就是将与源关联的线程休眠，直到有事件发生。这就意味着程序中的线程必须知道输入源信息并有办法与之通信。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通知客户关于输入源信息的方法之一就是当输入源安装完成后发送注册请求。你可以注册输入源到你需要的客户，或者通过注册中间代理由代理将输入源到感兴趣的客户。Listing3－8说明了程序代理定义的注册方法以及它在RUnLoopSource对象的调度函数调用时如何运行。函数接收RUnLoopSource提供的RunLoopContext对象，然后将其胶乳源队列。另外，也说明了源移除run loop时候的取消注册方法。</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><img src="面试   阿里P6一面_files/Image [6].gif" type="image/gif" data-filename="Image.gif"/><span style="box-sizing: border-box; border: 1px solid rgb(128, 128, 128); background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(68, 68, 68); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Listing 3-8 Registering and removing an input source with the application delegate</span></div><div style="box-sizing: border-box; padding: 0px;"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)registerSource:(RunLoopContext</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)sourceInfo;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">[sourcesToPing addObject:sourceInfo];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)removeSource:(RunLoopContext</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)sourceInfo</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">id</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> objToRemove </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> nil;</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">for</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (RunLoopContext</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> context </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">in</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> sourcesToPing)</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">if</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> ([context isEqual:sourceInfo])</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">objToRemove </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> context;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">break</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">;</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">if</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (objToRemove)</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">[sourcesToPing removeObject:objToRemove];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div></div></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">通知输入源</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">客户发送数据到输入源后，必须发信号通知源并且唤醒run loop。发信好意味着让run loop明白源已经做好处理消息的准备。因为信号发生的时候线程可能休眠着，你必须自己唤醒run loop。如果不这样做的话会导致延迟处理消息。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Listing3－9说明了RunLoopSource对象的fireCommandsOnRunLoop方法。客户如果准备好处理加入缓冲区的命令后会运行此方法。</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><img src="面试   阿里P6一面_files/Image [7].gif" type="image/gif" data-filename="Image.gif"/><span style="box-sizing: border-box; border: 1px solid rgb(128, 128, 128); background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(68, 68, 68); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Listing 3-9 Waking up the run loop</span></div><div style="box-sizing: border-box; padding: 0px;"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">-</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> (</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 255); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">)fireCommandsOnRunLoop:(CFRunLoopRef)runloop</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">{</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopSourceSignal(runLoopSource);</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopWakeUp(runloop);</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">}</span></div></div></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">配置定时源</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">创建定时源你所需要做的就是创建定时器并加入run loop调度。Cocoa程序中使用NSTimer类而Core Foundation中使用CFRunLoopTimerRef类型。本质上，NSTimer类是Core Foundation的简单扩展，这样就提供了便利的特征，例如都能使用相同的函数创建和调配定时器。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Cocoa中可以使用以下函数创建并调配：</span></div><ul style="box-sizing: border-box; padding: 0px; list-style: disc; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><a href="http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/clm/NSTimer/scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:" style="box-sizing: border-box; outline: none; font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(38, 112, 154); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:</a></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><a href="http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/occ/clm/NSTimer/scheduledTimerWithTimeInterval:invocation:repeats:" style="box-sizing: border-box; outline: none; font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(38, 112, 154); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">scheduledTimerWithTimeInterval:invocation:repeats:</a></li></ul><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">上述方法创建了定时器并使之以默认模式添加到当前线程的run loop。你可以自己调度定时器如果你选择自己创建定时器并使用addTimer：forMode：方法添加到run loop。两种方法都做了相同的事，区别在于你对定时器的控制权。如果你自己创建的话，你可以选择添加的模式。Listing3－10说明了如果这样做。第一个定时器在初始化后1秒开始可以后每隔0.1秒运行，第二个定时器则在初始化后0。2秒开始以后每隔0。2运行。</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><img src="面试   阿里P6一面_files/Image [8].gif" type="image/gif" data-filename="Image.gif"/><span style="box-sizing: border-box; border: 1px solid rgb(128, 128, 128); background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(68, 68, 68); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Listing 3-10 Creating and scheduling timers using NSTimer</span></div><div style="box-sizing: border-box; padding: 0px;"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">NSRunLoop</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> myRunLoop </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> [NSRunLoop currentRunLoop];</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Create and schedule the first timer.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">NSDate</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> futureDate </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> [NSDate dateWithTimeIntervalSinceNow:</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">1.0</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">NSTimer</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">*</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> myTimer </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> [[NSTimer alloc] initWithFireDate:futureDate</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">interval:</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0.1</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">target:self</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">selector:@selector(myDoFireTimer1:)</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">userInfo:nil</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">repeats:YES];</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">[myRunLoop addTimer:myTimer forMode:NSDefaultRunLoopMode];</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 128, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> Create and schedule the second timer.</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">[NSTimer scheduledTimerWithTimeInterval:</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0.2</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">target:self</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">selector:@selector(myDoFireTimer2:)</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">userInfo:nil</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">repeats:YES];</span></div></div></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">Listing3－11是使用Core Foundation函数配置定时器的代码。这个例子中文本结构例没有任何用户定义的信息，但是你可以使用这个结构体传递任何你想传递的信息给定时器。关于结构体的详细信息，参见CFRunLoopTimer。</span></div><div style="box-sizing: border-box; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 13px; word-break: break-all; background-color: rgb(245, 245, 245);"><div><img src="面试   阿里P6一面_files/Image [9].gif" type="image/gif" data-filename="Image.gif"/><span style="box-sizing: border-box; border: 1px solid rgb(128, 128, 128); background-color: rgb(255, 255, 255); font-size: 13px; color: rgb(68, 68, 68); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Listing 3-11 Creating and scheduling a timer using Core Foundation</span></div><div style="box-sizing: border-box; padding: 0px;"><div style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; white-space: normal; padding: 0px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"></div><div style="box-sizing: border-box; padding: 0px;"><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopRef runLoop </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> CFRunLoopGetCurrent();</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopTimerContext context </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> {</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">, NULL, NULL, NULL, NULL};</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopTimerRef timer </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">=</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> CFRunLoopTimerCreate(kCFAllocatorDefault, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0.1</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0.3</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(128, 0, 128); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">0</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">,</span></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">&amp;</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">myCFTimerCallback, </span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">&amp;</span><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">context);</span></div><div><br/></div><div><br style="box-sizing: border-box; padding: 0px;"/></div><div><br/></div><div><span style="box-sizing: border-box; background-color: rgb(245, 245, 245); font-size: 13px; color: rgb(0, 0, 0); font-family: 'Courier new'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">CFRunLoopAddTimer(runLoop, timer, kCFRunLoopCommonModes);</span></div></div></div></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">配置基于端口的输入源</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">cocoa和core foundation都提供了基于端口的对象用于线程或进程间的通信。下面的部分说明了使用几种不同的端口对象建立端口通信。</span></div><div style="box-sizing: border-box; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">配置NSMachPort对象</span></div><div><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: punctuation, 微软雅黑, Tohoma; font-variant-caps: normal; font-variant-ligatures: normal;">建立和NSMachPort对象的本地连接，你需要创建端口对象并将之加入主线程的run loop。当运行次线程的时候，你传递端口对象到线程的入口点。次线程可以使用相同的端口对象将消息返回给主线程</span></div><hr/><h4><span style="font-size: 18px; color: rgb(4, 51, 255); font-family: punctuation;">10.block 为什么会有循环引用</span></h4><div><span style="color: rgb(68, 68, 68); font-family: punctuation;">产生原因：如下图所示，对象A和对象B相互引用了对方作为自己的成员变量，只有自己销毁的时候才能将成员变量的引用计数减1。对象A的销毁依赖于对象B的销毁，同时对象B销毁也依赖与对象A的销毁，从而形成</span><span style="color: rgb(68, 68, 68); font-family: punctuation; font-weight: bold;">循环引用</span><span style="color: rgb(68, 68, 68); font-family: punctuation;">，此时，即使外界没有任何指针访问它，它也无法释放。</span></div><div><img src="面试   阿里P6一面_files/Image [8].png" type="image/png" data-filename="Image.png"/><br/></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(68, 68, 68); font-family: punctuation;">循环引用示例图</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(68, 68, 68); font-family: punctuation;">多个对象间依然会存在循环引用问题，形成一个环，在编程中，形成的环越大越不容易察觉，如下图所示：</span></div><div><img src="面试   阿里P6一面_files/Image [9].png" type="image/png" data-filename="Image.png"/><br/></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(68, 68, 68); font-family: punctuation;">多个对象引用示例图</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(68, 68, 68); font-family: punctuation;">解决方法：</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(68, 68, 68); font-family: punctuation;">事先知道存在循环引用的地方，在合理的位置主动断开一个引用，是对象回收,使用</span><a href="http://www.tuicool.com/articles/NVNrMv7" style="color: rgb(68, 68, 68); font-family: punctuation;">弱引用</a><span style="color: rgb(68, 68, 68); font-family: punctuation;">的方法。</span></div><hr/><h4><span style="font-size: 18px; color: rgb(4, 51, 255);">11.NSOperation 和 GCD 的区别</span></h4><div>GCD是基于c的底层api，NSOperation属于object-c类。ios 首先引入的是NSOperation，IOS4之后引入了GCD和NSOperationQueue并且其内部是用gcd实现的。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">相对于GCD：</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">1，NSOperation拥有更多的函数可用，具体查看api。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">2，在NSOperationQueue中，可以建立各个NSOperation之间的依赖关系。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">3，有kvo，可以监测operation是否正在执行（isExecuted）、是否结束（isFinished），是否取消（isCanceld）。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">4，NSOperationQueue可以方便的管理并发、NSOperation之间的优先级。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">GCD主要与block结合使用。代码简洁高效。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">GCD也可以实现复杂的多线程应用，主要是建立个个线程时间的依赖关系这类的情况，但是需要自己实现相比NSOperation要复杂。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">具体使用哪个，依需求而定。从个人使用的感觉来看，比较合适的用法是：除了依赖关系尽量使用GCD，因为苹果专门为GCD做了性能上面的优化。</div><div><br/></div><div><a href="https://developer.apple.com/library/mac/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html" style="-en-paragraph: true;">GCD</a> 技术是一个轻量的，底层实现隐藏的神奇技术，我们能够通过GCD和block轻松实现多线程编程，有时候，GCD相比其他系统提供的多线程方法更加有效，当然，有时候GCD不是最佳选择，另一个多线程编程的技术 <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html" style="-en-paragraph: true;">NSOprationQueue</a> 让我们能够将后台线程以队列方式依序执行，并提供更多操作的入口，这和 GCD 的实现有些类似。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">这种类似不是一个巧合，在早期，MacOX 与 iOS 的程序都普遍采用Operation Queue来进行编写后台线程代码，而之后出现的GCD技术大体是依照前者的原则来实现的，而随着GCD的普及，在iOS 4 与 MacOS X 10.6以后，Operation Queue的底层实现都是用GCD来实现的。</div><hr/><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">那这两者直接有什么区别呢？</div><ol><li>GCD是底层的C语言构成的API，而NSOperationQueue及相关对象是Objc的对象。在GCD中，在队列中执行的是由block构成的任务，这是一个轻量级的数据结构；而Operation作为一个对象，为我们提供了更多的选择；</li><li>在NSOperationQueue中，我们可以随时取消已经设定要准备执行的任务(当然，已经开始的任务就无法阻止了)，而GCD没法停止已经加入queue的block(其实是有的，但需要许多复杂的代码)；</li><li>NSOperation能够方便地设置依赖关系，我们可以让一个Operation依赖于另一个Operation，这样的话尽管两个Operation处于同一个并行队列中，但前者会直到后者执行完毕后再执行；</li><li>我们能将KVO应用在NSOperation中，可以监听一个Operation是否完成或取消，这样子能比GCD更加有效地掌控我们执行的后台任务；</li><li>在NSOperation中，我们能够设置NSOperation的priority优先级，能够使同一个并行队列中的任务区分先后地执行，而在GCD中，我们只能区分不同任务队列的优先级，如果要区分block任务的优先级，也需要大量的复杂代码；</li><li>我们能够对NSOperation进行继承，在这之上添加成员变量与成员方法，提高整个代码的复用度，这比简单地将block任务排入执行队列更有自由度，能够在其之上添加更多自定制的功能。</li></ol><hr/><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">总的来说，Operation queue 提供了更多你在编写多线程程序时需要的功能，并隐藏了许多线程调度，线程取消与线程优先级的复杂代码，为我们提供简单的API入口。从编程原则来说，一般我们需要尽可能的使用高等级、封装完美的API，在必须时才使用底层API。但是我认为当我们的需求能够以更简单的底层代码完成的时候，简洁的GCD或许是个更好的选择，而Operation queue 为我们提供能更多的选择。</div><div><br/></div><hr/><div><span style="font-size: 18px; color: rgb(4, 51, 255); font-family: 'PingFang SC'; font-variant-caps: normal; line-height: normal;">12.</span><span style="font-size: 18px; color: rgb(4, 51, 255); font-family: 'PingFang SC'; font-variant-caps: normal; line-height: normal;">CoreData的使用，如何处理多线程问题 </span></div><div><br/></div><div><span style="font-weight: bold;">第一步：搭建 Core Data 多线程环境</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">这个问题首先要解决的是搭建 Core Data 多线程环境。Core Data 对并发模式的支持非常完备，NSManagedObjectContext 的指定初始化方法中就指定了并发模式：</div><div>init(concurrencyType ct: NSManagedObjectContextConcurrencyType)</div><div>有三种模式：</div><div><span style="text-decoration: line-through;">1.NSConfinementConcurrencyType</span></div><div>这种模式是用于向后兼容的，使用这种模式时你应该保证只能在创建的线程里使用 context，然而这不容易得到保证。关于此模式的最新消息是 iOS 9 中它将被废弃，不推荐使用。</div><div>2.NSPrivateQueueConcurrencyType</div><div>在一个私有队列中创建并管理 context。</div><div>3.NSMainQueueConcurrencyType</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">其实这种模式与第2种模式比较相似，只不过 context 与主队列绑定，同时也因此与应用的 event loop 紧密相连。当 context 与 UI 更新相关的话就使用这种模式。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">从 iOS 9 开始就剩下后面两种模式了，那么搭建多线程 Core Data 环境的方案一般如下，创建一个 NSMainQueueConcurrencyType 的 context 用于响应 UI 事件，其他涉及大量数据操作可能会阻塞 UI 的，就使用 NSPrivateQueueConcurrencyType 的 context。</div><div>let mainContext = NSManagedObjectContext(concurrencyType: .MainQueueConcurrencyType)</div><div>let backgroundContext = NSManagedObjectContext(concurrencyType: .PrivateQueueConcurrencyType)</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">但需要注意的是「Core Data 使用线程或者序列化的队列来保护 managed objects 和 managed object context，因此 context 假设它的默认拥有者是它初始化时分配的线程或队列，你不能在某个线程中初始化一个 context 后传递给另外一个线程来使用它。」这段蹩脚的话是我从NSManagedObjectContext的文档翻译来的，意思就是说 managed object context 并非线程安全的，你不能随便地开启一个后台线程访问 managed object context 进行数据操作就管这叫支持多线程了，那么应该怎么做呢？官方文档<a href="https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Conceptual/CoreData/Concurrency.html#//apple_ref/doc/uid/TP40001075-CH24-SW3" style="-en-paragraph: true;">《Using a Private Queue to Support Concurrency》</a>为我们做了示范，在 private queue 的 context 中进行操作时，应该使用以下方法：</div><div> func performBlock(_ block: () -&gt; Void)//在私有队列中异步地执行 Blcok</div><div> func performBlockAndWait(_ block: () -&gt; Void)//在私有队列中执行 Block 直至操作结束才返回</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">要在不同线程中使用 managed object context 时，不需要我们创建后台线程然后访问 managed object context 进行操作，而是交给 context 自身绑定的私有队列去处理，我们只需要在上述两个方法的 Block 中执行操作即可。事实上，你也可以在其他线程中来使用 context，但是要保证以上两个方法。而且，在 NSMainQueueConcurrencyType 的 context 中也应该使用这种方法执行操作，这样可以确保 context 本身在主线程中进行操作。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">题外话，在构建多线程 context 时，经常会出现这样的局面：Multi-contexts vs Concurrency。前者可能有更加复杂的情况，在 iOS 5之后，context 可以指定父 context，persistent store coordinator 不再是其与 persistent store 联系的唯一选择。需要注意的是，子 context 的 fetch 和 save 操作都会交给父 context 来完成，对于子 context 的 save 操作，只会到达上一层的父 context 里，只有父 context 执行了 save 操作，子 context 中的变化才会提交到 persistent store 保存。这种子 context 适合在后台执行长时间操作，比如在后台里在子 context 里导入大量数据，在主线程的父 context 里更新进度。另外一种是平行的多 context。Concurrency 的特性也是在 iOS 5 后开始支持，这个特性减少了平行的多 context 的需求。关于这个话题，可以看这篇文章:<a href="http://floriankugler.com/2013/04/29/concurrent-core-data-stack-performance-shootout/" style="-en-paragraph: true;">《Concurrent Core Data Stacks – Performance Shootout》</a>。</div><div><span style="font-weight: bold;">第二步：数据的同步操作</span></div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">总的来说，在多 context 环境的下，context 的生命周期里有两个阶段需要处理数据同步的问题。当某个 context 里的状态发生了变化并执行保存来更新 persistent store后，对于其他 context 来说有两个选择：1. persistent store 更新后，此时其他 context 与 persistent store 进行同步；2. persistent store 更新后，其他 context 并不立即同步，而在自身进行保存时与 persistent store 进行同步，两者有差异时需要解决冲突问题。前者采取的是「一处修改处处同步」的策略，所有的 context 中同步为一个版本，后者采取的是「多版本共存协商处理」的策略。以下讨论都基于多个 context，假设应用配置了两个 managed object context，mainContext，在主线程运行 ，另外一个 backgroundContext 用于后台处理。</div><h6>多 context 单数据版本</h6><div>在 context 中执行保存时，应用并不会主动告知其他 context。那么如何在多个 context 间进行通信呢？Core Data 提供了通知机制，context 执行保存时，会发出以下通知：</div><div>1.NSManagedObjectContextWillSaveNotification</div><div>Managed object context 即将执行保存操作时发出此通知，没有附带任何信息。</div><div>2.NSManagedObjectContextDidSaveNotification</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">Managed object context 的保存操作完成之后由该 context 自动发出此通知，包含了所有的新增、更新和删除的对象的信息。注意在通知里的 managed objects 只能在 context 所在的线程里使用。由于 context 也只能在自身的线程里执行操作，所以没法直接使用通知里的 managed objects，这时候应该通过 managed object 的 objectID 以及 context 的objectWithID(_ objectID: ) 来获取。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">合并其他 context 的数据可以通过mergeChangesFromContextDidSaveNotification(_ notification:)来完成。在这个方法里，context 会更新发出通知的 context 里变化的任何同样的对象，引入新增的对象并处于 faults 状态，并删除在发出通知的 context 里已经删除的对象。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">代码示例，在 backgroundContext 中编辑后使 mainContext 与之同步：</div><div>NSNotificationCenter.defaultCenter().addObserver(self, </div><div>                                             selector: &quot;backgroundContextDidSave:&quot;, </div><div>                                                 name: NSManagedObjectContextDidSaveNotification, </div><div>                                               object: backgroundContext)</div><div><br/></div><div>func backgroundContextDidSave(notification: NSNotification){</div><div>    mainContext.performBlock(){</div><div>        mainContext.mergeChangesFromContextDidSaveNotification(notification)</div><div>    }</div><div>}</div><h6><span style="font-size: 14px;">多 context 多数据版本</span></h6><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">在这种方案下，backgroundContext 并不针对 mainContext 的保存做出反应。在 mainContext 和 backgroundContext 中 fetch 了同类的 managed objects，两个 context 都发生了变化并且变化不一样，此时让 backgroundContext 与 mainContext 前后脚分别执行保存的话，就会发生冲突导致后者保存失败。</div><div>在 managed object context 中执行 fetch 操作时，会对 persistent store 里的状态进行快照，当 context 执行保存时，会使用快照与 persistent store 进行对比，如果状态不一致，说明 persistent store 在其他地方被更改了，而这个变化并不是当前 context 造成的，这样就造成了当前 context 状态的不连续，此时保存就会产生冲突。这里需要介绍 managed object context 的属性mergePolicy，这个属性指定了 context 的合并策略，决定了保存时合并数据发生冲突时如何应对，该属性有以下几种值：</div><div>1.NSErrorMergePolicy</div><div>默认策略，有冲突时保存失败，persistent store 和 context 都维持原样，并返回错误信息，是唯一反馈错误信息的合并策略。</div><div>2.NSMergeByPropertyStoreTrumpMergePolicy</div><div>当 persistent store 和 context 里的版本有冲突，persistent store 里的版本有优先权， context 里使用 persistent store 里的版本替换。</div><div>3.NSMergeByPropertyObjectTrumpMergePolicy</div><div>与上面相反，context 里的版本有优先权，persistent store 里使用 context 里的版本替换。</div><div>4.NSOverwriteMergePolicy</div><div>用 context 里的版本强制覆盖 persistent store 里的版本。</div><div>5.NSRollbackMergePolicy</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">放弃 context 中的所有变化并使用 persistent store 中的版本进行替换。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">除了默认的 NSErrorMergePolicy在发生冲突时返回错误等待下一步处理外，其他的合并策略直接根据自身的规则来处理合并冲突，因此在选择时要谨慎处理。从上面的解释来看，似乎NSMergeByPropertyStoreTrumpMergePolicy与NSRollbackMergePolicy没什么区别，NSMergeByPropertyObjectTrumpMergePolicy与 NSOverwriteMergePolicy也没有什么区别。区别在于怎么对待被覆盖的一方中没有冲突的变化<a href="http://stackoverflow.com/questions/14515847/what-is-conflict-in-nsmanagedobject-and-whats-the-different-between-some-of-the" style="-en-paragraph: true;">（解释见此处）</a>，NSMergeByPropertyStoreTrumpMergePolicy和NSMergeByPropertyObjectTrumpMergePolicy采取的是局部替换，前者 context 中没有冲突的变化不会受到影响，后者 persistent store 中没有冲突的变化不受影响；NSOverwriteMergePolicy 和 NSRollbackMergePolicy 采取的是全局替换，persistent store 和 context 中只有一方的状态得以保留。</div><div>回到本节开始的场景，mainContext 和 backgroundContext 中的版本不一致，会产生合并冲突，解决方案有以下两种选择：</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">1.不管 mainContext 中是否发生改变，与 backgroundContext 中状态同步；</div><div>//此时 mainContext 和 backgroundContext 都采用默认合并策略即可。</div><div>mainContext.performBlock(){</div><div>    do{</div><div>       try mainContext.save()</div><div>    } catch {</div><div>        /*</div><div>        清空 mainContext，其中所有的 managed objects 消失。</div><div>        如果引用了其中的 managed objects 的话，注意在 reset 前取消对这些对象的引用。</div><div>        */</div><div>        mainContext.reset()</div><div>        //重新 fetch</div><div>        let fetchRequest = ...</div><div>        let updatedFetchedResults = try mainContext.executeFetchRequest(fetchRequest)</div><div>    }</div><div>}</div><div>又或者，mainContext 的合并策略采用NSMergeByPropertyStoreTrumpMergePolicy或NSRollbackMergePolicy，这样就省去了 reset 操作。实际上，采用这种方案不如上一个策略来得方便。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">2.不管其他 context 中发生什么变化，当前 context 进行保存时直接覆盖 persistent store 里的版本，这种方案下 context 的合并策略需要采用NSOverwriteMergePolicyType或NSMergeByPropertyObjectTrumpMergePolicy，而且执行保存时不会返回错误，不需要后续的处理。</div><h6><span style="font-size: 18px;">小结</span></h6><div>同步多个 context 是个比较复杂的事情，需要根据具体的需要来设定 context 的合并策略以及选择同步的时机，不仅仅限于以上的两种策略，融合两种策略也可以，当然那样可能会大大增加复杂度，更容易导致 Bug。另外，还有一种使用 child context 的方法，就是将其他 context 作为 context 的 parentContext，这种方法没有研究，自己有兴趣可以试试。</div><div>1.同步问题第一原则：不要跨线程使用 managed object，而应该通过其对应的 objectID，在其他线程里的 context 里来获取对象。</div><div>2.NSManagedObjectContext的合并方法mergeChangesFromContextDidSaveNotification(_ notification:)可以替完全复制另一个 context 的状态；如果你不想完全复制，可以使用更精确的方法refreshAllObjects()，这是 iOS 9 中推出的新方法；或者手动处理，当然，不推荐这么做。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">3.利用NSMergePolicy来处理同步相对而言危险一点，你得明确知道你在做什么。</div><h3>最后一站：大量数据操作</h3><div>从上面的内容可以得知，在多线程环境下同步数据基本上不需要我们手动去处理 managed objects 的同步，因此处理大量数据的同步，关注的重点更多在于内存占用和性能。写代码要记住以下几点：</div><div>1.涉及大量数据的操作尽量要放在后台线程里处理，防止阻塞主线程；对于多 context 的结构，可以参考这篇文章<a href="http://floriankugler.com/2013/04/29/concurrent-core-data-stack-performance-shootout/">《Concurrent Core Data Stacks – Performance Shootout》</a>，作者通过验证，证明了「设置一个 persistent store coordinator 和两个独立的 contexts 被证明了是在后台处理 Core Data 的好方法」。</div><div>2.能够保持 faults 状态的 managed objects 尽量不要触发 fire，降低内存占用，同时也能提升响应速度。</div><div>3.fetch 大量数据时注意技巧，可以通过利用 predicate 来筛选实际需要的数据，限制 fetch 的总数量，设定合适的批量获取数量来降低 IO 的频次，这些需要在实际环境中寻找平衡点。</div><div>4.尽量让 context 中的 entity 类别少一些，降低对同步的需求。</div><div>（从 iOS 8 开始，Core Data 在性能方面有了较大的提升，尽量合理利用。）</div><div>5.使用异步请求 Asynchronous Fetch，尽管可以将 fetch 大量数据的操作放在后台线程里，但是这样依然会阻塞那个线程，使用异步请求，则依然可以在后台线程里进行其他操作，并且还有方便的进度提示和取消功能。</div><div>6.使用批量更新 Batch Update，有效降低内存占用并大幅提升保存的速度。以往在NSManagedObjectContext中进行保存时，只能将其中包含的变化进行保存，而 Batch Update 则是直接对 persistent store 进行更新而不需要将 managed objects 读入内存，可以大幅降低内存占用而且更新速度提升不少。但需要注意的是，使用批量更新并不会提醒 context，需要我们对 context 手动进行更新，而且没有进行有效验证，也需要开发者来保证有效性。</div><div>7.使用批量删除 Batch Delete，与批量更新类似，直接对 persistent store 进行操作，效率非常高，也有着和批量更新类似的问题。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">8.使用 iOS 9 新增的NSManagedObjectContext的新 API：refreshAllObjects()，该方法会对 context 中注册的所有对象进行刷新，还没有保存的变化也会得到保留，这样就可以解放 6 和 7 中的手动更新工作。</div><hr/><div><span style="font-size: 18px; color: rgb(4, 51, 255);">13.如何设计图片缓存？</span></div><div>先简单说一下图片缓存的作用：</div><ol><li>提高响应速度</li><li>减少网络流量</li><li>提高用户体验</li></ol><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">提高响应速度：因为图片一旦缓存在本地之后，那么本地IO数据的读取，远比网络中得IO读取效率要高的多。所以可以提高响应速度</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">减少网络流量：一张图片在某些情况下，只加载一次，之后便不会重新加载，减少了网络流量。减少流量肯定是必然的。介于国内的流量费用这么贵，是肯定必要的</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">提高用户体验：这个体验并不仅仅存在于相应速度上，还在一些断网模式上。其实我想说的是。就算是我们的电脑硬盘丢了，我们软件也应该茁壮的运行下去，更何况仅仅是断网而已。</div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"> </div><div style="-en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">当然这样也会带来弊端：数据同步问题，如果网络中得数据更新了。那么你再本地看到的数据永远都是旧数据。其实我觉得这个问题是一个悖论。减少了网络流量，这种收益，远远大于那些旧数据的问题。当然了，特殊的软件或者某些情况（Wifi）可能会需要数据及时刷新。那么就先加载本地数据。然后从网络中加载数据，替换缓存数据就好了。这个与数据缓存并不冲突。在特殊点，就分时间段过期就好了。比如说，下载一张图片，一小时内有效。如果超过一小时，就认为失效了。虽然慢点，但是我依然看到了最新的数据。至于这些策略问题，要根据不同的情况做最合适的设计，在此不做赘述，如果你有兴趣，我们也可以讨论讨论。</div><div>OK，回归正题。说一下我们的缓存模块设计。简单点说，就是把网络中得地址映射到本地目录呗。简单想想，把网络地址中得某些特殊字段替换掉就OK了，比如说 “/”替换成 “_”就可以达到映射的目的了。或者直接直接分录的情况下保存到本地，就Ok了，但是这样会带来其他的不确定的问题（网络地址的长度，如果策略制定的不好，会不会出现缓存错乱的问题。短时间缓存无法实现的问题等等）。<span style="font-weight: bold;">我的做法是这样的，将网络地址中得连接，直接跟本地的某一个唯一缓存地址建立映射关系。并且连同创建时间保存到数据库中。这样就可以做到上述的所有的缓存效果了。</span></div><hr/><div><span style="font-size: 18px; color: rgb(4, 51, 255); font-weight: bold;">14.如何设计一个网络控件？</span></div><div><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">一个控件从外在特征来说，主要是封装这几点：</font></span></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><ul style="box-sizing: border-box; padding: 0px; list-style: disc;"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">交互方式</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">显示样式</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">数据使用</font></span></li></ul></blockquote><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">对外在特征的封装，能让我们在多种环境下达到 PM 对产品的要求，并且提到代码复用率，使维护工作保持在一个相对较小的范围内；而一个好的控件除了有对外一致的体验之外，还有其内在特征：</font></span></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><ul style="box-sizing: border-box; padding: 0px; list-style: disc;"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">灵活性</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">低耦合</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">易拓展</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">易维护</font></span></li></ul></blockquote><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">通常特征之间需要做一些取舍，比如灵活性与耦合度，有时候接口越多越能适应各种环境，但是接口越少对外产生的依赖就越少，维护起来也更容易。通常一些前期看起来还不错的代码，往往也会随着时间加深慢慢“成长”，功能的增加也会带来新的接口，很不自觉地就加深了耦合度，在开发中时不时地进行一些重构工作很有必要。总之，尽量减少接口的数量，但有足够的定制空间，可以在一开始把接口全部隐藏起来，再根据实际需要慢慢放开。</font></span></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">自定义控件在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">iOS</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 项目里很常见，通常页面之间入口很多，而且使用场景极有可能大不相同，比如一个 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 既可以以代码初始化，也可以以 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">xib</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的形式初始化，而我们是需要保证这两种操作都能产生同样的行为。本文将会讨论到以下几点：</span></font></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><ul style="box-sizing: border-box; padding: 0px; list-style: disc;"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">选择正确的初始化方式</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">调整布局的时机</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">正确的处理 touches 方法</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">drawRectCALayer 与动画</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">UIControl 与 UIButton</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">更友好的支持 xib</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">不规则图形和事件触发范围（事件链的简单介绍以及处理）</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">合理使用 KVO</font></span></li></ul></blockquote><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">如果这些问题你一看就懂的话就不用继续往下看了。</font></span></div><h1 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">设计方针</font></span></h1><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.0980392); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><h2 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">选择正确的初始化方式</font></span></h2><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的首要问题就是既能从代码中初始化，也能从 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">xib</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 中初始化，两者有何不同? UIView 是支持 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">NSCoding</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 协议的，当在 xib 或 storyboard 里存在一个 UIView 的时候，其实是将 UIView 序列化到文件里（xib 和 storyboard 都是以 XML 格式来保存的），加载的时候反序列化出来，所以：</span></font></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><ul style="box-sizing: border-box; padding: 0px; list-style: disc;"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><font style="font-size: 14px;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">当从代码实例化 UIView 的时候，</span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithFrame</span><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 会执行；</span></font></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><font style="font-size: 14px;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">当从文件加载 UIView 的时候，</span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithCoder</span><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 会执行。</span></font></li></ul></blockquote><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">从代码中加载</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">虽然 initWithFrame 是 UIView 的</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Designated Initializer</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，理论上来讲你继承自 UIView 的任何子类，该方法最终都会被调用，但是有一些类在初始化的时候没有遵守这个约定，如 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIImageView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithImage</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 和 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UITableViewCell</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithStyle:reuseIdentifier</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">: 的构造器等，所以我们在写自定义控件的时候，最好只假设父视图的 Designated Initializer 被调用。</span></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">如果控件在初始化或者在使用之前必须有一些参数要设置，那我们可以写自己的 Designated Initializer 构造器，如：</font></span></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- </span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(instancetype)</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">initWithName:</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSString</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">name;</span></font></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><span style="box-sizing: border-box; color: rgb(153, 153, 153);"><font style="font-size: 14px;">1</font></span></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">在实现中一定要调用父类的 Designated Initializer，而且如果你有多个自定义的 Designated Initializer，最终都应该指向一个全能的初始化构造器：</font></span></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (instancetype)initWithName:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSString</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)name {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> initWithName:name frame:CGRectZero];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (instancetype)initWithName:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSString</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)name frame:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGRect</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)frame {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> initWithFrame:frame];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.name</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = name;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">并且你要考虑到，因为你的控件是继承自 UIView 或 UIControl 的，那么用户完全可以不使用你提供的构造器，而直接调用基类的构造器，所以最好重写父类的 Designated Initializer，使它调用你提供的 Designated Initializer ，比如父类是个 UIView：</font></span></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (instancetype)initWithFrame:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGRect</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)frame {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> initWithName:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">nil</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> frame:frame];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">这样当用户从代码里初始化你的控件的时候，就总是逃脱不了你需要执行的初始化代码了，哪怕用户直接调用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">init</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法，最终还是会回到父类的 Designated Initializer 上。</span></font></div><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">从 xib 或 storyboard 中加载</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">当控件从 xib 或 storyboard 中加载的时候，情况就变得复杂了，首先我们知道有 initWithCoder 方法，该方法会在对象被反序列化的时候调用，比如从文件加载一个 UIView 的时候：</font></span></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIView</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *view = [[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIView</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> alloc] init];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSData</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">data</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSKeyedArchiver</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> archivedDataWithRootObject:view];</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">[[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSUserDefaults</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> standardUserDefaults] setObject:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">data</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> forKey:@&quot;</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">KeyView</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">&quot;];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">[[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSUserDefaults</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> standardUserDefaults] synchronize];</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">data</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSUserDefaults</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> standardUserDefaults] objectForKey:@&quot;</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">KeyView</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">&quot;];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">view</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSKeyedUnarchiver</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> unarchiveObjectWithData:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">data</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSLog</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(@</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 136, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">&quot;%@&quot;</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, view);</span></font></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">执行 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">unarchiveObjectWithData</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的时候， </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithCoder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 会被调用，那么你有可能会在这个方法里做一些初始化工作，比如恢复到保存之前的状态，当然前提是需要在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">encodeWithCoder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 中预先保存下来。</span></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">不过我们很少会自己直接把一个 View 保存到文件中，一般是在 xib 或 storyboard 中写一个 View，然后让系统来完成反序列化的工作，此时在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithCoder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 调用之后，</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">awakeFromNib</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法也会被执行，既然在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">awakeFromNib</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法里也能做初始化操作，那我们如何抉择?</span></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">一般来说要尽量在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithCoder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 中做初始化操作，毕竟这是最合理的地方，只要你的控件支持序列化，那么它就能在任何被反序列化的时候执行初始化操作，这里适合做全局数据、状态的初始化工作，也适合手动添加子视图。</span></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">awakeFromNib</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 相较于 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithCoder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的优势是：当 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">awakeFromNib</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 执行的时候，各种 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">IBOutlet</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 也都连接好了；而 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithCoder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 调用的时候，虽然子视图已经被添加到视图层级中，但是还没有引用。如果你是基于 xib 或 storyboard 创建的控件，那么你可能需要对 IBOutlet 连接的子控件进行初始化工作，这种情况下，你只能在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">awakeFromNib</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 里进行处理。同时 xib 或 storyboard 对灵活性是有打折的，因为它们创建的代码无法被继承，所以当你选择用 xib 或 storyboard 来实现一个控件的时候，你已经不需要对灵活性有很高的要求了，唯一要做的是要保证用户一定是通过 xib 创建的此控件，否则可能是一个空的视图，可以在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithFrame</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 里放置一个 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">断言</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 或者异常来通知控件的用户。</span></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">最后还要注意视图层级的问题，比如你要给 View 放置一个背景，你可能会在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithCoder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 或 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">awakeFromNib</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 中这样写：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">[</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">addSubview:</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.backgroundView]; </span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 136, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">//</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> 通过懒加载一个背景 </span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">View</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">，然后添加到视图层级上</span></font></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><span style="box-sizing: border-box; color: rgb(153, 153, 153);"><font style="font-size: 14px;">1</font></span></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">你的本意是在控件的最下面放置一个背景，却有可能将这个背景覆盖到控件的最上方，原因是用户可能会在 xib 里写入这个控件，然后往它上面添加一些子视图，这样一来，用户添加的这些子视图会在你添加背景之前先进入视图层级，你的背景被添加后就挡住了用户的子视图。如果你想支持用户的这种操作，可以把 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">addSubview</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 替换成 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">insertSubview:atIndex:</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></font></div><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">同时支持从代码和文件中加载</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">如果你要同时支持 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithFrame</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 和 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithCoder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> ，那么你可以提供一个 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">commonInit</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法来做统一的初始化：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">id</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)initWithCoder:(NSCoder *)aDecoder {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> initWithCoder:aDecoder];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> commonInit];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">id</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)initWithFrame:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGRect</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)frame {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> initWithFrame:frame];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> commonInit];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)commonInit {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(136, 0, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">// do something ...</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">awakeFromNib</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法里就不要再去调用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">commonInit</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 了。</span></font></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.0980392); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><h2 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">调整布局的时机</font></span></h2><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">当一个控件被初始化以及开始使用之后，它的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">frame</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 仍然可能发生变化，我们也需要接受这些变化，因为你提供的是 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的接口，</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 有很多种初始化方式：</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithFrame</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">、</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithCoder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">、</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">init</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 和类方法 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">new</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，用户完全可以在初始化之后再设置 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">frame</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 属性，而且用户就算使用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">initWithFrame</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 来初始化也避免不了 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">frame</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的改变，比如在横竖屏切换的时候。为了确保当它的 Size 发生变化后其子视图也能同步更新，我们不能一开始就把布局写死（使用约束除外）。</span></font></div><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">基于 frame</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">如果你是直接基于 frame 来布局的，你应该确保在初始化的时候只添加视图，而不去设置它们的frame，把设置子视图 frame 的过程全部放到 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">layoutSubviews</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法里：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">- (instancetype)initWithCoder:(NSCoder *)aDecoder {</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> initWithCoder:aDecoder];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> commonInit];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (instancetype)initWithFrame:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGRect</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)frame {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> initWithFrame:frame];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> commonInit];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)layoutSubviews {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> layoutSubviews];</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.label</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.frame</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = CGRectInset(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.bounds</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">20</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">0</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">);</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)commonInit {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> addSubview:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.label</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UILabel</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)label {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (_label == </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">nil</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        _label = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UILabel</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> new];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        _label</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.textColor</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIColor</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> grayColor];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> _label;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">这么做就能保证 label 总是出现在正确的位置上。 </font></span></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">使用 layoutSubviews 方法有几点需要注意：</font></span></div></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><ol style="box-sizing: border-box; padding: 0px; list-style: decimal;"><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">不要依赖前一次的计算结果，应该总是根据当前最新值来计算</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><font style="font-size: 14px;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">由于 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">layoutSubviews</span><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法是在自身的 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">bounds</span><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 发生改变的时候调用， 因此 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIScrollView</span><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 会在滚动时不停地调用，当你只关心 Size 有没有变化的时候，可以把前一次的 Size 保存起来，通过与最新的 Size 比较来判断是否需要更新，在大多数情况下都能改善性能</span></font></li></ol></blockquote><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">基于 Auto Layout 约束</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">如果你是基于 Auto Layout 约束来进行布局，那么可以在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">commonInit</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 调用的时候就把约束添加上去，不要重写 layoutSubviews 方法，因为这种情况下它的默认实现就是根据约束来计算 frame。最重要的一点，把 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">translatesAutoresizingMaskIntoConstraints</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 属性设为 NO，以免产生 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">NSAutoresizingMaskLayoutConstraint</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 约束，如果你使用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Masonry</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 框架的话，则不用担心这个问题，</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">mas_makeConstraints</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法会首先设置这个属性为 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">NO</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">:</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)commonInit {</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    ...</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> setupConstraintsForSubviews];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)setupConstraintsForSubviews {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.label</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> mas_makeConstraints:^(MASConstraintMaker *make) {</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">        ...</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }];</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">支持 sizeToFit</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">如果你的控件对尺寸有严格的限定，比如有一个统一的宽高比或者是固定尺寸，那么最好能实现系统给出的约定成俗的接口。</font></span></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">sizeToFit 用在基于 frame 布局的情况下，由你的控件去实现 sizeThatFits: 方法：</font></span></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGSize</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)sizeThatFits:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGSize</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)size {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGSize</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> fitSize = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> sizeThatFits:size];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    fitSize</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.height</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> += </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.label</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.frame</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.size</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.height</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(136, 0, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">// 如果是固定尺寸，就像 UISwtich 那样返回一个固定 Size 就 OK 了</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> fitSize;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">然后在外部调用该控件的 sizeToFit 方法，这个方法内部会自动调用 sizeThatFits 并更新自身的 Size：</font></span></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">[</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.customView</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> sizeToFit];</span></font></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">在 ViewController 里调整视图布局</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">当执行 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">viewDidLoad</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法时，不要依赖 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">self.view</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 Size。很多人会这样写：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)viewDidLoad {</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    ...</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.label</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.width</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.view</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.width</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">这样是不对的，哪怕看上去没问题也只是碰巧没问题而已。当 viewDidLoad 方法被调用的时候，self.view 才刚刚被初始化，此时它的容器还没有对它的 frame 进行设置，如果 view 是从 xib 加载的，那么它的 Size 就是 xib 中设置的值；如果它是从代码加载的，那么它的 Size 和屏幕大小有关系，除了 Size 以外，Origin 也不会准确。整个过程看起来像这样：</font></span></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"><font style="font-size: 14px;">当访问 ViewController 的 view 的时候，ViewController 会先执行 loadViewIfRequired 方法，如果 view 还没有加载，则调用 loadView，然后是 viewDidLoad 这个钩子方法，最后是返回 view，容器拿到 view 后，根据自身的属性（如 edgesForExtendedLayout、判断是否存在 tabBar、判断 navigationBar 是否透明等）添加约束或者设置 frame。</font></span></div></blockquote><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">你至少应该设置 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">autoresizingMask</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 属性：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)viewDidLoad {</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    ...</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.label</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.width</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.view</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.width</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.label</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.autoresizingMask</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = UIViewAutoresizingFlexibleWidth;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">或者在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">viewDidLayoutSubviews</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 里处理：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)viewDidLayoutSubviews {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> viewDidLayoutSubviews];</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.label</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.width</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.view</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.width</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">如果是基于 Auto Layout 来布局，则在 viewDidLoad 里添加约束即可。</font></span></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.0980392); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><h2 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">正确的处理 touches 方法</font></span></h2><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">如果你需要重写 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">touches</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法，那么应该完整的重写这四个方法：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(void)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touchesBegan:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSSet</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touches withEvent:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event;</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(void)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touchesMoved:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSSet</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touches withEvent:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event;</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(void)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touchesEnded:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSSet</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touches withEvent:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event;</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(void)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touchesCancelled:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSSet</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touches withEvent:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event;</span></font></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">当你的视图在这四个方法执行的时候，如果已经对事件进行了处理，就不要再调用 super 的 touches 方法，super 的 touches 方法默认实现是在响应链里继续转发事件（UIView 的默认实现）。如果你的基类是 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIScrollView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 或者 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIButton</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 这些已经重写了事件处理的类，那么当你不想处理事件的时候可以调用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">self.nextResponder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">touches</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法来转发事件，其他的情况就调用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">super</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">touches</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法来转发，比如 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIScrollView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 可以这样来转发 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">触摸</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 事件：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (!</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.dragging</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.nextResponder</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> touchesBegan: touches withEvent:event]; </span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }       </font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> touchesBegan: touches withEvent: event];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)touchesMoved...</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)touchesEnded...</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)touchesCancelled...</span></font></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">这么实现以后，当你仅仅只是“碰”一个 UIScrollView 的时候，该事件就有可能被 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">nextResponder</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 处理。 </span></font></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">如果你没有实现自己的事件处理，也没有调用 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">nextResponder</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 和 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">super</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，那么响应链就会断掉。另外，尽量用手势识别器去处理自定义事件，它的好处是你不需要关心响应链，逻辑处理起来也更加清晰，事实上，</span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIScrollView</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 也是通过手势识别器实现的：</span></font></div></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em;"><div><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"><font style="font-size: 14px;">@property(nonatomic, readonly) UIPanGestureRecognizer *panGestureRecognizer NS_AVAILABLE_IOS(5_0); </font></span></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"><font style="font-size: 14px;">@property(nonatomic, readonly) UIPinchGestureRecognizer *pinchGestureRecognizer NS_AVAILABLE_IOS(5_0);</font></span></div></div></blockquote><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.0980392); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><h2 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">drawRect、CALayer 与动画</font></span></h2><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">drawRect</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法很适合做自定义的控件，当你需要更新 UI 的时候，只要用 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">setNeedsDisplay</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 标记一下就行了，这么做又简单又方便；控件也常常用于封装动画，但是动画却有可能被移除掉。 </span></font></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">需要注意的地方：</font></span></div></div><ol style="box-sizing: border-box; padding: 0px; list-style: decimal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><font style="font-size: 14px;"><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">在 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">drawRect</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 里尽量用 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">CGContext</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 绘制 UI。如果你用 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">addSubview</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 插入了其他的视图，那么当系统在每次进入绘制的时候，会先把当前的上下文清除掉（此处不考虑 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">clearsContextBeforeDrawing</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的影响），然后你也要清除掉已有的 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">subviews</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，以免重复添加视图；用户可能会往你的控件上添加他自己的子视图，然后在某个情况下清除所有的子视图（我就喜欢这么做）：</span><br/><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">[subviews makeObjectsPerformSelector:</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; background-color: rgb(255, 255, 255); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@selector</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(removeFromSuperview)];</span><br/><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(153, 153, 153); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">1</span></font></li><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><font style="font-size: 14px;"><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">用 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">CALayer</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 代替 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">。</span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">CALayer</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 节省内存，而且更适合去做一个“图层”，因为它不会接收事件、也不会成为响应链中的一员，但是它能够响应父视图（或 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">layer</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">）的尺寸变化，这种特性很适合做单纯的数据展示：</span><br/><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">CALayer *imageLayer = [CALayer layer];</span><br/><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">imageLayer</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.frame</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;"> = rect;</span><br/><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">imageLayer</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.contents</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;"> = (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">id</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">)image;</span><br/><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.view</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.layer</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;"> addSublayer:imageLayer];</span><br/><br/><br/></font></li><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><font style="font-size: 14px;"><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">如果有可能的话使用 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">setNeedsDisplayInRect</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 代替 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">setNeedsDisplay</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 以优化性能，但是遇到性能问题的时候应该先检查自己的绘图算法和绘图时机，我个人其实从来没有使用过 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">setNeedsDisplayInRect</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></font></li><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><font style="font-size: 14px;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">当你想做一个无限循环播放的动画的时候，可能会创建几个封装了动画的 CALayer，然后把它们添加到视图层级上，就像我在 </span><a href="http://blog.csdn.net/zhangao0086/article/details/38170359" style="box-sizing: border-box; outline: none; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">iOS 实现脉冲雷达以及动态增减元素 By Swift</a><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 中这么做的： </span><br/><br/><img src="面试   阿里P6一面_files/Image [10].gif" type="image/gif" data-filename="Image.gif" width="33%"/><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><br/><br/><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">效果还不错，实现又简单，但是当你按下 Home 键并再次返回到 app 的时候，原本好看的动画就变成了一滩死水：</span><br/><br/><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">这是因为在按下 Home 键的时候，所有的动画被移除了，具体的，每个 layer 都调用了 removeAllAnimations 方法。</span><br/><br/><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">如果你想重新播放动画，可以监听 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIApplicationDidBecomeActiveNotification</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 通知，就像我在 </span><a href="http://blog.csdn.net/zhangao0086/article/details/38170359" style="box-sizing: border-box; outline: none; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">上述博客</a><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 中做的那样。</span></font></li><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIImageView</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">drawRect</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 永远不会被调用：</span><br/><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Special Considerations</span><br/><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">The UIImageView class is optimized to draw its images to the display. UIImageView will not call drawRect: in a subclass. If your subclass needs custom drawing code, it is recommended you use UIView as the base class.</span></font></li><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">drawRect</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 也不一定会调用，我在 12 年的博客：</span><a href="http://blog.csdn.net/zhangao0086/article/details/7568998" style="box-sizing: border-box; outline: none; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">定制UINavigationBar</a><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 中曾经提到过 UIKit 框架的实现机制：</span><br/><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">众所周知一个视图如何显示是取决于它的 drawRect 方法，因为调这个方法之前 UIKit 也不知道如何显示它，但其实 drawRect 方法的目的也是画图（显示内容），而且我们如果以其他的方式给出了内容（图）的话， drawRect 方法就不会被调用了。</span><br/><span style="box-sizing: border-box; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">注：实际上 UIView 是 CALayer 的delegate，如果 CALayer 没有内容的话，会回调给 UIView 的 displayLayer: 或者 drawLayer:inContext: 方法，UIView 在其中调用 drawRect ，draw 完后的图会缓存起来，除非使用 setNeedsDisplay 或是一些必要情况，否则都是使用缓存的图。</span><br/><br/><br/><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 和 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">CALayer</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 都是模型对象，如果我们以这种方式给出内容的话，</span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">drawRect</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 也就不会被调用了：</span><br/><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.customView</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.layer</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.contents</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;"> = (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">id</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">)[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIImage</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;"> imageNamed:@</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(0, 136, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">&quot;AppIcon&quot;</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">];</span><br/><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(136, 0, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">// 哪怕是给它一个 nil，这两句等价</span><br/><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.customView</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.layer</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">.contents</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;"> = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">nil</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">;</span><br/><br/><br/><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">我猜测是在 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">CALayer</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">setContents</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法里有个标记，无论传入的对象是什么都会将该标记打开，但是调用 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">setNeedsDisplay</span><span style="box-sizing: border-box; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的时候会将该标记去除。</span></font></li></ol><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.0980392); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><h2 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">UIControl 与 UIButton</font></span></h2><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">如果要做一个可交互的控件，那么把 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIControl</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 作为基类就是首选，这个完美的基类支持各种状态：</span></font></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><ul style="box-sizing: border-box; padding: 0px; list-style: disc;"><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">enabled</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">selected</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">highlighted</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">tracking</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: disc;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">……</font></span></li></ul></blockquote><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">还支持多状态下的观察者模式：</font></span></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@property</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">nonatomic</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">,</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">readonly</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) UIControlState state;</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)addTarget:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">id</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents;</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)removeTarget:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">id</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents;</span></font></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">这个基类可以很方便地为视图添加各种点击状态，最常见的用法就是将 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIViewController</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">view</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 改成 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIControl</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，然后就能快速实现 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">resignFirstResponder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIButton</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 自带图文接口，支持更强大的状态切换，</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">titleEdgeInsets</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 和 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">imageEdgeInsets</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 也比较好用，配合两个基类的属性更好，先设置对齐规则，再设置 insets：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">property(nonatomic)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> UIControlContentVerticalAlignment contentVerticalAlignment</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;    </span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">property(nonatomic)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> UIControlContentHorizontalAlignment contentHorizontalAlignment</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIControl</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 和 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIButton</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 都能很好的支持 xib，可以设置各种状态下的显示和 Selector，但是对 UIButton 来说这些并不够，因为 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Normal</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 、</span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Highlighted</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 和 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Normal | Highlighted</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 是三种不同的状态，如果你需要实现根据当前状态显示不同高亮的图片，可以参考我下面的代码： </span></font></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [3].jpg" type="image/jpeg" data-filename="Image.jpg"/><img src="面试   阿里P6一面_files/Image [4].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></font></div></div></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)updateStates {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> setTitle:[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> titleForState:UIControlStateNormal] forState:UIControlStateNormal | UIControlStateHighlighted];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> setImage:[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> imageForState:UIControlStateNormal] forState:UIControlStateNormal | UIControlStateHighlighted];</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> setTitle:[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> titleForState:UIControlStateSelected] forState:UIControlStateSelected | UIControlStateHighlighted];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> setImage:[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> imageForState:UIControlStateSelected] forState:UIControlStateSelected | UIControlStateHighlighted];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">或者使用初始化设置：</font></span></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)commonInit {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> setImage:[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIImage</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> imageNamed:@</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 136, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">&quot;Normal&quot;</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">] forState:UIControlStateNormal];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> setImage:[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIImage</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> imageNamed:@</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 136, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">&quot;Selected&quot;</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">] forState:UIControlStateSelected];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> setImage:[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIImage</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> imageNamed:@</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 136, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">&quot;Highlighted&quot;</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">] forState:UIControlStateHighlighted];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> setImage:[</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIImage</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> imageNamed:@</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 136, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">&quot;Selected_Highlighted&quot;</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">] forState:UIControlStateSelected | UIControlStateHighlighted];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"><font style="font-size: 14px;">总之尽量使用原生类的接口，或者模仿原生类的接口。</font></span></div></blockquote><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">大多数情况下根据你所需要的特性来选择现有的基类就够了，或者用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView + 手势识别器</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的组合也是一个好方案，尽量不要用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">touches</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法（</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">userInteractionEnabled</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 属性对 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">touches</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 和</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">手势识别器</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">的作用一样），这是我在 </span><a href="https://github.com/zhangao0086/DKCarouselView/tree/1.4.0" style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); outline: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">DKCarouselView</a><a href="https://github.com/zhangao0086/DKCarouselView/tree/1.4.0" style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); outline: none; color: rgb(202, 12, 22); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> </a><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">中内置的一个可点击的 ImageView，也可以继承 UIButton，不过 UIButton 更侧重于状态，ImageView 侧重于图片本身：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">typedef</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(^DKCarouselViewTapBlock)();</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@interface</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">DKClickableImageView</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> : </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIImageView</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@property</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">nonatomic</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">assign</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">BOOL</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> enable;</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@property</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">nonatomic</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, copy) DKCarouselViewTapBlock tapBlock;</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">@end</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@implementation</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">DKClickableImageView</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (instancetype)initWithFrame:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGRect</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)frame {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> ((</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> initWithFrame:frame])) {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> commonInit];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">- (instancetype)initWithCoder:(NSCoder *)aDecoder {</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> ((</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> initWithCoder:aDecoder])) {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> commonInit];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)commonInit {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.userInteractionEnabled</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">YES</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.enable</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">YES</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> action:</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@selector</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(onTap:)];</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> addGestureRecognizer:tapGesture];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">IBAction</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)onTap:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">id</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)sender {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (!</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.enable</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">;</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.tapBlock</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.tapBlock</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">();</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">@end</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.0980392); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><h2 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">更友好的支持 xib</font></span></h2><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">你的控件现在应该可以正确的从文件、代码中初始化了，但是从 xib 中初始化以后可能还需要通过代码来进行一些设置，你或许觉得像上面那样设置 Button 的状态很恶心而且不够直观，但是也没办法，这是由于 xib 虽然对原生控件，如 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">、</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIImageView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">、</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIScrollView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 等支持较好（想设置圆角、边框等属性也没办法，只能通过 layer 来设置），但是对自定义控件却没有什么办法，当你拖一个 UIView 到 xib 中，然后把它的 Class 改成你自己的子类后，xib 如同一个瞎子一样，不会有任何变化。————好在这些都成了过去。</span></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">Xcode 6 引入了两个新的宏：</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">IBInspectable</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 和 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">IBDesignable</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">。</span></font></div><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">IBInspectable</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">该宏会让 xib 识别属性，它支持这些数据类型：布尔、字符串、数字（NSNumber）、 CGPoint、CGSize、CGRect、UIColor 、 NSRange 和 UIImage。 </font></span></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">比如我们要让自定义的 Button 能在 xib 中设置 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIControlStateSelected | UIControlStateHighlighted</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">状态的图片，就可以这么做：</span></font></div></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(136, 0, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">// CustomButton</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@property</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">nonatomic</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">strong</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) IBInspectable </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIImage</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *highlightSelectedImage;</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">void</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)setHighlightSelectedImage:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIImage</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)highlightSelectedImage {</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    _highlightSelectedImage = highlightSelectedImage;</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    [</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> setImage:highlightSelectedImage forState:UIControlStateHighlighted | UIControlStateSelected];</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">只需要在属性上加个 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">IBInspectable</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 宏即可，然后 xib 中就能显示这个自定义的属性： </span></font></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [5].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></font></div></div></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">xib 会把属性名以大驼峰样式显示，如果有多个属性，xib 也会自动按属性名的第一个单词分组显示，如： </font></span></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [10].png" type="image/png" data-filename="Image.png"/><br/></font></div></div></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">通过使用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">IBInspectable</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 宏，你可以把原本只能通过代码来设置的属性，也放到 xib 里来，代码就显得更加简洁了。</span></font></div><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">IBDesignable</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">xib 配合 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">IBInspectable</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 宏虽然可以让属性设置变得简单化，但是只有在运行期间你才能看到控件的真正效果，而使用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">IBDesignable</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 可以让 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">Interface Builder</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 实时渲染控件，这一切只需要在类名加上 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">IBDesignable</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 宏即可：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">IB_DESIGNABLE</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@interface</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CustomButton</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> : </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIButton</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">@property</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">nonatomic</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">strong</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">) IBInspectable </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIImage</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *highlightSelectedImage;</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">@end</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">这样一来，当你在 xib 中调整属性的时候，画布也会实时更新。</font></span></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><br/></font></div><div><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"><font style="font-size: 14px;">这是 Twitter 上其他开发者做出的效果： </font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [6].jpg" type="image/jpeg" data-filename="Image.jpg"/><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> </span></font></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [7].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></font></div></div></div></blockquote><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">相信通过使用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">IBInspectable / IBDesignable</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> ，会让控件使用起来更加方便、也更加有趣。</span></font></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.0980392); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><h2 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">不规则图形和事件触发范围</font></span></h2><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">不规则图形在 iOS 上并不多见，想来设计师也怕麻烦。不过 iOS 上的控件说到底都是各式各样的矩形，就算你修改 </span><span style="box-sizing: border-box; white-space: nowrap; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">cornerRadius</span><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，让它看起来像这样： </span></font></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [8].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></font></div></div></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">也只是看起来像这样罢了，它的实际事件触发范围还是一个矩形。</font></span></div><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">问题描述</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">想象一个复杂的可交互的控件，它并不是单独工作的，可能需要和另一个控件交互，而且它们的事件触发范围可能会重叠，像这个选择联系人的列表：</font></span></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [11].gif" type="image/gif" data-filename="Image.gif"/><br/></font></div></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">在设计的时候让上面二级菜单在最大的范围内可以被点击，下面的一级菜单也能在自己的范围内很好的工作，正常情况下它们的触发范围是这样的：</font></span></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [9].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></font></div></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">我们想要的是这样的：</font></span></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [10].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/></font></div></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">想要实现这样的效果需要对事件分发有一定的了解。首先我们来想想，当触摸屏幕的时候发生了什么?</font></span></div><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">当触摸屏幕的时候发生了什么?</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">当屏幕接收到一个 touch 的时候，iOS 需要找到一个合适的对象来处理事件（ touch 或者手势），要寻找这个对象，需要用到这个方法：</font></span></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- </span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIView</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">hitTest:</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGPoint</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">point withEvent:</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIEvent</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> *)</span><span style="box-sizing: border-box; white-space: pre; word-break: break-all; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event;</span></font></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><span style="box-sizing: border-box; color: rgb(153, 153, 153);"><font style="font-size: 14px;">1</font></span></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">该方法会首先在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">application</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">keyWindow</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 上调用（</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIWindow</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 也是 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的子类），并且该方法的返回值将被用来处理事件。如果这个 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">view</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">（无论是 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">window</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 还是普通的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">） 的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">userInteractionEnabled</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">属性被设置为 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">NO</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，则它的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">hitTest:</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 永远返回 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">nil</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，这意味着它和它的子视图没有机会去接收和处理事件。如果 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">userInteractionEnabled</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 属性为 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">YES</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，则会先判断产生触摸的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">point</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 是否发生在自己的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">bounds</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">内，如果没有也将返回 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">nil</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">；如果 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">point</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 在自己的范围内，则会为自己的每个子视图调用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">hitTest:</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法，只要有一个子视图通过这个方法返回一个 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 对象，那么整个方法就一层一层地往上返回；如果没有子视图返回 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 对象，则父视图将会把自己返回。</span></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">所以，在事件分发中，有这么几个关键点：</font></span></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><ol style="box-sizing: border-box; padding: 0px; list-style: decimal;"><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">如果父视图不能响应事件（userInteractionEnabled 为 NO），则其子视图也将无法响应事件。</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><font style="font-size: 14px;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">如果子视图的 frame 有一半在外面，就像这样： </span><br/><br/><img src="面试   阿里P6一面_files/Image [11].png" type="image/png" data-filename="Image.png"/><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><br/><br/><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">则在外面的部分是无法响应事件的，因为它超出了父视图的范围。</span></font></li><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">整个事件链只会返回一个 Hit-Test View 来处理事件。</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">子视图的顺序会影响到 Hit-Test View 的选择：最先通过 hitTest: 方法返回的 UIView 才会被返回，假如有两个子视图平级，并且它们的 frame 一样，但是谁是后添加的谁就优先返回。</font></span></li></ol></blockquote><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">了解了事件分发的这些特点后，还需要知道最后一件事：</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 如何判断产生事件的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">point</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 是否在自己的范围内? 答案是通过 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">pointInside</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法，这个方法的默认实现类似于这样：</span></font></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(136, 0, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">// point 被转化为对应视图的坐标系统</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">- (</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">BOOL</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)pointInside:(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGPoint</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)point withEvent:(UIEvent *)event {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> CGRectContainsPoint(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.bounds</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, point);</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">所以，当我们想改变一个 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">View</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的事件触发范围的时候，重写 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">pointInside</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法就可以了。</span></font></div><h3 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">回到问题</font></span></h3><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">针对这种视图一定要处理它们的事件触发范围，也就是 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">pointInside</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法，一般来说，我们先判断 point 是不是在自己的范围内（通过调用 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">super</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 来判断），然后再判断该 point 符不符合我们的处理要求：</span></font></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(111, 111, 111); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"><font style="font-size: 14px;">这个例子我用 Swift 来写</font></span></div></blockquote><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">override func pointInside</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(point: CGPoint, withEvent event: UIEvent?)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> -&gt;</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> Bool {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">let</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> inside = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.pointInside(point, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 136, 0); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">withEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: event)</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">if</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> inside {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">let</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> radius = self.layer.cornerRadius</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">let</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> dx = point.x - self.bounds.size.width / </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">2</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">let</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> dy = point.y - radius</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">let</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> distace = sqrt(dx * dx + dy * dy)</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> distace &lt; radius</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">return</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> inside</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">如果你要实现非矩形的控件，那么请在开发时处理好这类问题。 </font></span></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">这里附上一个很容易测试的小 Demo：</font></span></div></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 0, 136); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">class</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CustomView</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIControl</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> {</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    override init</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">frame</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGRect</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        super.init</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">frame</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">frame</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        self.backgroundColor = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIColor</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.redColor</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">()</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    required init</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">coder</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">aDecoder</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">NSCoder</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        super.init</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">coder</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">aDecoder</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        self.backgroundColor = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIColor</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.redColor</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">()</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    override func layoutSubviews</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">()</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        super.layoutSubviews</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">()</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">        self.layer.cornerRadius = self.bounds.size.width / 2</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    override func beginTrackingWithTouch</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touch</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UITouch</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">withEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> -&gt; </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">Bool</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        self.backgroundColor = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIColor</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.grayColor</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">()</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        return super.beginTrackingWithTouch</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touch</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">withEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    override func endTrackingWithTouch</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touch</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UITouch</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">withEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        super.endTrackingWithTouch</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">touch</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">withEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        self.backgroundColor = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIColor</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.redColor</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">()</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">    override func pointInside</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">point</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">CGPoint</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">withEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">UIEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">?)</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> -&gt; </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">Bool</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        let inside = super.pointInside</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">point</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">withEvent</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">: </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">event</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">        if inside {</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">            let radius = self.layer.cornerRadius</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">            let dx = point.x - self.bounds.size.width / 2</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">            let dy = point.y - radius</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">            let distace = sqrt</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">dx</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> * </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">dx</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> + </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">dy</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> * </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(102, 0, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">dy</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">)</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">            return distace &lt; radius</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">        }</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">        return inside</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.0980392); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><h2 style="box-sizing: border-box; padding: 0px; text-align: start; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.1; font-weight: normal;"><font style="font-size: 14px;">合理使用 KVO</font></span></h2><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">某些视图的接口比较宝贵，被你用掉后外部的使用者就无法使用了，比如 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UITextField</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">delegate</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，好在 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UITextField</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 还提供了通知和 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UITextInput</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 方法可以使用；像 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIScrollView</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 或者基于 UIScrollView 的控件，你既不能设置它的 delegate，又没有其他的替代方法可以使用，对于像以下这种需要根据某些属性实时更新的控件来说，</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">KVO</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 真是极好的：</span></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">这是一个动态高度 Header 的例子（</span><a href="https://github.com/zhangao0086/DKStickyHeaderView" style="box-sizing: border-box; outline: none; background-color: rgb(255, 255, 255); color: rgb(202, 12, 22); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">DKStickyHeaderView</a><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">）： </span></font></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [12].gif" type="image/gif" data-filename="Image.gif" width="40%"/><br/></font></div></div></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">这个是一个固定在 Bottom 的例子（</span><a href="https://github.com/zhangao0086/DKStickyFooterView" style="box-sizing: border-box; outline: none; background-color: rgb(255, 255, 255); color: rgb(202, 12, 22); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">DKStickyFooterView</a><span style="background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">）： </span></font></div><div><font style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><img src="面试   阿里P6一面_files/Image [13].gif" type="image/gif" data-filename="Image.gif" width="40%"/><br/></font></div></div></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">两者都是基于 UIScrollView、基于 KVO ，不依赖外部参数：</font></span></div><div style="box-sizing: border-box; white-space: nowrap; padding: 5px 5px 5px 60px; word-break: break-all; word-wrap: break-word; background-color: rgba(128, 128, 128, 0.0470588); border: 1px solid rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; overflow-y: hidden; overflow-x: auto; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">override func observeValueForKeyPath(keyPath: String, ofObject object: AnyObject, change: [NSObject : AnyObject], context: UnsafeMutablePointer&lt;Void&gt;) {</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    if keyPath == KEY_PATH_CONTENTOFFSET {</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        let scrollView = self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.superview</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> as! UIScrollView</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        var delta: CGFloat = </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">0.0</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        if scrollView</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.contentOffset</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.y</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> &lt; </span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">0.0</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> {</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">            delta = fabs(min(</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(0, 102, 102); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">0.0</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">, scrollView</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.contentOffset</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.y</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">))</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">        }</font></span></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        var newFrame = self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.frame</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        newFrame</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.origin</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.y</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = -delta</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        newFrame</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.size</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.height</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.minHeight</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> + delta</span></font></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        self</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.frame</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"> = newFrame</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    } else {</font></span></div><div><font style="font-size: 14px;"><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">        super</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(68, 68, 68); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">.observeValueForKeyPath</span><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;">(keyPath, ofObject: object, change: change, context: context)</span></font></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">    }</font></span></div><div><span style="box-sizing: border-box; white-space: pre; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; word-wrap: normal; background-color: rgba(128, 128, 128, 0.0470588); color: rgb(51, 51, 51); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45;"><font style="font-size: 14px;">}</font></span></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none;"><font style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">对容器类的 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">ViewController</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 来说也一样有用。在 iOS8 之前没有 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">UIContentContainer</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 这个正式协议，如果你要实现一个很长的、非列表、可滚动的 ViewController，那么你可能会将其中的功能分散到几个 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">ChildViewController</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 里，然后把它们组合起来，这样一来，这些 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">ChildViewController</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 既能被单独作为一个 ViewController 展示，也可以被组合到一起。作为组合到一起的前提，就是需要一个至少有以下两个方法的协议：</span></font></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><ol style="box-sizing: border-box; padding: 0px; list-style: decimal;"><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">提供一个统一的输入源，大多是一个 Model 或者像 userId 这样的</font></span></li><li style="box-sizing: border-box; padding: 0px; list-style: decimal;"><span style="background-color: rgba(128, 128, 128, 0.0470588); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"><font style="font-size: 14px;">能够返回你所需要的高度，比如设置 preferredContentSize 属性</font></span></li></ol></blockquote><div style="box-sizing: border-box; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><font style="font-size: 14px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">ChildViewController</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 动态地设置 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">contentSize</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;">，容器监听 </span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-caps: normal; font-variant-ligatures: normal;">contentSize</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-caps: normal; font-variant-ligatures: normal;"> 的变化动态地设置约束或者 frame。</span></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><br/></font></div><div><font style="font-size: 14px;"><br/></font></div><div style="direction: ltr; margin-top: 1em; margin-bottom: 1em;"><div><font style="font-size: 14px;"><br style="font-family: 'PingFang SC'; color: rgb(4, 51, 255);"/></font></div><div><font style="font-size: 14px;"><br/></font></div></div><div><br/></div></span>
</div></body></html> 