<html>
<head>
  <title>稀土掘金  (三十四) :RxSwift的使用</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="FA6DF383-B0C9-4DA7-8789-62CF954A5702"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="488"/>
<h1>稀土掘金  (三十四) :RxSwift的使用</h1>

<div>
<span><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 36px;">前言</span></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><a href="https://github.com/ReactiveX/RxSwift" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">RxSwift</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">是</span><a href="http://lib.csdn.net/base/swift" style="padding: 0px; box-sizing: border-box; color: rgb(223, 52, 52); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; font-weight: bold;" title="Swift知识库">Swift</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">函数响应式编程的一个开源库，由Github的</span><a href="https://github.com/ReactiveX" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">ReactiveX</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">组织开发，维护。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">RxSwift的目的是让</span><span style="padding: 0px; box-sizing: border-box; color: red; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">让数据/事件流和异步任务能够更方便的序列化处理，能够使用</span><a href="http://lib.csdn.net/base/swift" style="padding: 0px; box-sizing: border-box; color: rgb(223, 52, 52); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; font-weight: bold;" title="Swift知识库">swift</a><span style="padding: 0px; box-sizing: border-box; color: red; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">进行响应式编程</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">目前，RxSwift在Github上收到了5000+Star，600+fork。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">本文的目的</span></div><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">介绍RxSwift的核心思想</li><li style="box-sizing: border-box;">讲解RxSwift的基础使用</li><li style="box-sizing: border-box;">介绍RxSwift的优点</li></ul><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">如果你有时间，建议先读读RxSwift的</span><a href="https://github.com/ReactiveX/RxSwift/tree/master/Documentation" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">文档</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">，这会给你一个最基本的认识</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">本文不会讲解函数式编程，也不会讲解函数响应式编程的概念，计划后面单独出一篇博客来讲解Swift与函数式编程。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: red; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">本文来自于官方文档的翻译，官方example代码的阅读，以及自己的理解</span></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">RxSwift和ReativeCocoa</span></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">老一点的</span><a href="http://lib.csdn.net/base/ios" style="padding: 0px; box-sizing: border-box; color: rgb(223, 52, 52); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; font-weight: bold;" title="iOS知识库">iOS</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">开发者应该对</span><a href="https://github.com/ReactiveCocoa/ReactiveCocoa" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">ReativeCocoa</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">有一些了解，</span><a href="http://lib.csdn.net/base/ios" style="padding: 0px; box-sizing: border-box; color: rgb(223, 52, 52); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; font-weight: bold;" title="iOS知识库">ios</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">响应式编程的鼻祖。就个人来看</span></div><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">ReativeCocoa更适合OC，缺点语法复杂，概念繁多，参考资料少（尤其RAC4），不易理解</li><li style="box-sizing: border-box;">RxSwift对Swift的兼容很好，利用了很多的Swift特性，语法简单，概念清楚</li></ul><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">So，个人是非常推荐RxSwift的</span></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">Observables/Sequences</span></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">先复习下</span><a href="https://developer.apple.com/library/watchos/documentation/Swift/Reference/Swift_SequenceType_Protocol/index.html" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">SequenceType</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">。这是Swift中的一个协议，比如Swift中的Array就遵循这个协议，通过这个协议，你可以这样的去操作一个Array</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="color: rgb(0, 0, 136); box-sizing: border-box;">let</span> array = [<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>,<span style="color: rgb(0, 102, 102); box-sizing: border-box;">2</span>,<span style="color: rgb(0, 102, 102); box-sizing: border-box;">3</span>,<span style="color: rgb(0, 102, 102); box-sizing: border-box;">4</span>,<span style="color: rgb(0, 102, 102); box-sizing: border-box;">5</span>]<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">let</span> array2 = array.filter({$<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span> &gt; <span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>}).map({$<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span> * <span style="color: rgb(0, 102, 102); box-sizing: border-box;">2</span>})<span style="color: rgb(136, 0, 0); box-sizing: border-box;">//4 6 8 10</span><br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">var</span> indexGenerator = array2.generate()<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">let</span> fisrt = indexGenerator.next() <span style="color: rgb(136, 0, 0); box-sizing: border-box;">// 4</span><br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">let</span> seoncd = indexGenerator.next() <span style="color: rgb(136, 0, 0); box-sizing: border-box;">//6</span></code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">也就是说，把Array作为一个序列，然后依次对这个序列进行过滤，映射等操作,也可以通过indexGenerator来一个个的获取序列中的数据。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">RxSwift的核心思想和这个类似。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">RxSwift的核心是想是 </span><span style="padding: 2px 4px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-size: 13.5px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.075); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0px;">Observable&lt;Element&gt; sequence</span><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">，Observable表示可监听或者可观察，也就是说RxSwift的核心思想是</span><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; font-weight: bold;">可监听的序列</span><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">。并且，</span><span style="padding: 0px; box-sizing: border-box; color: red; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">Observable sequence可以接受异步信号，也就是说，信号是可以异步给监听者的</span></div><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">Observable(ObservableType) 和 SequenceType类似</li><li style="box-sizing: border-box;">ObservableType.subscribe 和 SequenceType.generate类似</li><li style="box-sizing: border-box;">由于RxSwift支持异步获得信号，所以用<span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">ObservableType.subscribe</span>，这和<span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">indexGenerator.next()</span>类似</li></ul><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: red; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">本文把RxSwift中的序列的每一个Element成为信号,因为异步的Element是与时间相关的，称作信号更好理解一点</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">RxSwift中，</span><span style="padding: 2px 4px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-size: 13.5px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.075); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0px;">ObservableType.subscribe</span><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">的回调（新的信号到来）一共有三种</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="color: rgb(0, 0, 136); box-sizing: border-box;">enum</span> Event&lt;Element&gt;  {<br/>    <span style="color: rgb(0, 0, 136); box-sizing: border-box;">case</span> Next(Element)      <span style="color: rgb(136, 0, 0); box-sizing: border-box;">// 新的信号到来</span><br/>    <span style="color: rgb(0, 0, 136); box-sizing: border-box;">case</span> Error(ErrorType)   <span style="color: rgb(136, 0, 0); box-sizing: border-box;">// 信号发生错误，序列不会再产生信号</span><br/>    <span style="color: rgb(0, 0, 136); box-sizing: border-box;">case</span> Completed          <span style="color: rgb(136, 0, 0); box-sizing: border-box;">// 序列发送信号完成，不会再产生新的信号</span><br/>}<br/>protocol ObserverType {<br/>    func on(<span style="color: rgb(0, 0, 136); box-sizing: border-box;">event</span>: Event&lt;Element&gt;) ／／监听所有的信号<br/>}<br/></code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">取消监听</span></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">Observable分为两种</span></div><ol style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">在有限的时间内会自动结束（Completed/Error）,比如一个网络请求当作一个序列，当网络请求完成的时候，Observable自动结束，资源会被释放</li><li style="box-sizing: border-box;">信号不会自己结束，最简单的比如一个Timer，每隔一段时间发送一个新的信号过来，这时候需要手动取消监听，来释放相应的资源,又比如一个label.rac_text是一个Obserable，通常需要这样调用<span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">addDisposableTo(disposeBag)</span>来让其在deinit，也就是所有者要释放的时候，自动取消监听。</li></ol><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="box-sizing: border-box;"><span style="color: rgb(0, 0, 136); box-sizing: border-box;">class</span> <span style="box-sizing: border-box; color: rgb(102, 0, 102);">Observable</span>&lt;<span style="box-sizing: border-box; color: rgb(102, 0, 102);">Element</span>&gt; {</span><br/>    func subscribe<span style="box-sizing: border-box;"><span style="color: rgb(102, 0, 102); box-sizing: border-box;">(observer: Observer&lt;Element&gt;)</span> -&gt;</span> Disposable <span style="color: rgb(0, 136, 0); box-sizing: border-box;">//</span>调用Disposable的方法来取消<br/>}<br/></code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">当然，除了手动释放，RxSwift提供了一些操作符，比如 </span><span style="padding: 2px 4px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-size: 13.5px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.075); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0px;">takeUntil</span><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">来根据条件取消</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">sequence<br/>    .takeUntil(<span style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>.rx_deallocated) <span style="color: rgb(136, 0, 0); box-sizing: border-box;">//当对象要释放的时候，取消监听</span><br/>    .subscribe {<br/>        <span style="color: rgb(0, 0, 136); box-sizing: border-box;">print</span>($<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span>)<br/>    }</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">信号处理的顺序</span></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">Observable有个隐式的约定，那就是在一个信号处理完成之前，不会发送下一个信号，不管发送信号的线程是并发的or串行的。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">比如</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="color: rgb(0, 0, 0); box-sizing: border-box;">someObservable</span><br/>  <span style="box-sizing: border-box; color: rgb(155, 112, 63);">.subscribe</span> <span style="box-sizing: border-box;">{ <span style="box-sizing: border-box;">(<span style="box-sizing: border-box;">e</span>:<span style="box-sizing: border-box; color: rgb(0, 102, 102);"> Event&lt;Element&gt;) in<br/>      <span style="box-sizing: border-box; color: rgb(0, 102, 102);">print(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;Event processing started&quot;</span>)</span><br/>      // processing<br/>      <span style="box-sizing: border-box; color: rgb(0, 102, 102);">print(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;Event processing ended&quot;</span>)</span><br/>  </span></span></span>}</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">只会出现</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="color: rgb(0, 0, 136); box-sizing: border-box;">Event</span> processing started<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">Event</span> processing ended<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">Event</span> processing started<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">Event</span> processing ended<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">Event</span> processing started<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">Event</span> processing ended</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">不会出现</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="color: rgb(0, 0, 136); box-sizing: border-box;">Event</span> processing started<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">Event</span> processing started<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">Event</span> processing ended<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">Event</span> processing ended</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: orange; font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">第一个例子</span></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">我们监听textfield的文字变化，然后，Log出text，当button点击的时候，取消这次监听</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="box-sizing: border-box;"><span style="color: rgb(0, 0, 136); box-sizing: border-box;">class</span> <span style="box-sizing: border-box; color: rgb(102, 0, 102);">ObservableAndCancelController</span> : <span style="box-sizing: border-box; color: rgb(102, 0, 102);">UIViewController</span>{<br/>    var subscription:<span style="box-sizing: border-box; color: rgb(102, 0, 102);">Disposable</span>?<br/><br/>    @<span style="box-sizing: border-box; color: rgb(102, 0, 102);">IBOutlet</span> weak var textfield: <span style="box-sizing: border-box; color: rgb(102, 0, 102);">UITextField</span>!<br/>    @<span style="box-sizing: border-box; color: rgb(102, 0, 102);">IBAction</span> func cancelObserve<span style="box-sizing: border-box;">(<span style="box-sizing: border-box; color: rgb(102, 0, 102);">sender</span>: <span style="box-sizing: border-box; color: rgb(102, 0, 102);">AnyObject</span>)</span> {<br/>        subscription?.dispose<span style="box-sizing: border-box;">()</span><br/>    }<br/>    override func viewDidLoad<span style="box-sizing: border-box;">()</span> {<br/>        super.viewDidLoad<span style="box-sizing: border-box;">()</span><br/>        subscription = textfield.rx_text.subscribeNext { <span style="box-sizing: border-box;">(<span style="box-sizing: border-box; color: rgb(102, 0, 102);">text</span>)</span> in<br/>            print<span style="box-sizing: border-box;">(<span style="box-sizing: border-box; color: rgb(102, 0, 102);">text</span>)</span><br/>        }<br/>    }<br/>}</span></code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><span style="box-sizing: border-box; padding: 0px 5px; color: red; font-family: 'microsoft yahei'; font-size: 15px; orphans: 2; widows: 2;">RxSwift用extensiton的方式，为UITextfield,UIlabel等控件添加了很多可监听的属性，这里的textfield.rx_text就是一个</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">效果：</span><span style="padding: 0px; box-sizing: border-box; color: orange; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">随着文字输入，实时Log出textfield的文字，当点击button之后，再输入，则不会Log</span></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 24px;">操作符(Operators)</font></span></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">在上文的第一个例子里面，你看到了监听信号，并且log出值。事实上，这样直接处理信号的时候是很少的，很多时候，我们需要对信号进行映射，过滤，这时候我们就要用到操作符了。在</span><a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/API.md" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">这个文档</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">里，你可以找到所有的操作符。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">关于操作符效果，你可以参见</span><a href="http://rxmarbles.com/#map" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">http://rxmarbles.com/</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">的可视化效果，这会给你一个更好的理解</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: orange; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">例子二，map,filter,combineLatest</span></div><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;"><a href="http://rxmarbles.com/#map" style="box-sizing: border-box; color: rgb(12, 137, 207);">map</a> 对信号（Element）进行映射处理。比如输入是String，影射到Bool</li><li style="box-sizing: border-box;"><a href="http://rxmarbles.com/#filter" style="box-sizing: border-box; color: rgb(12, 137, 207);">filter</a> 对信号(Element)进行过滤处理。返回信号，和输入的信号是同一种类型</li><li style="box-sizing: border-box;"><a href="http://rxmarbles.com/#combineLatest" style="box-sizing: border-box; color: rgb(12, 137, 207);">combineLatest</a> 对两种信号的值进行结合。可以返回不同种类的信号。</li></ul><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">例如</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">     let firstObserverable = firstTextfield<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.map</span>({<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;first&quot;</span> + $<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span>})<br/>     let secondObserverable = secondTextfield<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.filter</span>({$<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.</span>characters<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.count</span> &gt; <span style="color: rgb(0, 102, 102); box-sizing: border-box;">3</span>})<br/>      _ =  Observable<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.combineLatest</span>(firstObserverable, secondObserverable, resultSelector:{ ($<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span> + $<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>,$<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.</span>characters<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.count</span> + $<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1.</span>characters<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.count</span>)})<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeNext</span> { (element) <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>            print(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;combineLatest:\(element)&quot;</span>)<br/>      }        </code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">对于，每一个fistTextfield的信号，在字符串开始处增加”first”；对secondTextfield的信号进行过滤，当长度大于3的时候，才会继续传递。对两个信号进行结合，取truple类型，然后打印出来。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">所以，当我在fistTextfield中，输入1234，然后secondTextfield中依次输入abcdefg的时候</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="box-sizing: border-box;">combineLatest:</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;first1234abcd&quot;</span>, <span style="color: rgb(0, 102, 102); box-sizing: border-box;">13</span>)<br/><span style="box-sizing: border-box;">combineLatest:</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;first1234abcd3&quot;</span>, <span style="color: rgb(0, 102, 102); box-sizing: border-box;">14</span>)<br/><span style="box-sizing: border-box;">combineLatest:</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;first1234abcd&quot;</span>, <span style="color: rgb(0, 102, 102); box-sizing: border-box;">13</span>)<br/><span style="box-sizing: border-box;">combineLatest:</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;first1234abcde&quot;</span>, <span style="color: rgb(0, 102, 102); box-sizing: border-box;">14</span>)<br/><span style="box-sizing: border-box;">combineLatest:</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;first1234abcdef&quot;</span>, <span style="color: rgb(0, 102, 102); box-sizing: border-box;">15</span>)<br/><span style="box-sizing: border-box;">combineLatest:</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;first1234abcdefg&quot;</span>, <span style="color: rgb(0, 102, 102); box-sizing: border-box;">16</span>)</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: orange; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">例子三，创建一个Observable</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">Observerable可以用来处理任务，并且异步返回Event信号（Next,Error,Completion）</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">比如，这样一个方法</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="color: rgb(136, 0, 0); box-sizing: border-box;">//Observable就是处理输入，并且把description发送出去</span><br/>func createObserveable(<span style="color: rgb(0, 0, 136); box-sizing: border-box;">object</span>:AnyObject?)-&gt;Observable&lt;String?&gt;{<br/>    <span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> Observable.create({ observer <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        observer.onNext(<span style="color: rgb(0, 0, 136); box-sizing: border-box;">object</span>?.description)<br/>        observer.onCompleted()<br/>        <span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> NopDisposable.instance<br/>    })<br/>}</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">这样调用</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">_ = createObserveable(test).subscribe({ (<span style="color: rgb(0, 0, 136); box-sizing: border-box;">event</span>) <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>      <span style="color: rgb(0, 0, 136); box-sizing: border-box;">switch</span> <span style="color: rgb(0, 0, 136); box-sizing: border-box;">event</span>{<br/>      <span style="color: rgb(0, 0, 136); box-sizing: border-box;">case</span> .Next(let value):<br/>          <span style="color: rgb(0, 0, 136); box-sizing: border-box;">print</span>(value)<br/>      <span style="color: rgb(0, 0, 136); box-sizing: border-box;">case</span> .Completed:<br/>          <span style="color: rgb(0, 0, 136); box-sizing: border-box;">print</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;Completed&quot;</span>)<br/>      <span style="color: rgb(0, 0, 136); box-sizing: border-box;">case</span> .Error(let <span style="color: rgb(0, 0, 136); box-sizing: border-box;">error</span>):<br/>          <span style="color: rgb(0, 0, 136); box-sizing: border-box;">print</span>(<span style="color: rgb(0, 0, 136); box-sizing: border-box;">error</span>)<br/>      }<br/>  })</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">然后，Log如下</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">Optional(&quot;<span style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span style="box-sizing: border-box; color: rgb(0, 0, 136);">\n</span>    a = b;<span style="box-sizing: border-box; color: rgb(0, 0, 136);">\n</span>    1 = 2;<span style="box-sizing: border-box; color: rgb(0, 0, 136);">\n</span><span style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span>&quot;)<br/>Completed</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">可以看到，创建一个Observable相当容易，调用Observable.create，在必要的时候发送onNext,onError,onCompleted信号。然后返回一个Disposable用来取消信号</span></div><h3 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">throttle/retry/distinctUntilChanged/flatMapLatest</span></h3><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">throttle 忽略上一个信号的一段时间的变化,也就是说一段时间没有新的信号输入，才会向下发送</li><li style="box-sizing: border-box;">distinctUntilChanged 直到信号改变了再发送</li><li style="box-sizing: border-box;">retry 如果失败，重新尝试的次数</li><li style="box-sizing: border-box;">flatMapLatest 仅仅执行最新的信号，当有新的信号来的时候，取消上一次未执行完的整个序列</li></ul><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">最直接的例子就是搜索，通常我们想要</span></div><ol style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">用户用一段时间没有输入的时候，在进进行网络请求，不然网络请求太频繁，对客户端和服务器都是负担</li><li style="box-sizing: border-box;">当新的请求来的时候，如果上一个未完成，则取消上一个</li><li style="box-sizing: border-box;">如果网络失败，能重新请求几次就更好了</li></ol><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">这时候，用RxSwift你得代码会变的非常简单</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">let searchResults = searchBar<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.throttle</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.3</span>, scheduler: MainScheduler<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.instance</span>)<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.distinctUntilChanged</span>()<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.flatMapLatest</span> { query -&gt; Observable&lt;[Repository]&gt; <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        if query<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.isEmpty</span> {<br/>            return Observable<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.just</span>([])<br/>        }<br/><br/>        return doSearchAPI(query)<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.retry</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">3</span>)<br/>            <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.catchErrorJustReturn</span>([])<br/>    }<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.observeOn</span>(MainScheduler<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.instance</span>)</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><span style="box-sizing: border-box; padding: 0px 5px; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; orphans: 2; widows: 2;">这里简单讲解下作用</span></div><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">throttle(0.3, scheduler: MainScheduler.instance)</span> 保证用户没有输入0.3秒后再进行下一步</li><li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">distinctUntilChanged()</span> 假如0.3秒之前输入是ab，0.3秒后还是ab,则不会进行下一步，只有改变了才会进行下一步</li><li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">flatMapLatest</span> 保证只搜索最新的，如果之前的没有完成，会被自动取消</li><li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">doSearchAPI(query).retry(3)</span> 保证，如果发生错误，自动重试3次</li></ul><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">Schedulers</span></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/Schedulers.md" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">Schedulers</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;"> 抽象化了线程，线程池，GCD中操作队列，Runloop等概念。可以理解为，Schedulers就是一个执行任务的线程。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: red; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">有一点要注意：默认一个Observerable在其创建的线程上执行</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">与Schedulers相关的操作符有两个</span></div><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">observeOn(scheduler) 在一个scheduler上执行任务，使用场景较多</li><li style="box-sizing: border-box;">subscribeOn(scheduler) 在一个scheduler进行监听</li></ul><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">比如</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">sequence1<br/>  <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.observeOn</span>(backgroundScheduler)<br/>  <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.map</span> { n <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>      print(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;This is performed on the background scheduler&quot;</span>)<br/>  }<br/>  <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.observeOn</span>(MainScheduler<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.instance</span>)<br/>  <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.map</span> { n <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>      print(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;This is performed on the main scheduler&quot;</span>)<br/>  }<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeOn</span>(backgroundScheduler)<br/>  <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeNext</span>{ n <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>      print(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;This is performed on the background scheduler&quot;</span>)<br/>  }</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><span style="box-sizing: border-box; padding: 0px 5px; color: red; font-family: 'microsoft yahei'; font-size: 15px; orphans: 2; widows: 2;">默认一个subscribeNext或者subscribe在其调用的线程上执行</span></div><h3 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">Serial/Concurrent Schedulers 串行或并行</span></h3><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">和GCD的队列很相似，并行Schedulers的任务可以并发之行，串行Schedulers只能依次之行。不过RxSwift有内部机制，保证上文提到的</span><a href="http://blog.csdn.net/Hello_Hwc/article/details/51859330#%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%9A%84%E9%A1%BA%E5%BA%8F" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">信号处理的顺序</a></div><h3 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">RxSwift内置的Scheduler</span></h3><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">通常，使用内置的Scheduler足矣。</span></div><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">CurrentThreadScheduler</span>(串行) 当前线程Scheduler，默认使用的</li><li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">MainScheduler</span>(串行) 主线程</li><li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">SerialDispatchQueueScheduler</span> 封装了GCD的串行队列</li><li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">ConcurrentDispatchQueueScheduler</span> 封装了GCD的并行队列，这个在有任务要在后台执行的时候很有用</li><li style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 13.5px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">OperationQueueScheduler</span> 封装了NSOperationQueue</li></ul><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: orange; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">例子四，在后台Scheduler之行任务，然后在主线程上更新UI</span></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">Variable</span></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/GettingStarted.md#variables" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">Variable</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">表示一个可监听的</span><a href="http://lib.csdn.net/base/datastructure" style="padding: 0px; box-sizing: border-box; color: rgb(223, 52, 52); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; font-weight: bold;" title="算法与数据结构知识库">数据结构</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">。使用Variable，你可以监听数据的变化，也可以把其他值绑定到它身上。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: red; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">当Variable被释放的时候，它会向监听者发送onCompleted</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: orange; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">例子五，Variable进行监听</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="box-sizing: border-box;"><span style="color: rgb(0, 0, 136); box-sizing: border-box;">class</span> <span style="box-sizing: border-box; color: rgb(102, 0, 102);">VariableController</span>: <span style="box-sizing: border-box; color: rgb(102, 0, 102);">UIViewController</span> {<br/><br/>    @<span style="box-sizing: border-box; color: rgb(102, 0, 102);">IBOutlet</span> weak var label: <span style="box-sizing: border-box; color: rgb(102, 0, 102);">UILabel</span>!<br/>    var timer:<span style="box-sizing: border-box; color: rgb(102, 0, 102);">NSTimer</span>?<br/>    var count = <span style="box-sizing: border-box; color: rgb(102, 0, 102);">Variable</span><span style="box-sizing: border-box;">(0)</span><br/>    override func viewDidLoad<span style="box-sizing: border-box;">()</span> {<br/>        super.viewDidLoad<span style="box-sizing: border-box;">()</span><br/>        timer = <span style="box-sizing: border-box; color: rgb(102, 0, 102);">NSTimer</span>.scheduledTimerWithTimeInterval<span style="box-sizing: border-box;">(1.0, <span style="box-sizing: border-box; color: rgb(102, 0, 102);">target</span>: <span style="box-sizing: border-box; color: rgb(102, 0, 102);">self</span>, <span style="box-sizing: border-box; color: rgb(102, 0, 102);">selector</span>:#<span style="box-sizing: border-box; color: rgb(102, 0, 102);">selector</span>(<span style="box-sizing: border-box; color: rgb(102, 0, 102);">VariableController</span>.<span style="box-sizing: border-box; color: rgb(102, 0, 102);">updateValue</span>)</span> , userInfo: nil, repeats: true)<br/>        _ = count.asObservable<span style="box-sizing: border-box;">()</span>.subscribeNext { <span style="box-sizing: border-box;">(<span style="box-sizing: border-box; color: rgb(102, 0, 102);">num</span>)</span> in<br/>            self.label?.text = &quot;<span style="box-sizing: border-box; color: rgb(102, 0, 102);">VariableValue</span>:\<span style="box-sizing: border-box;">(<span style="box-sizing: border-box; color: rgb(102, 0, 102);">num</span>)</span>&quot;<br/>        }<br/>    }<br/>    func updateValue<span style="box-sizing: border-box;">()</span>{<br/>        count.value = count.value + 1<br/>    }<br/>    override func viewDidDisappear<span style="box-sizing: border-box;">(<span style="box-sizing: border-box; color: rgb(102, 0, 102);">animated</span>: <span style="box-sizing: border-box; color: rgb(102, 0, 102);">Bool</span>)</span> {<br/>        super.viewDidDisappear<span style="box-sizing: border-box;">(<span style="box-sizing: border-box; color: rgb(102, 0, 102);">animated</span>)</span><br/>        timer?.invalidate<span style="box-sizing: border-box;">()</span><br/>    }<br/>}</span></code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><span style="box-sizing: border-box; padding: 0px 5px; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 2.13em; orphans: 2; widows: 2;">数据绑定</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">数据绑定是开发的时候很常见的，比如根据文本的输入动态调整textfield的背景色，动态调整按钮的enable。亦或者根据textfield的输入变化，动态的去反馈到model层。如果你听过MVVM，那你肯定知道，MVVM的难点就是ViewModel与View的数据绑定问题。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">不过，使用RxSwift，数据绑定变的十分容易，你甚至可以把数据绑定到tableview和collectionView上去。</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="padding: 0px; box-sizing: border-box; color: orange; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">例子六，bindTo</span><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">很简单，随着Switch的开关，view进行显示/隐藏</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><img src="稀土掘金  (三十四) RxSwift的使用_files/Image.gif" type="image/gif" data-filename="Image.gif" width="200"/><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"> </span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">只需要一行代码</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">_ = mySwitch<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_value<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.bindTo</span>(testView<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_hidden)</code></pre><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: orange; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">例子七，根据输入，进行View状态绑定</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">我们想要实现这样的状态</span></div><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">用户名至少6位，小于6位，则背景色是灰色，合法则透明</li><li style="box-sizing: border-box;">密码至少位8位，小于8位，则背景色是灰色，合法则透明</li><li style="box-sizing: border-box;">当用户名和密码都合法的时候，注册按钮enable，并且背景色变红</li></ul><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="稀土掘金  (三十四) RxSwift的使用_files/Image [1].gif" type="image/gif" data-filename="Image.gif" width="300"/><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">信号的处理方式如下，</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">        let nameObserable = nameTextfield<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.shareReplay</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>)<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.map</span>({$<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.</span>characters<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.count</span> &gt;= <span style="color: rgb(0, 102, 102); box-sizing: border-box;">6</span>}) <br/>        let pwdObserable = passwordTextfield<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.shareReplay</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>)<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.map</span>({$<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.</span>characters<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.count</span> &gt;= <span style="color: rgb(0, 102, 102); box-sizing: border-box;">8</span>})<br/><br/>        _ = nameObserable<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeNext</span>({ (valid) <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>            self<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.nameTextfield</span><span style="color: rgb(68, 68, 68); box-sizing: border-box;">.backgroundColor</span> = valid ? UIColor<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.clearColor</span>():UIColor<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.lightGrayColor</span>()<br/>        })<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)<br/><br/>        _ = pwdObserable<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeNext</span>({ (valid) <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>            self<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.passwordTextfield</span><span style="color: rgb(68, 68, 68); box-sizing: border-box;">.backgroundColor</span> = valid ? UIColor<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.clearColor</span>(): UIColor<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.lightGrayColor</span>()<br/>        })<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)//addDisposableTo(disposeBag)是为了自动释放<br/><br/>        _ = Observable<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.combineLatest</span>(nameObserable, pwdObserable) {$<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span> &amp;&amp; $<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>}<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeNext</span>({valid <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>                if valid{<br/>                    self<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.registerButton</span><span style="color: rgb(68, 68, 68); box-sizing: border-box;">.enabled</span> = true<br/>                    self<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.registerButton</span><span style="color: rgb(68, 68, 68); box-sizing: border-box;">.backgroundColor</span> = UIColor<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.redColor</span>()<br/>                }else{<br/>                    self<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.registerButton</span><span style="color: rgb(68, 68, 68); box-sizing: border-box;">.enabled</span> = false<br/>                    self<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.registerButton</span><span style="color: rgb(68, 68, 68); box-sizing: border-box;">.backgroundColor</span> = UIColor<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.darkGrayColor</span>()<br/>                }<br/>            })<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)<br/>        _ = registerButton<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_tap<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.shareReplay</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>)<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeNext</span> {<br/>            print(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;Button tapped&quot;</span>)<br/>        }</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><h3 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">共享监听Sharing subscription－</span><span style="padding: 2px 4px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'Source Code Pro', monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.0745098); font-size: 24px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;">shareReplay</span></h3><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">这个是很常用的，比如一个Obserable用做网络请求，通常，当你这样调用的时候，会创建两个序列，也就是会进行两次网络请求，这是不需要的</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="color: rgb(0, 0, 136); box-sizing: border-box;">let</span> network = networkWithText(text)<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">let</span> subscription1 = network<br/>    .subscribeNext { n <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>       <span style="color: rgb(136, 0, 0); box-sizing: border-box;">//创建第一个序列</span><br/>    }<br/><span style="color: rgb(0, 0, 136); box-sizing: border-box;">let</span> subscription2 = network<br/>    .subscribeNext { n <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>       <span style="color: rgb(136, 0, 0); box-sizing: border-box;">//创建第二个序列</span><br/>    }</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">为了共享一个序列，你只需要这这样调用</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="color: rgb(0, 0, 136); box-sizing: border-box;">let</span> network = networkWithText(<span style="color: rgb(0, 0, 136); box-sizing: border-box;">text</span>).shareReplay(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>)</code></pre><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: red; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">就只会进行一次网络请求，两个subscription共享结果，也就是shareReplay的意思</span></div><h3 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">自定义可绑定属性</span></h3><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">上文，textfield和button的状态绑定是手动的，这无疑是不方便的。RxSwift为我们提供了一种方式，来自定义可绑定属性</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">创建两个exetnsion</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">extension UITextField{<br/>    var ex_validState:AnyObserver&lt;Bool&gt;{<br/>        return UIBindingObserver(UIElement: self) { textfield, valid <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>                textfield<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.backgroundColor</span> = valid ? UIColor<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.clearColor</span>():UIColor<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.lightGrayColor</span>()<br/>            }<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.asObserver</span>()<br/>    }<br/>}<br/>extension UIButton{<br/>    var ex_validState:AnyObserver&lt;Bool&gt;{<br/>        return UIBindingObserver(UIElement: self) { button, valid <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>                button<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.enabled</span> = valid<br/>            button<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.backgroundColor</span> = valid ? UIColor<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.redColor</span>() : UIColor<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.darkGrayColor</span>()<br/>            }<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.asObserver</span>()<br/>    }<br/>}</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">然后，上文的代码，就可以简化成三行了，So easy</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">        _ = nameObserable<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.bindTo</span>(nameTextfield<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.ex</span>_validState)<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)<br/>        _ = pwdObserable<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.bindTo</span>(passwordTextfield<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.ex</span>_validState)<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)<br/><br/>        _ = Observable<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.combineLatest</span>(nameObserable, pwdObserable) {$<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span> &amp;&amp; $<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>}<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.bindTo</span>(registerButton<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.ex</span>_validState)<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">Driver</span></h2><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left-width: 10px; border-left-style: solid; border-left-color: rgba(128, 128, 128, 0.0745098); background-color: rgba(128, 128, 128, 0.0470588); border-top-left-radius: 0px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 0px; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; box-sizing: border-box; line-height: 1.25; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; line-height: 1.25; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">Driver是RxSwift精心制作的，专门提供给UI层的一个接口。</span></div></blockquote><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">利用Driver你可以</span></div><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">利用CoreData的模型来驱动UI</li><li style="box-sizing: border-box;">利用UI的状态来绑定其他UI的状态</li></ul><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: red; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">Driver能够保证，在主线程上监听，因为UIKit不是需要在主线程上操作</span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: orange; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">Tips: </span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: orange; font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">RxSwift中做数据绑定有三种</span></div><ol style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">利用BindTo方法</li><li style="box-sizing: border-box;">利用Driver(强烈建议使用这个，)</li><li style="box-sizing: border-box;">利用KVO来手动绑定（很少用到）</li></ol><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">回到Driver上来，上文提到了，对于搜索，我们可以这么做，</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">let results = query<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.throttle</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.3</span>, scheduler: MainScheduler<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.instance</span>) //延迟<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.3</span>秒<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.flatMapLatest</span> { query <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span> //永远只执行最新的<br/>        searchWithText(query)<br/>    }<br/><br/>results<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.map</span> { <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;\($0.count)&quot;</span> } <br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.bindTo</span>(resultCount<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text)//绑定label<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)<br/><br/>results<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.bindTo</span>(resultsTableView<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_itemsWithCellIdentifier(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;Cell&quot;</span>)) { (_, result, cell) <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span> //绑定tableview<br/>        cell<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.textLabel</span>?<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.text</span> = <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;\(result)&quot;</span><br/>    }<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)<br/></code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">那么，这有什么缺陷呢？ </span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></div><ol style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">假如searchWithText失败了，那么整个序列就断掉了，后面的绑定不会有任何作用</li><li style="box-sizing: border-box;">假如searchWithText是在后台线程执行的，那么后续绑定是在后台线程上进行的，会崩溃</li><li style="box-sizing: border-box;">绑定了两次，意味着会执行两次</li></ol><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">于是，我们需要进行额外的操作，来避免上述缺陷。</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">let results = query<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.throttle</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.3</span>, scheduler: MainScheduler<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.instance</span>) <br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.flatMapLatest</span> { query <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        fetchAutoCompleteItems(query)<br/>            <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.observeOn</span>(MainScheduler<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.instance</span>)  // 保证在主线程（解决缺陷<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>）<br/>            <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.catchErrorJustReturn</span>([])           // 发生错误，返回空数组（解决缺陷<span style="color: rgb(0, 102, 102); box-sizing: border-box;">2</span>）<br/>                }<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.shareReplay</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>)                             // 共享监听，保证只执行一次（解决缺陷<span style="color: rgb(0, 102, 102); box-sizing: border-box;">3</span>）                                               <br/>results<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.map</span> { <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;\($0.count)&quot;</span> }<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.bindTo</span>(resultCount<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text)<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)<br/><br/>results<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.bindTo</span>(resultTableView<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_itemsWithCellIdentifier(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;Cell&quot;</span>)) { (_, result, cell) <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        cell<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.textLabel</span>?<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.text</span> = <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;\(result)&quot;</span><br/>    }<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">利用Driver我们可以将上述过程简化</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">let results = query<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.asDriver</span>()        // 转换成Driver序列<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.throttle</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.3</span>, scheduler: MainScheduler<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.instance</span>)<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.flatMapLatest</span> { query <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        fetchAutoCompleteItems(query)<br/>            <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.asDriver</span>(onErrorJustReturn: [])  // 告诉Driver发生错误怎么办<br/>                }<br/><br/>results<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.map</span> { <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;\($0.count)&quot;</span> }<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.drive</span>(resultCount<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_text)               // 用Driver绑定，不需要切换到主线程<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)                                                            <br/>results<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.drive</span>(resultTableView<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_itemsWithCellIdentifier(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;Cell&quot;</span>)) { (_, result, cell) <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        cell<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.textLabel</span>?<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.text</span> = <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;\(result)&quot;</span><br/>    }<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.addDisposableTo</span>(disposeBag)</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">任何满足以下三个条件的Observer序列都可以转换为Driver</span></div><ol style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">不会因为错误就序列断掉（比如，有错误，但是没有调用onError来发送错误）</li><li style="box-sizing: border-box;">在主线程傻姑娘监听</li><li style="box-sizing: border-box;">共享 side effects</li></ol><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">对于，使用者只需要调用</span><span style="padding: 2px 4px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-size: 13.5px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.075); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0px;">asDriver(onErrorJustReturn: [])</span><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">就能保证上述三点都实现了</span></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">KVO</span></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">通常的KVO，你需要在这个函数里来处理</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="box-sizing: border-box;">-<span style="color: rgb(102, 0, 102); box-sizing: border-box;">(void)</span>observeValueForKeyPath:<span style="color: rgb(102, 0, 102); box-sizing: border-box;">(<span style="color: rgb(102, 0, 102); box-sizing: border-box;">NSString</span> *)</span>keyPath<br/>                     ofObject:<span style="color: rgb(102, 0, 102); box-sizing: border-box;">(id)</span>object<br/>                       change:<span style="color: rgb(102, 0, 102); box-sizing: border-box;">(<span style="color: rgb(102, 0, 102); box-sizing: border-box;">NSDictionary</span> *)</span>change<br/>                      context:<span style="color: rgb(102, 0, 102); box-sizing: border-box;">(void *)</span>context</span></code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">而使用RxSwift,KVO变成了这样</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">view<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_observe(CGRect<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.self</span>, <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;frame&quot;</span>)<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeNext</span> { frame <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        print(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;Got new frame \(frame)&quot;</span>)<br/>    }</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">或者这样</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">someSuspiciousViewController<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_observeWeakly(Bool<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.self</span>, <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;behavingOk&quot;</span>)<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeNext</span> { behavingOk <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        print(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;Cats can purr? \(behavingOk)&quot;</span>)<br/>    }</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">二者的区别是</span></div><blockquote style="box-sizing: border-box; padding: 15px 20px; border-left: 10px solid rgba(128, 128, 128, 0.075); background-color: rgba(128, 128, 128, 0.05); border-radius: 0px 5px 5px 0px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><div style="padding: 0px; box-sizing: border-box; line-height: 1.25; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; line-height: 1.25; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;">在rx_observe可以使用地方都可以使用rx_observeWeakly。rx_observeWeakly的执行效率要低一点，因为要处理对象的dealloc关系。除此之外，rx_observeWeakly还可以用在weak属性上。</span></div></blockquote><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">在使用view.rx_observe的时候，有</span><a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/GettingStarted.md#rx_observe" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">几点要注意</a></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">由于KVO是建立在NSObject子类的基础上的，你可以通过</span><a href="https://github.com/ReactiveX/RxSwift/blob/master/RxCocoa/Common/KVORepresentable+CoreGraphics.swift" style="padding: 0px; box-sizing: border-box; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">如下方法</a><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">，来让Structs支持KVO</span></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><font style="font-size: 24px;"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Notific</span><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">ation</span></font></h2><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">使用RxSwift，Notification变的十分简洁</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">NSNotificationCenter<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.defaultCenter</span>()<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.rx</span>_notification(UITextViewTextDidBeginEditingNotification, object: myTextView)<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.map</span> { <span style="color: rgb(136, 0, 0); box-sizing: border-box;">/*do something with data*/</span> }<br/>    ....</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">DEBUG</span></h2><h3 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 1.73em;">调试</span><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 24px;">编译</span><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 1.73em;">问题</span></h3><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">Swift是一个强类型语言，能够在绝大部分场景自动推断出变量的类型。比如</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;"><span style="color: rgb(0, 0, 136); box-sizing: border-box;">let</span>  a = <span style="color: rgb(0, 102, 102); box-sizing: border-box;">10</span> <span style="color: rgb(136, 0, 0); box-sizing: border-box;">//Int</span></code></pre><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">但是，有些时候RxSwift的序列处理会报编译错误 </span></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br/></div><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">比如</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">images = <span style="color: rgb(102, 0, 102); box-sizing: border-box;">word</span><br/>    .<span style="color: rgb(102, 0, 102); box-sizing: border-box;">filter</span> { $<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.</span>containsString(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;important&quot;</span>) }<br/>    .flatMap { <span style="color: rgb(102, 0, 102); box-sizing: border-box;">word</span> <span style="box-sizing: border-box;">in</span><br/>        <span style="box-sizing: border-box;">return</span> self.api.loadFlickrFeed(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;karate&quot;</span>)<br/>            .catchError { error <span style="box-sizing: border-box;">in</span><br/>                <span style="box-sizing: border-box;">return</span> just(JSON(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>))<br/>            }<br/>      }</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><span style="box-sizing: border-box; padding: 0px 5px; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; orphans: 2; widows: 2;">如果，Swift没办法推断出类型，那么最直接的方式，就是显式的告诉Swift类型是什么</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">images = word<br/>    .filter { <span style="box-sizing: border-box;"><span style="color: rgb(102, 0, 102); box-sizing: border-box;">(s: String)</span> -&gt;</span> Bool <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span> s.containsString(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;important&quot;</span>) } <span style="color: rgb(0, 136, 0); box-sizing: border-box;">//</span>输入是 string ,返回Bool<br/>    .flatMap { <span style="box-sizing: border-box;"><span style="color: rgb(102, 0, 102); box-sizing: border-box;">(word: String)</span> -&gt;</span> Observable&lt;JSON&gt; <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        <span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> self.api.loadFlickrFeed(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;karate&quot;</span>)<br/>            .catchError { <span style="box-sizing: border-box;"><span style="color: rgb(102, 0, 102); box-sizing: border-box;">(error: NSError)</span> -&gt;</span> Observable&lt;JSON&gt; <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>                <span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> just(JSON(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>))<br/>            }<br/>      }</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><h3 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 1.73em;">调试</span></h3><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">使用Debug操作符，会log所有的数据流</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">let subscription = myInterval(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.1</span>)<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.debug</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;my probe&quot;</span>)<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.map</span> { e <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        return <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;This is simply \(e)&quot;</span><br/>    }<br/>    <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeNext</span> { n <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        print(n)<br/>    }<br/><br/>NSThread<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.sleepForTimeInterval</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">0.5</span>)<br/><br/><br/>subscription<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.dispose</span>(</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><span style="box-sizing: border-box; padding: 0px 5px; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; orphans: 2; widows: 2;">你可以用自定义操作符的方式，来Log</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">extension ObservableType {<br/>    public func myDebug<span style="box-sizing: border-box;"><span style="color: rgb(102, 0, 102); box-sizing: border-box;">(identifier: String)</span> -&gt;</span> Observable&lt;Self.E&gt; {<br/>        <span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> Observable.create { observer <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>            <span style="color: rgb(102, 0, 102); box-sizing: border-box;">print</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;subscribed \(identifier)&quot;</span>)<br/>            <span style="box-sizing: border-box;">let</span> subscription = self.subscribe { e <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>                <span style="color: rgb(102, 0, 102); box-sizing: border-box;">print</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;event \(identifier)  \(e)&quot;</span>)<br/>                <span style="color: rgb(0, 0, 136); box-sizing: border-box;">switch</span> e {<br/>                <span style="box-sizing: border-box;">case</span> .Next(<span style="box-sizing: border-box;">let</span> value):<br/>                    observer.<span style="color: rgb(0, 102, 102); box-sizing: border-box;">on</span>(.Next(value))<br/><br/>                <span style="box-sizing: border-box;">case</span> .Error(<span style="box-sizing: border-box;">let</span> error):<br/>                    observer.<span style="color: rgb(0, 102, 102); box-sizing: border-box;">on</span>(.Error(error))<br/><br/>                <span style="box-sizing: border-box;">case</span> .<span style="box-sizing: border-box; color: rgb(0, 136, 0);">Completed</span>:<br/>                    observer.<span style="color: rgb(0, 102, 102); box-sizing: border-box;">on</span>(.Completed)<br/>                }<br/>            }<br/>            <span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> AnonymousDisposable {<br/>                   <span style="color: rgb(102, 0, 102); box-sizing: border-box;">print</span>(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;disposing \(identifier)&quot;</span>)<br/>                   subscription.dispose()<br/>            }<br/>        }<br/>    }<br/> }<br/></code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><div style="box-sizing: border-box; padding: 0px 5px;"><br/></div><h3 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 24px;">调试内存泄漏问题</font></span></h3><div style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">RxSwift通过</span><span style="padding: 2px 4px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;Source Code Pro&quot;, monospace; font-size: 13.5px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: nowrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgba(128, 128, 128, 0.075); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0px;">RxSwift.resourceCount</span><span style="padding: 0px; box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; text-decoration-style: initial; text-decoration-color: initial;">记录资源分配情况，所以通常的调试方式如下</span></div><pre style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; overflow-y: hidden; overflow-x: auto; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; background: transparent; color: inherit; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: inherit; white-space: pre; border-radius: 0px; word-wrap: normal;">  <span style="color: rgb(136, 0, 0); box-sizing: border-box;">/* 在AppDelegate方法中添加Log<br/>    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool<br/>    */</span><br/>    _ = Observable&lt;Int&gt;<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.interval</span>(<span style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>, scheduler: MainScheduler<span style="color: rgb(68, 68, 68); box-sizing: border-box;">.instance</span>)<br/>        <span style="color: rgb(68, 68, 68); box-sizing: border-box;">.subscribeNext</span> { _ <span style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span><br/>        print(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;Resource count \(RxSwift.resourceCount)&quot;</span>)<br/>    }</code></pre><div style="box-sizing: border-box; padding: 0px 5px;"><span style="box-sizing: border-box; padding: 0px 5px; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-size: 15px; orphans: 2; widows: 2;">然后</span></div><ol style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">进入相关界面，进行正常操作</li><li style="box-sizing: border-box;">退出界面</li><li style="box-sizing: border-box;">观察RxSwift.resourceCount</li><li style="box-sizing: border-box;">在进入同一个界面，退出</li><li style="box-sizing: border-box;">观察RxSwift.resourceCount</li></ol><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><font style="font-size: 24px;"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">使用</span><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font></font></span><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">心得</span></font></h2><ol style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="box-sizing: border-box;">时刻牢记，使用RxSwift，尽量把所有的任务（可以理解为方法）抽象成Obserable（序列）和Obserable创建者，监听者</li><li style="box-sizing: border-box;">能用数据绑定的（bindTo和Driver）的就不要手动绑定</li><li style="box-sizing: border-box;">一定要熟练RxSwift提供的操作符，要会自定义操作符</li></ol><hr style="box-sizing: border-box; border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.1); color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"/><h2 style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><font style="font-size: 24px;"><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">RxSw</span><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">ift的优点</span><span style="padding: 0px; box-sizing: border-box; line-height: 1.3em; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font></font></span></font></h2><ul style="box-sizing: border-box; color: rgb(63, 63, 63); font-family: 'microsoft yahei'; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box;">Composable 可组合，在设计模式中有一种模式叫做组合模式，你可以方便的用不同的组合实现不同的类</li><li style="font-size: 15px; box-sizing: border-box;">Reusable 代码可重用，原因很简单，对应RxSwift，就是一堆Obserable</li><li style="font-size: 15px; box-sizing: border-box;">Declarative 响应式的，因为状态不可变，只有数据变化</li><li style="font-size: 15px; box-sizing: border-box;">Understandable and concise 简洁，容易理解。</li><li style="font-size: 15px; box-sizing: border-box;">Stable 稳定，因为RxSwift写出的代码，单元测试时分方便</li><li style="font-size: 15px; box-sizing: border-box;">Less stateful “无”状态性，因为对于响应式编程，你的应用程序就是一堆数据流</li><li style="font-size: 15px; box-sizing: border-box;">Without leaks 没有泄漏，因为资源管理非常简单</li></ul><div style="orphans: 2; widows: 2;"><font color="#3f3f3f" face="microsoft yahei"><span style="font-size: 15px;"><br/></span></font></div><div style="orphans: 2; widows: 2;"><font color="#3f3f3f" face="microsoft yahei"><span style="font-size: 15px;"><br/></span></font></div><div style="orphans: 2; widows: 2;"><font color="#3f3f3f" face="microsoft yahei"><span style="font-size: 15px;"><br/></span></font></div><div style="orphans: 2; widows: 2;"><font color="#3f3f3f" face="microsoft yahei"><span style="font-size: 15px;"><br/></span></font></div><div style="orphans: 2; widows: 2;"><font color="#3f3f3f" face="microsoft yahei"><span style="font-size: 15px;"><br/></span></font></div><div style="orphans: 2; widows: 2;"><font color="#3f3f3f" face="microsoft yahei"><span style="font-size: 15px;"><br/></span></font></div><div style="orphans: 2; widows: 2;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; color: rgb(79, 129, 189); unicode-bidi: embed; border-width: 100%; font-weight: bold; orphans: 2; widows: 2;">笔记整理：Edison</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; color: rgb(79, 129, 189); unicode-bidi: embed; orphans: 2; widows: 2;">联系方式：QQ：277593 （笔记意见建议可加此Q，专人更新此笔记）；</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); unicode-bidi: embed; orphans: 2; widows: 2;"> </span></div><div style="orphans: 2; widows: 2;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; color: rgb(79, 129, 189); unicode-bidi: embed; border-width: 100%; font-weight: bold; orphans: 2; widows: 2;">注：小道途径获取到的笔记，无法自动更新，请谅解！(笔记平均每月更新一次，祝各位都能拿到心仪的offer)</span><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; color: rgb(79, 129, 189); unicode-bidi: embed; border-width: 100%; orphans: 2; widows: 2;"> </span></div><div><br/></div></span>
</div></body></html> 