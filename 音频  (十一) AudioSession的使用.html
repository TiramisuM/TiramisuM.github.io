<html>
<head>
  <title>音频  (十一): AudioSession的使用</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="57C8A7A3-AC4C-47EF-9891-33DBDF6E3D87"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1780"/>
<h1>音频  (十一): AudioSession的使用</h1>

<div>
<span><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #0432FF;">前言</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri; color: #0432FF;">:</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949;">这个星期我完成了一个具有基本录音和回放的功能，一开始也不知道从何入手，也查找了很多相关的资料。与此同时，我也学会了很多关于音频方面的东西，这也对后面的录音配置有一定的帮助。其中参照了</span><a href="http://www.dapps.net/dev/iphone/audio-101-for-iphone-developers-file-and-data-formats.html" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">《</a><a href="http://www.dapps.net/dev/iphone/audio-101-for-iphone-developers-file-and-data-formats.html" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">iPhone</a><a href="http://www.dapps.net/dev/iphone/audio-101-for-iphone-developers-file-and-data-formats.html" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">开发之音频： 文件和数据类型（一）》</a><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949;">，启发比较大。</span></div><div style="direction: ltr; font-family: 'comic sans ms'; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;comic sans ms&quot;; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 12pt; color: fuchsia; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt; color: fuchsia; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">一、音频格式</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; color: #494949;">iPhone</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949;">上支持的音频编码格式还是比较多的，而且有很多我是以前听都没有听过的。我就先简单列出来（以下是摘录自</span><a href="http://www.dapps.net/dev/iphone/audio-101-for-iphone-developers-file-and-data-formats.html" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">《</a><a href="http://www.dapps.net/dev/iphone/audio-101-for-iphone-developers-file-and-data-formats.html" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">iPhone</a><a href="http://www.dapps.net/dev/iphone/audio-101-for-iphone-developers-file-and-data-formats.html" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">开发之音频： 文件和数据类型（一）》</a><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949;">）：</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #FF6600;"><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">AAC: AAC</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">其实是“高级音频编码（</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">advanced audio coding</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">）”的缩写，它是被设计用来取代</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">MP3</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">格式的。你可能会想，它压缩了原始的声音，导致容量占用少但是质量肯定会有所下降。不过这些质量的损失 取决于声音比特率的大小，当比特率合适的时候，这些损失人耳是很难听出来的。事实上，</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">aac</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">比</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">mp3</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">有更好的压缩率，特别是在比特率低于</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">128bit/s</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">的时候。</span></li><li style="color: #FF6600;"><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">HE-AAC: HE-AAC</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">是</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">AAC</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">的一个超集，这个“</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">HE”</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">代表的是“</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">High efficiency”</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">。</span> <span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">HE-AAC</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">是专门为低比特率所优化的一种音频编码格式，比如</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">streaming audio</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">就特别适合使用这种编码格式。</span></li><li style="color: #FF6600;"><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">AMR: AMR</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">全称是“</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">Adaptive Multi-Rate</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">”，它也是另一个专门为“说话（</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">speech</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">）”所优化的编码格式，也是适合低比特率环境下采用。</span></li><li style="color: #FF6600;"><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">ALAC:</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">它全称是“</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">Apple Lossless</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">”，这是一种没有任何质量损失的音频编码方式，也就是我们说的无损压缩。在实际使用过程中，它能够压缩</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">40%-60%</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">的原始数据。这种编码格式的解码速度非常快，这对</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">iphone</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">或者</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">ipod</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">这种小型设备来说非常适合。</span></li><li style="color: #FF6600;"><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">iLBC:</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">这是另一种专门为说话所设计的音频编码格式，它非常适合于</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">IP</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">电话等其它需要流式音频的场合。</span></li><li style="color: #FF6600;"><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">IMA4:</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">这是一个在</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">16-bit</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">音频文件下按照</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">4</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">：</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">1</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">的压缩比来进行压缩的格式。这是</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">iphone</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">上面一种非常重要的编码格式。</span><br/><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">它的中文意思是基于线性脉冲编码调制，用于将模拟声音数据转换成数字声音数据。简而言之，就是意味着无压缩数据。由于数据是非压缩的，它可以非常快的播放，并且当空间不是问题时，这是在</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">iphone</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">上面首选的音频编码方式。</span></li><li style="color: #FF6600;"><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">μ-law and a-law:</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">就我所知道的，这种编码是交替的编码模拟数据为数字格式数据，但是在</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">speech</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">优化方面比</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">linear PCM</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">更好。</span></li><li style="color: #FF6600;"><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">MP3:</span> <span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">这种格式是我们都知道也喜欢的，虽然很多年过去了，但</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">MP3</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">到目前为止仍然是一种非常流行的编码格式，它也能被</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">iphone</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">很好地支持。</span></li><li style="color: #FF6600;"><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">LPCM</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">也很早就被定义在</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">DVD</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">播放机 的标准内，为了和</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">CD</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">有所区别，</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">DVD</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">的的采样规格为</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">16bit/48KHz</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">，随着技术的发展，</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">DVD</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">的的采样规格更提升到</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">24bit/96KHz</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">，以达 到更高的播放品质，用</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">96KHz/24bit</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">方式记录的音频信号所能达到的频率上限是</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">96÷2= 48KHz</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">，而它的最大动态范围将可以达到</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">24×6=144dB</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">。从指标上就可以看出：它的声音比</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">CD</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">要好得多。</span><span style="font-family: &quot;comic sans ms&quot;; font-size: 10.5pt;">pcm</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt;">编码的最大的优点就是音质好，最大的缺点就是体数据量大。</span></li></ul><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(255, 102, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #FF6600; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">而我自己对此的理解是，主流格式</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">iPhone</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">都可以很好地支持了（</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">APE</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">、</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">FLAC</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">暂时忽略）。不过这里值得一提的就是，编码格式与文件格式并不可以混为一谈。为了省事，我就直接选用了</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">caf</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">文件格式，因为</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">caf</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">能包含任何</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">iphone</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">支持的编码格式的数据，在</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">iPhone</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">上面它是推荐的文件格式。</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">文件格式选好以后，还是有很多的参数可以自己设定的，比特率、采样率和位宽等。当然，选用合适的音频格式还是比较重要，因为不同的格式之间文件大小差异还是比较明显的。就以</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">AAC</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">和</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">LPCM</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">对比为例，采样率同为</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">44100Hz</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，默认的</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">AAC</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">一分钟的大小约为</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">500kB</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，但是</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">16bit</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">位宽的</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">LPCM</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">就可以达到</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">5MB</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">。但作为我用于录音的用途，这么大的录音文件，估计录不了多少，用户就会骂我的程序怎么占用这么多空间了。录音务求能够听得出咬字清晰，不需要追求无损的音质。因此，我就选择了</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;;">AAC</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">格式，同时更小的空间占用也便于上传。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949; background: #F5FAFE;">想要调用关于音频方面的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; color: #494949; background: #F5FAFE;">API</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949; background: #F5FAFE;">，就要使用到</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; color: #494949; background: #F5FAFE;">AVAudioSession</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949; background: #F5FAFE;">了。根据参考库的资料，</span><a href="http://developer.apple.com/iphone/library/documentation/AVFoundation/Reference/AVAudioSession_ClassReference/index.html#//apple_ref/doc/uid/TP40008240" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-style: italic; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">AVAudioSession</a><a href="http://developer.apple.com/iphone/library/documentation/AVFoundation/Reference/AVAudioSession_ClassReference/index.html#//apple_ref/doc/uid/TP40008240" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-style: italic; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">类参考</a><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949; background: #F5FAFE;">和</span><a href="http://developer.apple.com/iphone/library/documentation/AVFoundation/Reference/AVAudioSessionDelegate_ProtocolReference/index.html#//apple_ref/doc/uid/TP40008241" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-style: italic; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">AVAudioSessionDelegate</a><a href="http://developer.apple.com/iphone/library/documentation/AVFoundation/Reference/AVAudioSessionDelegate_ProtocolReference/index.html#//apple_ref/doc/uid/TP40008241" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-style: italic; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">协议参考</a><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949; background: #F5FAFE;">描述了一个管理音频会话的精简接口。如果要使音频会话支持中断，则可以直接使用基于</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; color: #494949; background: #F5FAFE;">C</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949; background: #F5FAFE;">语言的音频会话服务接口。它是属于</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; color: #494949; background: #F5FAFE;">C</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949; background: #F5FAFE;">级别的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; color: #494949; background: #F5FAFE;">API</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #494949; background: #F5FAFE;">，录音前，要先将它设为活动。</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; background: #F5FAFE;">具体代码</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">AVAudioSession *avSession = [AVAudioSession sharedInstance];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[avSession setCategory:AVAudioSessionCategoryPlayAndRecord error:</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">nil</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[avSession setActive:</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">YES</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> error:</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">nil</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Verdana; font-size: 9pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Verdana; font-size: 9.0pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; background: #F5FAFE;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">这是录音前的准备，要实现录音，还需要</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">AVAudioRecorder</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">对象。</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                           </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; mso-spacerun: yes;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                           [NSNumber numberWithFloat:44100.0], AVSampleRateKey,</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                           </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; mso-spacerun: yes;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                           [NSNumber numberWithInt:kAudioFormatMPEG4AAC], AVFormatIDKey,</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                           </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; mso-spacerun: yes;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                           [NSNumber numberWithInt:1], AVNumberOfChannelsKey,</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                           </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; mso-spacerun: yes;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                           </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">nil</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; mso-spacerun: yes;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">AVAudioRecorder *avRecorder = [[AVAudioRecorder alloc] initWithURL:recordUrl</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                                                           settings:settings</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; mso-spacerun: yes;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">                                             error:</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">nil</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Calibri; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Calibri; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">这就创建了一个编码格式为</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">AAC</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">的</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">AVAudioRecorder</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">对象了，记得要将文件路径转换成</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">NSURL</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">。</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[avRecorder prepareToRecord];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[avRecorder peakPowerForChannel:0];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[avRecorder record];</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; background: #F5FAFE;">这样就可以开始录音了，停止就调用</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[avRecorder stop];</span></div><div style="direction: ltr; font-family: Verdana; font-size: 9pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Verdana; font-size: 9.0pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; background: #F5FAFE;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">当然，还用再次将</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">AVAudioSession</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">的对象设为不活动，所以最好还是调用</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">AVAudioRecorderDelegate</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">的方法</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">-(void)audioRecorderDidFinishRecording:(AVAudioRecorder *)recorder successfully:(BOOL)flag</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">。</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[avSession setActive: </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">NO</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> error: </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">nil</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; background: #F5FAFE;">那么，录音的操作就已经完成了。</span></div><div style="direction: ltr; font-family: Verdana; font-size: 9pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Verdana; font-size: 9.0pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; background: #F5FAFE;"> </span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 12pt; color: fuchsia; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt; color: fuchsia; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; background: #F5FAFE;">三、回放录音</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">本来这个和录音都是大同小异，没什么值得重复说，都要将会话设为活动，实现完成时的</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">delegate</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">方法。但是，我后来发现，这么做有一个问题，回放的声音超级小。起初我以为是音量有问题，就</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">setVolume:1.0</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">。但是依然不起作用，于是上网查了一下，原来要重新将</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;comic sans ms&quot;; background: #F5FAFE;">AVAudioSession</span><span style="direction: ltr; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: #F5FAFE;">设一下。</span></div><div style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[avSession setCategory: AVAudioSessionCategorySoloAmbient error: </span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">nil</span><span style="direction: ltr; font-family: Menlo; font-size: 11.25pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #494949; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; background: #F5FAFE;">其余的也就差不多，不多说了。</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">笔记整理：Edison</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; color: rgb(79, 129, 189); unicode-bidi: embed;">联系方式：QQ：277593 （笔记意见建议可加此Q，专人更新此笔记）；</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); unicode-bidi: embed;"> </span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(73, 73, 73); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">注：小道途径获取到的笔记，无法自动更新，请谅解！(笔记平均每月更新一次，祝各位都能拿到心仪的offer)</span><span style="direction: ltr; font-family: 'Microsoft YaHei'; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%;"> </span></div><div><br/></div></span>
</div></body></html> 