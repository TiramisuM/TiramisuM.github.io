<html>
<head>
  <title>iOS笔记② ：重点  (六) : RunLoop</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="40A90E69-1035-4199-8FAF-AFCF818386ED"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1837"/>
<h1>iOS笔记② ：重点  (六) : RunLoop</h1>

<div>
<span><div style="direction: ltr; font-family: Calibri; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 24pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(89, 89, 89);">如果</span><span style="direction: ltr; font-family: SimSun; font-size: 24pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(255, 37, 0);">没有</span><span style="direction: ltr; font-family: Helvetica; font-size: 24pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(89, 89, 89);">RunLoop</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记② ：重点  (六)  RunLoop_files/Image.png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记② ：重点  (六)  RunLoop_files/Image [1].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">main</span><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">函数中的</span><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记② ：重点  (六)  RunLoop_files/Image [2].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">第</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #7F7F7F;">14</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">行代码的</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">UIApplicationMain</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">函数内部就启动了一个</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #7F7F7F;">RunLoop</span></div><div style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">所以</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">UIApplicationMain</span><span style="direction: ltr; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">函数一直没有返回，保持了程序的持续运行</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">这个默认启动的</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">是跟主线程相关联的</span></div><div style="direction: ltr; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">iOS</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">中有</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">2</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">套</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">API</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">来访问和使用</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Foundation</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 15pt; color: rgb(255, 37, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15.0pt; color: #FF2500; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSRunLoop</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(127, 127, 127);">Core Foundation</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 15pt; color: rgb(4, 51, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15.0pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRunLoopRef</span><span style="direction: ltr; font-family: SimSun; font-size: 11pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #FF2500;">NSRunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">和</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #0433FF;">CFRunLoopRef</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">都代表着</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #7F7F7F;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">对象</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #FF2500;">NSRunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">是基于</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #0433FF;">CFRunLoopRef</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">的一层</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #7F7F7F;">OC</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">包装，所以要了解</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #7F7F7F;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">内部结构，需要多研究</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #0433FF;">CFRunLoopRef</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">层面的</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #7F7F7F;">API</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">（</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; color: #7F7F7F;">Core Foundation</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #7F7F7F;">层面）</span></div><div style="direction: ltr; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">资料</span></div><div style="direction: ltr; font-family: SimSun; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">苹果官方文档</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html" style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; font-size: 15.0pt;">https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html</a></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">CFRunLoopRef</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">是开源的</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><a href="http://opensource.apple.com/source/CF/CF-1151.16/" style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica; font-size: 15.0pt;">http://opensource.apple.com/source/CF/CF-1151.16/</a></div><div style="direction: ltr; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">与线程</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">每条线程都有唯一的一个与之对应的</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">主线程的</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">已经自动创建好了，子线程的</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">需要主动创建</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">在第一次获取时创建，在线程结束时销毁</span></div><div style="direction: ltr; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">获得</span><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Foundation</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">[</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #5C2699;">NSRunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">currentRunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">];</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">获得当前线程的</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">对象</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">[</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #5C2699;">NSRunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">mainRunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">];</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">获得主线程的</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">对象</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Core Foundation</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">CFRunLoopGetCurrent</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">();</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">获得当前线程的</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">对象</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">CFRunLoopGetMain</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">();</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">获得主线程的</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #007400;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">对象</span><span style="direction: ltr; font-size: 24pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(89, 89, 89); font-family: SimSun;"> </span></div><div style="direction: ltr; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">相关类</span></div><div style="direction: ltr; font-family: SimSun; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记② ：重点  (六)  RunLoop_files/Image [3].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Core Foundation</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">中关于</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">的</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">5</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">个类</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">CFRunLoopRef</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">:</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">它自己</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">,</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">也就代表一个</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">R</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">un</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">L</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">oop</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">对象</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">CFRunLoopModeRef</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">:RunLoop</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">的运行模式</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">CFRunLoopSourceRef</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">:</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">事件源</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">CFRunLoopTimerRef</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">:</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">时间的触发器</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">CFRunLoopObserverRef</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">:</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">观察者</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">监听</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">CFRunLoopRef</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">的状态改变</span></div><div style="direction: ltr; font-family: SimSun; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRunLoopModeRef</span></div><div style="direction: ltr; font-family: 'Songti SC'; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Songti SC&quot;; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRunLoopModeRef代表RunLoop的运行模式</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">一个</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Songti SC&quot;;">RunLoop 包含若干个 Mode，每个Mode又包含若干个Source/Timer/Observer</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">每次</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Songti SC&quot;;">RunLoop启动时，只能指定其中一个 Mode，这个Mode被称作 CurrentMode</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">如果需要切换</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Songti SC&quot;;">Mode，只能退出Loop，再重新指定一个Mode进入</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">这样做主要是为了分隔开不同组的</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Songti SC&quot;;">Source/Timer/Observer，让其互不影响</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRunLoopModeRef</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">系统默认注册了</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Songti SC&quot;;">5个Mode模式:</span></div><div style="direction: ltr; font-family: 'Songti SC'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Songti SC&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">kCFRunLoopDefaultMode</span><span style="direction: ltr; font-family: &quot;Songti SC&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #7F7F7F;">：App的默认Mode，通常主线程是在这个Mode下运行</span></div><div style="direction: ltr; font-family: 'Songti SC'; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Songti SC&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">UITrackingRunLoopMode</span><span style="direction: ltr; font-family: &quot;Songti SC&quot;; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #7F7F7F;">：界面跟踪 Mode，用于 ScrollView 追踪触摸滑动，保证界面滑动时不受其他 Mode 影响</span></div><div style="direction: ltr; font-family: 'Songti SC'; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Songti SC&quot;; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">UIInitializationRunLoopMode: 在刚启动 App 时第进入的第一个 Mode，启动完成后就不再使用</span></div><div style="direction: ltr; font-family: 'Songti SC'; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Songti SC&quot;; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">GSEventReceiveRunLoopMode: 接受系统事件的内部 Mode，通常用不到</span></div><div style="direction: ltr; font-family: 'Songti SC'; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Songti SC&quot;; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">kCFRunLoopCommonModes: 这是一个占位用的Mode，不是一种真正的Mode</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Songti SC&quot;;">被标记为</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri;">common</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri;">m</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri;">odes</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Songti SC&quot;;">模式</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri;">kCFRunLoopDefaultMode UITrackingRunLoopMode</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Songti SC&quot;;">两种模式</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRunLoopSourceRef</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">CFRunLoopSourceRef</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">是事件源（输入源）</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(127, 127, 127);">以前的分法</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Port-Based Sources</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Custom Input Sources</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Cocoa Perform Selector Sources</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(127, 127, 127);">现在的分法</span></div><div style="direction: ltr; font-family: 'Songti SC'; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Songti SC&quot;; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Source0：非基于Port的</span></div><div style="direction: ltr; font-family: 'Songti SC'; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Songti SC&quot;; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Source1：基于Port的</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRunLoopTimerRef</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">CFRunLoopTimerRef</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">是基于时间的触发器</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">基本上说的就是</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Songti SC&quot;;">NSTimer</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记② ：重点  (六)  RunLoop_files/Image [4].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">RunLoop</span><span style="direction: ltr; font-family: SimSun; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">处理逻辑</span><span style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">-</span><span style="direction: ltr; font-family: SimSun; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">官方版</span></div><div style="direction: ltr; font-family: SimSun; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记② ：重点  (六)  RunLoop_files/Image [5].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: SimSun; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">RunLoop</span><span style="direction: ltr; font-family: SimSun; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">处理逻辑</span><span style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">-</span><span style="direction: ltr; font-family: SimSun; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">网友整理版</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记② ：重点  (六)  RunLoop_files/Image [6].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: SimSun; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">RunLoop</span><span style="direction: ltr; font-family: SimSun; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">应用</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSTimer</span></div><div style="direction: ltr; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">ImageView</span><span style="direction: ltr; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">显示</span></div><div style="direction: ltr; font-family: Helvetica; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">PerformSelector</span></div><div style="direction: ltr; font-family: SimSun; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">常驻线程</span></div><div style="direction: ltr; font-family: SimSun; font-size: 15pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 15.0pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">自动释放池</span></div><div style="direction: ltr; font-family: SimSun; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">RunLoop</span><span style="direction: ltr; font-family: SimSun; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">面试题</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">什么是</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">？</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">从字面意思看：运行循环、跑圈</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">其实它内部就是</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">do-while</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">循环，在这个循环内部不断地处理各种任务（比如</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Source</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Timer</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Observer</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">）</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">一个线程对应一个</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">，主线程的</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">默认已经启动，子线程的</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">得手动启动（调用</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">run</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">方法）</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">只能选择一个</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Mode</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">启动，如果当前</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Mode</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">中没有任何</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Source(Sources0</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Sources1)</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">、</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Timer</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">，那么就直接退出</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">自动释放池什么时候释放？</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">通过</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Observer</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">监听</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">的状态</span></div><div style="direction: ltr; font-family: SimSun; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">RunLoop</span><span style="direction: ltr; font-family: SimSun; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">面试题</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">在开发中如何使用</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">？什么应用场景？</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">开启一个常驻线程（让一个子线程不进入消亡状态，等待其他线程发来消息，处理其他事件）</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">在子线程中开启一个定时器</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">在子线程中进行一些长期监控</span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">可以控制定时器在特定模式下执行</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">可以让某些事件（行为、任务）在特定模式下执行</span></div><div style="direction: ltr; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">可以添加</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">Observer</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">监听</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span><span style="direction: ltr; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">的状态，比如监听点击事件的处理（在所有点击事件之前做一些事情）</span></div><div style="direction: ltr; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun;">自动释放池与</span><span style="direction: ltr; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Helvetica;">RunLoop</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">kCFRunLoopEntry</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">;</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">创建一个自动释放池</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">kCFRunLoopBeforeWaiting</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">;</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">销毁自动释放池，创建一个新的自动释放池</span></div><div style="direction: ltr; font-size: 15pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">kCFRunLoopExit</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">;</span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 15.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: SimSun; color: #007400;">销毁自动释放池</span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">自动释放池的创建和销毁</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1.</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">第一次创建</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">当</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">启动的时候</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2.</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">最后一次销毁</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">当</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">退出的时候</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3.</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">其它创建和销毁</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">当</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">进入到睡觉状态的时候会把之前的自动释放池销毁</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">,</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">重新创建一个新的</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">1.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #0433FF;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #0433FF;">基础知识</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">- 1.1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">字面意思</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">a</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">运行循环</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">b</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">跑圈</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">- 1.2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">基本作用（作用重大）</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">a</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">保持程序的持续运行</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">(ios</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">程序为什么能一直活着不会死</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">)</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">b</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">处理</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">app</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">中的各种事件（比如触摸事件、定时器事件【</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSTimer</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">】、</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">selector</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">事件【选择器</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">·performSelector···</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">】）</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">c</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">节省</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">CPU</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">资源，提高程序性能，有事情就做事情，没事情就休息</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">- 1.3</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">重要说明</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）如果没有</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">那么程序一启动就会退出，什么事情都做不了。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）如果有了</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">，那么相当于在内部有一个死循环，能够保证程序的持续运行</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">main</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">函数中的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">a</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">在</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">UIApplication</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">函数内部就启动了一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">该函数返回一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #0433FF;">int</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">类型的值</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">b</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">这个默认启动的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">是跟主线程相关联的</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">- 1.4 Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">对象</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）在</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">iOS</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">开发中有两套</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">api</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">来访问</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">a.foundation</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">框架【</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSRunloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">】</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">b.core foundation</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">框架【</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">CFRunloopRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">】</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSRunLoop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">和</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">CFRunLoopRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">都代表着</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">RunLoop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">对象</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">它们是等价的，可以互相转换</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSRunLoop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">是基于</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">CFRunLoopRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的一层</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">OC</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">包装，所以要了解</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">RunLoop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">内部结构，需要多研究</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">CFRunLoopRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">层面的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">API</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Core Foundation</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">层面）</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">- 1.5 Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">参考资料</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）苹果官方文档</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html" style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">https:</a><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html" style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00;">//developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html</a></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">CFRunLoopRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">开源代码下载地址：</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><a href="http://opensource.apple.com/source/CF/CF-1151.16/" style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">http:</a><a href="http://opensource.apple.com/source/CF/CF-1151.16/" style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00;">//opensource.apple.com/source/CF/CF-1151.16/</a><span style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">- 1.6 Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">与线程</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1.Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">和线程的关系：一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">对应着一条唯一的线程</span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">问题：如何让子线程不死</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">回答：给这条子线程开启一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2.Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的创建：主线程</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">已经创建好了，子线程的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">需要手动创建</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3.Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的生命周期：在第一次获取时创建，在线程结束时销毁</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">- 1.7</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">获得</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">对象</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">获得当前</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">对象</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">01 NSRunloop</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSRunLoop * runloop1 = [NSRunLoop currentRunLoop];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">02 CFRunLoopRef</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRunLoopRef runloop2 =   CFRunLoopGetCurrent();</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">拿到当前应用程序的主</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（主线程对应的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">01 NSRunloop</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSRunLoop * runloop1 = [NSRunLoop mainRunLoop];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">02 CFRunLoopRef</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRunLoopRef runloop2 =   CFRunLoopGetMain();</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">注意点：开一个子线程创建</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">不是通过</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">alloc init</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">方法创建，而是直接通过调用</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">currentRunLoop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">方法来创建，它本身是一个懒加载的。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">4.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">在子线程中，如果不主动获取</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的话，那么子线程内部是不会创建</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的。可以下载</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">CFRunloopRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的源码，搜索</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">_CFRunloopGet0,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">查看代码。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">5.Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">对象是利用字典来进行存储，而且</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">key</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">是对应的线程</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Value</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">为该线程对应的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">。</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">- 1.8 Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">相关类</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">运行原理图</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记② ：重点  (六)  RunLoop_files/Image [7].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）五个相关的类</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">a.CFRunloopRef</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">b.CFRunloopModeRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">【</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的运行模式】</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">c.CFRunloopSourceRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">【</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">要处理的事件源】</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">d.CFRunloopTimerRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">【</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Timer</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">事件】</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">e.CFRunloopObserverRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">【</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的观察者（监听者）】</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">和相关类之间的关系图</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记② ：重点  (六)  RunLoop_files/Image [8].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">4</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">要想跑起来，它的内部必须要有一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">这个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">里面必须有</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">source\observer\timer</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">，至少要有其中的一个。</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- CFRunloopModeRef</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1.CFRunloopModeRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">代表着</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的运行模式</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">中可以有多个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">里面又可以有多个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">source\observer\timer</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">等等</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">每次</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">启动的时候，只能指定一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">这个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">被称为该</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的当前</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">4.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">如果需要切换</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">只能先退出当前</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">再重新指定一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">进入</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">5.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">这样做主要是为了分割不同组的定时器等，让他们相互之间不受影响</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">6.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">系统默认注册了</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">5</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">a.kCFRunLoopDefaultMode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">：</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">App</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的默认</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">，通常主线程是在这个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">下运行</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">b.UITrackingRunLoopMode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">：界面跟踪</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">，用于</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">ScrollView</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">追踪触摸滑动，保证界面滑动时不受其他</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">影响</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">c.UIInitializationRunLoopMode:</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">在刚启动</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">App</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">时第进入的第一个</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">，启动完成后就不再使用</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">d.GSEventReceiveRunLoopMode:</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">接受系统事件的内部</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">，通常用不到</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">e.kCFRunLoopCommonModes:</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">这是一个占位用的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Mode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">，不是一种真正的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Mode</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- CFRunloopTimerRef</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSTimer</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">相关代码</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">说明：</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">一启动就会选中一种模式，当选中了一种模式之后其它的模式就都不鸟。一个</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">mode</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">里面可以添加多个</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSTimer,</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">也就是说以后当创建</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSTimer</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的时候，可以指定它是在什么模式下运行的。</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）它是基于时间的触发器，说直白点那就是时间到了我就触发一个事件，触发一个操作。基本上说的就是</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSTimer</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）相关代码</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">void</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)timer2</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">{</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">NSTimer</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">调用了</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">scheduledTimer</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">方法，那么会自动添加到当前的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">里面去，而且</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">的运行模式</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">kCFRunLoopDefaultMode</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> selector:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">@selector</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(run) userInfo:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">nil</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> repeats:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">YES</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">更改模式</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">void</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)timer1</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">{</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">   </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00;">[NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(run) userInfo:nil repeats:YES];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    NSTimer *timer = [NSTimer timerWithTimeInterval:2.0 target:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> selector:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">@selector</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(run) userInfo:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">nil</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> repeats:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">YES</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">定时器添加到</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">UITrackingRunLoopMode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">模式，一旦</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">切换模式，那么定时器就不工作</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">   </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00;">[[NSRunLoop currentRunLoop] addTimer:timer forMode:UITrackingRunLoopMode];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">定时器添加到</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">NSDefaultRunLoopMode</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">模式，一旦</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">切换模式，那么定时器就不工作</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">   </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00;">[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">占位模式：</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">common modes</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">标记</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">被标记为</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">common modes</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">的模式</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">kCFRunLoopDefaultMode  UITrackingRunLoopMode</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">   </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #008F00;">    NSLog(@&quot;%@&quot;,[NSRunLoop currentRunLoop]);</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">void</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)run</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">{</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    NSLog(</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #B4261A;">@&quot;---run---%@&quot;</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">,[NSRunLoop currentRunLoop].currentMode);</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- (</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">IBAction</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">)btnClick {</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">    NSLog(</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #B4261A;">@&quot;---btnClick---&quot;</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">);</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span><span style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">GCD</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">中的定时器</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">0.</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">创建一个队列</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">dispatch_queue_t queue = dispatch_get_global_queue(0, 0);</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1.</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">创建一个</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">GCD</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的定时器</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">第一个参数：说明这是一个定时器</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">第四个参数：</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">GCD</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的回调任务添加到那个队列中执行，如果是主队列则在主线程执行</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(0, 143, 0);">2.</span><span style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(0, 143, 0);">设置定时器的开始时间，间隔时间以及精准度</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">设置开始时间，三秒钟之后调用</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">dispatch_time_t start = dispatch_time(DISPATCH_TIME_NOW,3.0 *NSEC_PER_SEC);</span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">设置定时器工作的间隔时间</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">uint64_t intevel = 1.0 * NSEC_PER_SEC;</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">第一个参数：要给哪个定时器设置</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">第二个参数：定时器的开始时间</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">DISPATCH_TIME_NOW</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">表示从当前开始</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">第三个参数：定时器调用方法的间隔时间</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">第四个参数：定时器的精准度，如果传</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">0</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">则表示采用最精准的方式计算，如果传大于</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">0</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的数值，则表示该定时切换</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">i</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">可以接收该值范围内的误差，通常传</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">0</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">该参数的意义：可以适当的提高程序的性能</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">注意点：</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">GCD</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">定时器中的时间以纳秒为单位（面试）</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">dispatch_source_set_timer(timer, start, intevel, 0 * NSEC_PER_SEC);</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3.</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">设置定时器开启后回调的方法</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">第一个参数：要给哪个定时器设置</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">第二个参数：回调</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">block</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">dispatch_source_set_event_handler(timer, ^{</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    NSLog(</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #B4261A;">@&quot;------%@&quot;</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">,[NSThread currentThread]);</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">});</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">4.</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">执行定时器</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">dispatch_resume(timer);</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">注意：</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">dispatch_source_t</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">本质上是</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">OC</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">类，在这里是个局部变量，需要强引用</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">.timer = timer;</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- CFRunloopSourceRef</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">是事件源也就是输入源，有两种分类模式；</span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">一种是按照苹果官方文档进行划分的</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">另一种是基于函数的调用栈来进行划分的（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">source0</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">和</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">source1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）。</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">具体的分类情况</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）以前的分法</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Port-Based Sources</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Custom Input Sources</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">Cocoa Perform Selector Sources</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）现在的分法</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Source0</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">：非基于</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Port</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Source1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">：基于</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Port</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">可以通过打断点的方式查看一个方法的函数调用栈</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">- CFRunLoopObserverRef</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">CFRunLoopObserverRef</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">是观察者，能够监听</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">RunLoop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的状态改变</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）如何监听</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">创建一个</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">监听者</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(CFAllocatorGetDefault(),kCFRunLoopAllActivities, </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">YES</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity activity) {</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">    NSLog(</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #B4261A;">@&quot;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #B4261A;">监听</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #B4261A;">runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #B4261A;">状态改变</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #B4261A;">---%zd&quot;</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">,activity);</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">});</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">为</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">添加一个监听者</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRunLoopAddObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopDefaultMode);</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">CFRelease(observer);</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">3</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）监听的状态</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">typedef CF_OPTIONS</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">(CFOptionFlags, CFRunLoopActivity) {</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    kCFRunLoopEntry = (1UL &lt;&lt; 0),  </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">即将进入</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">Runloop</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    kCFRunLoopBeforeTimers = (1UL &lt;&lt; 1),   </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">即将处理</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">NSTimer</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    kCFRunLoopBeforeSources = (1UL &lt;&lt; 2),  </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">即将处理</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">Sources</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    kCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5),  </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">即将进入休眠</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6),   </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">刚从休眠中唤醒</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    kCFRunLoopExit = (1UL &lt;&lt; 7),           </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">即将退出</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">runloop</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    kCFRunLoopAllActivities = 0x0FFFFFFFU  </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">所有状态改变</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">};</span></div><div style="direction: ltr; font-family: SimSun; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: SimSun; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">- 1.9 Runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">运行逻辑</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="iOS笔记② ：重点  (六)  RunLoop_files/Image [9].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 51, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">面试</span><span style="direction: ltr; font-size: 10.5pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">:runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">和</span><span style="direction: ltr; font-size: 10.5pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSURLConnection</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">1</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">.</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">发送请求</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">默认情况下，</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSURLConnection</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">发送的是一个异步请求</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">默认情况下，</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSURLConnection</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的代理方法在主线程中进行调用（方便在拿到数据后，直接处理一些和</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">UI</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">相关的操作，而不需要考虑线程间通信）</span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">方法一，不严谨</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">通过该方法设置代理，会自动的发送请求</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[[NSURLConnection alloc]initWithRequest:request delegate:self];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">方法二</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">知识点</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">A</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">设置代理方法在子线程中调用</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">设置代理，</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">startImmediately</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">为</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NO</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的时候，该方法不会自动发送请求</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">NSURLConnection *connect = [[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:NO];</span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">手动通过代码的方式来发送请求</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">注意该方法内部会自动的把</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">connect</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">添加到当前线程的</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">RunLoop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">中在默认模式下执行</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[connect start];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">2</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">）如何控制代理方法在哪个线程调用</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">说明：默认情况下，代理方法会在主线程中进行调用（为了方便开发者拿到数据后处理一些刷新</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">UI</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的操作不需要考虑到线程间通信）</span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">设置代理方法的执行队列</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[connect setDelegateQueue:[[NSOperationQueue alloc]init]];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">方法三</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri;">:</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(0, 143, 0); font-family: Menlo;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">设置代理，</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">startImmediately</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">为</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NO</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的时候，该方法不会自动发送请求</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> NSURLConnection *connect = [[NSURLConnection alloc]initWithRequest:request delegate:self</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; mso-spacerun: yes;">  </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; mso-spacerun: yes;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">startImmediately:NO];</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">设置代理方法的执行队列</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> [connect setDelegateQueue:[[NSOperationQueue alloc]init]];</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">发送请求</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">注意该方法内部会自动的把</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">connect</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">添加到当前线程的</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">RunLoop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">中在默认模式下执行</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> [connect start];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">知识点</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">B</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">如果把发送网络请求的方法也放在子线程中执行如何</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">使用</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">GCD</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">开启一个子线程来发送网络请求</span></div><div style="direction: ltr; font-family: 'PingFang SC'; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;PingFang SC&quot;; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">   </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">dispatch_async</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">(</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">dispatch_get_global_queue</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">(0, 0), ^{</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">   </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">使用非自动发送网络请求模式</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">发送请求</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">OK</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">创建</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSURLConnection</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">对象，设置代理，暂不发送</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">     NSURLConnection *connect =  [[NSURLConnection alloc]initWithRequest:request delegate:self</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; mso-spacerun: yes;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">startImmediately:NO];</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">设置代理方法的执行队列</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">     [connect setDelegateQueue:[[NSOperationQueue alloc]init]];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">     </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">调用</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">start</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">发送网络请求</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">     [connect start];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">     </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">NSURLConnection</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">*connect = [[</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">NSURLConnection alloc</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">]</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">initWithRequest</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:request</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">delegate</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #0433FF;">self</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">     connect</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">setDelegateQueue</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:[[</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">NSOperationQueue alloc</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">]</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">init</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">]];</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">     </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">创建当前线程的</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">runloop</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">，并开启</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">runloop</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">     [[</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">NSRunLoop currentRunLoop</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">]</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #3495AF;">run</span><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    });</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">  </span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">使用上面的方法一，发送请求失败</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri;">,</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #0433FF;">为什么呢</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Calibri; color: #0433FF;">?</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">（需要改造代码）</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 51, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">(runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">和</span><span style="direction: ltr; font-size: 10.5pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSURLConnection</span><span style="direction: ltr; font-size: 10.5pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的关系</span><span style="direction: ltr; font-size: 10.5pt; color: #0433FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">)?</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #008F00;">01</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;; color: #008F00;">网络请求发送和数据接收是否成功，和一些因素相关，比如客户端的网速、服务器端的查询速度等等。</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    02</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">而在子线程中创建的</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">NSURLConnection</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">对象是一个临时变量，当请求发送完成之后就被释放了，所以这个时候它的代理方法不会调用用。</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">    03</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">为什么使用方法二是</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">OK</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的。因为在方法二中，调用了</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">start</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">来开始发送网络请求，该方法内部会自动将当前的</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">connect</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">作为一个</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Source</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">添加到当前线程所在的</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">中，如果当前线程是子线程（即当前线程的</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">并未创建），那么该方法内部会默认先创建当前线程的</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Runloop,</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">设置在</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">的默认模式下运行。此时</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">runloop</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">会对这个</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo;">Connect</span><span style="direction: ltr; font-size: 10.5pt; color: #008F00; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;PingFang SC&quot;;">对象进行强引用，保证了代理方法被调用的前提</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); font-weight: bold;">笔记整理：Edison</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; color: rgb(79, 129, 189); unicode-bidi: embed;">联系方式：QQ：277593 （笔记意见建议可加此Q，专人更新此笔记）；</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); unicode-bidi: embed;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(0, 143, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); font-weight: bold;">注：小道途径获取到的笔记，无法自动更新，请谅解！(笔记平均每月更新一次，祝各位都能拿到心仪的offer)</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189);"> </span></div></span>
</div></body></html> 