<html>
<head>
  <title>iOS笔记③  : 重点  (八) : FMDB</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="C40C558B-6E1F-454A-AEB0-5F0C051ABDFF"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1395"/>
<h1>iOS笔记③  : 重点  (八) : FMDB</h1>

<div>
<span><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">什么是</span><span style="font-family: Helvetica; font-size: 13.5pt;">FMDB</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">FMDB</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">是</span><span style="font-family: Helvetica; font-size: 13.5pt;">iOS</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">平台的</span><span style="font-family: Helvetica; font-size: 13.5pt;">SQLite</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">数据库框架</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">FMDB</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">以</span><span style="font-family: Helvetica; font-size: 13.5pt;">OC</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">的方式封装了</span><span style="font-family: Helvetica; font-size: 13.5pt;">SQLite</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">的</span><span style="font-family: Helvetica; font-size: 13.5pt;">C</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">语言</span><span style="font-family: Helvetica; font-size: 13.5pt;">API</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">FMDB</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">的优点</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">使用起来更加面向对象，省去了很多麻烦、冗余的</span><span style="font-family: Helvetica; font-size: 13.5pt;">C</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">语言代码</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">提供了多线程安全的数据库操作方法，有效地防止数据混乱</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">FMDB</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">的</span><span style="font-family: Helvetica; font-size: 13.5pt;">github</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">地址</span></li><li style="color: #7F7F7F;"><a href="https://github.com/ccgus/fmdb" style="font-family: Helvetica; font-size: 13.5pt;">https://github.com/ccgus/fmdb</a></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 13.5pt; color: rgb(127, 127, 127); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 13.5pt; color: #7F7F7F; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">核心类</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">FMDB</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">有三个主要的类</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">FMDatabase</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">一个</span><span style="font-family: Helvetica; font-size: 13.5pt;">FMDatabase</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">对象就代表一个单独的</span><span style="font-family: Helvetica; font-size: 13.5pt;">SQLite</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">数据库</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">用来执行</span><span style="font-family: Helvetica; font-size: 13.5pt;">SQL</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">语句</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">FMResultSet</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">使用</span><span style="font-family: Helvetica; font-size: 13.5pt;">FMDatabase</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">执行查询后的结果集</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">FMDatabaseQueue</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">用于在多线程中执行多个查询或更新，它是线程安全的</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24.0pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">打开数据库</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">通过指定</span><span style="font-family: Helvetica; font-size: 12.0pt;">SQLite</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">数据库文件路径来创建</span><span style="font-family: Helvetica; font-size: 12.0pt;">FMDatabase</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">对象</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">FMDatabase</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">*db = [</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">FMDatabase</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">databaseWithPath</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:path];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">if</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> (![db </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">open</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">]) {</span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">   </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #2E116E;">NSLog</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">(</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #C41B17;">@&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #C41B17;">数据库打开失败！</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: #C41B17;">&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; color: black;">);</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 12.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">文件路径有三种情况</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">具体文件路径</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">如果不存在会自动创建</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt; color: #7F7F7F;">空字符串</span><span style="font-family: Menlo; font-size: 12.0pt; color: #C41B17;">@&quot;&quot;</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">会在临时目录创建一个空的数据库</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">当</span><span style="font-family: Helvetica; font-size: 12.0pt;">FMDatabase</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">连接关闭时，数据库文件也被删除</span></li><li style="color: #AA2391;"><span style="font-family: Menlo; font-size: 12.0pt;">nil</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">会创建一个内存中临时数据库，当</span><span style="font-family: Helvetica; font-size: 12.0pt;">FMDatabase</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.0pt;">连接关闭时，数据库会被销毁</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">执行更新</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">在</span><span style="font-family: Helvetica; font-size: 13.5pt;">FMDB</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">中，除查询以外的所有操作，都称为“更新”</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">create</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">、</span><span style="font-family: Helvetica; font-size: 13.5pt;">drop</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">、</span><span style="font-family: Helvetica; font-size: 13.5pt;">insert</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">、</span><span style="font-family: Helvetica; font-size: 13.5pt;">update</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">、</span><span style="font-family: Helvetica; font-size: 13.5pt;">delete</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">等</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">使用</span><span style="font-family: Helvetica; font-size: 13.5pt;">executeUpdate:</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">方法执行更新</span></li><li><span style="font-family: Menlo; font-size: 13.5pt;">- (</span><span style="font-family: Menlo; font-size: 13.5pt; color: #AA2391;">BOOL</span><span style="font-family: Menlo; font-size: 13.5pt;">)executeUpdate:(</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">NSString</span><span style="font-family: Menlo; font-size: 13.5pt;">*)sql, ...</span></li><li><span style="font-family: Menlo; font-size: 13.5pt;">- (</span><span style="font-family: Menlo; font-size: 13.5pt; color: #AA2391;">BOOL</span><span style="font-family: Menlo; font-size: 13.5pt;">)executeUpdateWithFormat:(</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">NSString</span><span style="font-family: Menlo; font-size: 13.5pt;">*)format, ...</span></li><li><span style="font-family: Menlo; font-size: 13.5pt;">- (</span><span style="font-family: Menlo; font-size: 13.5pt; color: #AA2391;">BOOL</span><span style="font-family: Menlo; font-size: 13.5pt;">)executeUpdate:(</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">NSString</span><span style="font-family: Menlo; font-size: 13.5pt;">*)sql withArgumentsInArray:(</span><span style="font-family: Menlo; font-size: 13.5pt; color: #5C2699;">NSArray</span> <span style="font-family: Menlo; font-size: 13.5pt;">*)arguments</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">示例</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">[db</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">executeUpdate</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;UPDATE t_student SET age = ? WHERE name = ?;&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">,</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #1C27CF;">@20</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">,</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;Jack&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">]</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">执行查询</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.75pt;">查询方法</span></li><li><span style="font-family: Menlo; font-size: 10.5pt;">- (</span><span style="font-family: Menlo; font-size: 10.5pt; color: #406E74;">FMResultSet</span> <span style="font-family: Menlo; font-size: 10.5pt;">*)executeQuery:(</span><span style="font-family: Menlo; font-size: 10.5pt; color: #5C2699;">NSString</span><span style="font-family: Menlo; font-size: 10.5pt;">*)sql, ...</span></li><li><span style="font-family: Menlo; font-size: 10.5pt;">- (</span><span style="font-family: Menlo; font-size: 10.5pt; color: #406E74;">FMResultSet</span> <span style="font-family: Menlo; font-size: 10.5pt;">*)executeQueryWithFormat:(</span><span style="font-family: Menlo; font-size: 10.5pt; color: #5C2699;">NSString</span><span style="font-family: Menlo; font-size: 10.5pt;">*)format, ...</span></li><li><span style="font-family: Menlo; font-size: 10.5pt;">- (</span><span style="font-family: Menlo; font-size: 10.5pt; color: #406E74;">FMResultSet</span> <span style="font-family: Menlo; font-size: 10.5pt;">*)executeQuery:(</span><span style="font-family: Menlo; font-size: 10.5pt; color: #5C2699;">NSString</span> <span style="font-family: Menlo; font-size: 10.5pt;">*)sql withArgumentsInArray:(</span><span style="font-family: Menlo; font-size: 10.5pt; color: #5C2699;">NSArray</span> <span style="font-family: Menlo; font-size: 10.5pt;">*)arguments</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 12.75pt;">示例</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-size: 10.5pt; color: rgb(0, 116, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 10.5pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 10.5pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">查询数据</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">FMResultSet</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">*rs = [db</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">executeQuery</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;SELECT * FROM t_student&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Microsoft YaHei&quot;; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-size: 10.5pt; color: rgb(0, 116, 0); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-size: 10.5pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Menlo; mso-spacerun: yes;"> </span><span style="direction: ltr; unicode-bidi: embed; font-size: 10.5pt; color: #007400; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">遍历结果集</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">while</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> ([rs </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">next</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">]) {</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #5C2699;">NSString</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *name = [rs </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">stringForColumn</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;name&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">int</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> age = [rs </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">intForColumn</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;age&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">double</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> score = [rs </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">doubleForColumn</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;score&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: 'Microsoft YaHei'; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">FMDatabaseQueue</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">FMDatabase</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">这个类是线程不安全的，如果在多个线程中同时使用一个</span><span style="font-family: Helvetica; font-size: 13.5pt;">FMDatabase</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">实例，会造成数据混乱等问题</span></li><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">为了保证线程安全，</span><span style="font-family: Helvetica; font-size: 13.5pt;">FMDB</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">提供方便快捷的</span><span style="font-family: Helvetica; font-size: 13.5pt;">FMDatabaseQueue</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">类</span></li><li style="color: #7F7F7F;"><span style="font-family: Helvetica; font-size: 13.5pt;">FMDatabaseQueue</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">的创建</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">FMDatabaseQueue</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">*queue = [</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">FMDatabaseQueue</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">databaseQueueWithPath</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 13.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:path];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">FMDatabaseQueue</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">简单使用</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[queue </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">inDatabase</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:^(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">FMDatabase</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *db) {</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">    [db</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">executeUpdate</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;INSERT INTO t_student(name) VALUES (?)&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">,</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;Jack&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">    [db</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">executeUpdate</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;INSERT INTO t_student(name) VALUES (?)&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">,</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;Rose&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">    [db</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">executeUpdate</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;INSERT INTO t_student(name) VALUES (?)&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">,</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;Jim&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">   </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">FMResultSet</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">*rs = [db</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">executeQuery</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;select * from t_student&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">while</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> ([rs </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">next</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">]) {</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    }</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: rgb(89, 89, 89); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Helvetica; font-size: 24pt; color: #595959; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold;">FMDatabaseQueue</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">使用事务</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">[queue </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">inTransaction</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">:^(</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">FMDatabase</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *db, </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">BOOL</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> *rollback) {</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">    [db</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">executeUpdate</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;INSERT INTO t_student(name) VALUES (?)&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">,</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;Jack&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">    [db</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">executeUpdate</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;INSERT INTO t_student(name) VALUES (?)&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">,</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;Rose&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">    [db</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">executeUpdate</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;INSERT INTO t_student(name) VALUES (?)&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">,</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;Jim&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">   </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #406E74;">FMResultSet</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">*rs = [db</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">executeQuery</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">:</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #C41B17;">@&quot;select * from t_student&quot;</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: black;">];</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">while</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> ([rs </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #25474B;">next</span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">]) {</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">        </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #007400;">// …</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">    }</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">}];</span></div><ul style="direction: ltr; border-width: 100%; unicode-bidi: embed;" type="disc"><li style="color: #7F7F7F;"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 13.5pt;">事务回滚</span></li></ul><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">*rollback = </span><span style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: #AA2391;">YES;</span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">笔记整理：Edison</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; color: rgb(79, 129, 189); unicode-bidi: embed;">联系方式：QQ：277593 （笔记意见建议可加此Q，专人更新此笔记）；</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); unicode-bidi: embed;"> </span></div><div style="direction: ltr; unicode-bidi: embed; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Menlo; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">注：小道途径获取到的笔记，无法自动更新，请谅解！(笔记平均每月更新一次，祝各位都能拿到心仪的offer)</span><span style="direction: ltr; font-family: Menlo; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%;"> </span></div><div><br/></div></span>
</div></body></html> 