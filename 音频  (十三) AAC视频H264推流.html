<html>
<head>
  <title>音频  (十三): AAC视频H264推流</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="application-data:corenote-hostUUID" content="C8940BC2-A53C-4B55-B59C-4779464BC778"/>
  <meta name="application-data:corenote-localUUID" content="4F6F198F-CF1D-4E5C-A91C-F934115493C4"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1777"/>
<h1>音频  (十三): AAC视频H264推流</h1>

<div>
<span><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: &quot;Microsoft YaHei&quot;;">前言</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; font-family: Calibri;">:</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">这几个月一直在做</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">iphone</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">手机音视频的东西，一直没整理，现在闲的蛋疼，并且以后项目要搁置了，在这里记录一下我做的</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">iphone</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">手机推流的东西。</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">项目都是个人的调研与实验，可能很多不好或者不对的地方请多包涵。</span></div><div style="direction: ltr; font-family: Arial; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: Arial; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">1    </span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">功能概况</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">*  </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">实现音视频的数据的采集</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">*  </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">实现音视频数据的编码，视频编码成</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">h264</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，音频编码成</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">aac</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">*  </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">实现音视频数据的发布，将编码好的音视频数据传输到服务器</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">2</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">视频和音频编码方案</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">视频硬编码需要使用</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">AVAssetWriter</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，但是他只支持直接将数据编码成</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">h264</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">并写入文件，不提供接口中途获取视频数据处理，我们需要在保存的文件中读出数据</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">据顶采用软编码，主流开源编解码器</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Xvid,x264,ffmpeg</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Xvid</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">是基于</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">MPEG4</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">协议的编解码器，</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">x264</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">是基于</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">H.264</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">协议的编码器，</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">ffmpeg</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">集合了各种音频，视频编解码协议，通过设置参数可以完成基于</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">MPEG4,H.264</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">等协议的编解码，基于效率，决定使用</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">x264</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">进行软编</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Ios</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">支持</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">aac</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">音频软编码和硬编码，硬编无需消耗</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">cpu</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，效率高，决定使用硬编。使用</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Audio Queue</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">3.</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">技术流程图</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="音频  (十三) AAC视频H264推流_files/Image.png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">4  </span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">相关技术</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">1</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">x264</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">编码器</span></div><div style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial; color: #333333;">x264</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #333333;">是一个采用</span><a href="http://zh.wikipedia.org/wiki/GNU%E9%80%9A%E7%94%A8%E5%85%AC%E5%85%B1%E8%A8%B1%E5%8F%AF%E8%AD%89" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">GPL</a><a href="http://zh.wikipedia.org/wiki/GNU%E9%80%9A%E7%94%A8%E5%85%AC%E5%85%B1%E8%A8%B1%E5%8F%AF%E8%AD%89" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">授权</a><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #333333;">的视频编码</span><a href="http://zh.wikipedia.org/wiki/%E8%87%AA%E7%94%B1%E8%BB%9F%E9%AB%94" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">自由软件</a><a href="http://zh.wikipedia.org/wiki/X264%E7%B7%A8%E7%A2%BC%E5%99%A8#cite_note-1" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">[1]</a><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #333333;">。</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial; color: #333333;">x264</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #333333;">的主要功能在于进行</span><a href="http://zh.wikipedia.org/wiki/H.264/MPEG-4_AVC" style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">H.264/MPEG-4 AVC</a><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #333333;">的视频编码，而不是作为解码器（</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial; color: #333333;">decoder</span><span style="direction: ltr; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; color: #333333;">）之用。</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">2</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">） 在</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">xcode</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">下编译</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">x264</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">库</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">*  </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">下载</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">x264</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的库</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">*  </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">打开</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">shell</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，执行编译，由于我们的饮食频道额采集在模拟器上不能进行，所以不编译</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">i386</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的库，直接编译</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">armv7</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的库</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">*  </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">执行</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">make</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，编译成功得到</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">libx264.a</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">3</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Audioqueue</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">简介</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">要在</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">iOS</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">设备上播放和录制音频，苹果推荐我们使用</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">AVFoundation</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">框架中的</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">AVAudioPlayer</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">和</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">AVAudioRecorder</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">类。虽然用法比较简单，但是不支持流式；这就意味着：在播放音频前，必须等到整个音频加载完成后，才能开始播放音频；录音时，也必须等到录音结束后，才能获取到录音数据。这给应用造成了很大的局限性。为了解决这个问题，我们就需要使用</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Audio Queue Services</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">来播放和录制音频</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">.</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Audio Queue Services</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">提供了在</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">iOS</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">和</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Mac OS X</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">上直接录制和播放各种格式的音频，他能让你的应用程序在没有硬件接口知识的情况下使用硬件录音和播放设备，如</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">microphones </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">和</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">loudspeakers</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">。</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">（</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">4</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">）</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;"> Audioqueue</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">录制音频过程</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">一个</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Recording Audio Queue</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，包括</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Buffer(</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">缓冲器</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">)</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">组成的</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Buffer Queue(</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">缓冲队列</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">)</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">，以及一个</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Callback(</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">回调</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">)</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;">录音流程如下：</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial; background: white;">l </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: white;">将音频填入第一个缓冲器中</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial; background: white;">l </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: white;">当队列中的第一个缓冲器填满时，会自动填充下一个缓冲器。此时，会触发回调。</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial; background: white;">l </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: white;">在回调函数中需要将音频数据流写入磁盘</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial; background: white;">l </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: white;">然后，需要在回调函数中将该缓冲器重新放入缓冲队列，以便重复使用该缓冲器。重复步骤</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial; background: white;">2</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;; background: white;">。</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">Audio Queue</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">录制</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">aac</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">音频数据如下流程：</span></div><div style="direction: ltr; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><img src="音频  (十三) AAC视频H264推流_files/Image [1].png" type="image/png" data-filename="Image.png"/><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 11pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: &quot;Microsoft YaHei&quot;; font-size: 11.0pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">5 rtmp</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">发送音视频</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">  xcode</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">中编译</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">librtmp</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">库</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">在</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">xcode</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">中使用</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">librtmp</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">库可将音视频数据打成包，遵循</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">rtmp</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">协议，将数据发送到指定服务器，前提需要编译</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">librtmp</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">库并在</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">xcode</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">中使用此库</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">*  </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">下载</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">rtmpdump</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">源码</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">*  shell</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">下编译</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">librtmp</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">成</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">librtmp.a</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">并加入到</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">xcode</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">工程</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">*  </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">拷贝</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">rtmpdump</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">的</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">include</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">文件夹到</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">xcode</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">下的相应工程，并将路径添加到</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">User Header SearchPaths</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">*  </span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">在工程中引入使用</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">librtmp</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(4, 50, 255); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">6.</span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%;"> </span><span style="direction: ltr; font-size: 10.5pt; color: #0432FF; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">音视频同步</span></div><div style="direction: ltr; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">采用时间戳技术</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: Arial;">,</span><span style="direction: ltr; font-size: 10.5pt; color: #333333; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-family: &quot;Microsoft YaHei&quot;;">时间戳即为一帧的采集时间，音视频采取同一个参考时间，给每个帧打上时间戳</span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><br/></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">笔记整理：Edison</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; font-weight: bold; color: rgb(79, 129, 189); unicode-bidi: embed;">联系方式：QQ：277593 （笔记意见建议可加此Q，专人更新此笔记）；</span></div><div style="direction: ltr; font-family: Menlo; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; -en-paragraph: true; margin-top: 1em; margin-bottom: 1em; border-width: 100%; color: rgb(79, 129, 189); unicode-bidi: embed;"> </span></div><div style="direction: ltr; font-family: 'Microsoft YaHei'; font-size: 10.5pt; color: rgb(51, 51, 51); -en-paragraph: true; margin-top: 1em; margin-bottom: 1em;"><span style="direction: ltr; font-family: 'Microsoft YaHei'; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%; font-weight: bold;">注：小道途径获取到的笔记，无法自动更新，请谅解！(笔记平均每月更新一次，祝各位都能拿到心仪的offer)</span><span style="direction: ltr; font-family: 'Microsoft YaHei'; color: rgb(79, 129, 189); margin-top: 1em; margin-bottom: 1em; unicode-bidi: embed; font-size: 10.5pt; -en-paragraph: true; border-width: 100%;"> </span></div><div><br/></div></span>
</div></body></html> 